<!DOCTYPE html>
<html class="has-navbar-fixed-top">
  <head>
    <meta charset="utf-8" />
    <title>
       Drill-down refine in charts &ndash; Codelibrary 
    </title>

    
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-41201218-21"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-41201218-21");
    </script>

    
    

    
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/algolia-min.css"
      integrity="sha256-HB49n/BZjuqiCtQQf49OdZn63XuKFaxcIHWf0HNKte8="
      crossorigin="anonymous"
    />

    
    <link rel="stylesheet" type="text/css" href="/scss/main.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="shortcut icon" href="/favicon.ico" />
  </head>

  <body>
    <nav class="navbar is-fixed-top"
     role="navigation"
     aria-label="Main navigation">
    <div class="navbar-brand">
        <button class="navbar-burger burger"
                type="button"
                data-target="sidebarNavbar"
                aria-controls="sidebarNavbar"
                aria-expanded="false"
                aria-label="Main menu">
            Menu
        </button>
        <a class="navbar-item"
           href="/"
           title="Back to the homepage">
            <img src="/img/ods-logo-helphub.svg"
                 alt="Helphub Logo"/>
        </a>
        <button class="navbar-burger burger"
                type="button"
                data-target="helphubNavbar"
                aria-controls="helphubNavbar"
                aria-expanded="false"
                aria-label="Help Hub Menu">
            Help Hub
        </button>
    </div>
    <div class="navbar-menu"
         id="helphubNavbar">
        <div class="navbar-start">
            <a class="navbar-item"
               href="https://help.opendatasoft.com/">
                Help Hub
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/platform/en/">
                User guide
            </a>
            <a class="navbar-item is-active"
               href="https://codelibrary.opendatasoft.com">
                Code Library
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/faq-glossary/en/">
                FAQ
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/widgets/">
                Widgets
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/en/apis/">
                APIs
            </a>
            <a class="navbar-item"
               href="https://academy.opendatasoft.com/page/homepage">
                Academy
            </a>
            <a class="navbar-item"
               href="https://documentation-resources.opendatasoft.com/pages/release-notes/?headless=true">
                Release Notes
            </a>
        </div>
    </div>
</nav>


    <div class="columns is-desktop codelibrary">
      <div class="column is-narrow">
        <aside class="sidebar"
       id="sidebarNavbar">
   <div class="sidebar-header">
     <div class="block search-wrapper">
       <div id="algolia-box"></div>
       <div class="search-results-wrapper">
         <div id="algolia-results"></div>
       </div>
     </div>
    
       <div class="block">
         <ul class="menu-list">
           <p class="menu-label">On this page</p>
           <li>
             <a href="#">
               Top
             </a>
           </li>
           
           <li>
             <a href="#1-level-drill-down">
               1 level drill-down
             </a>
           </li>
           
           <li>
             <a href="#2-levels-drill-down">
               2 levels drill-down
             </a>
           </li>
           
         </ul>
       </div>
     </div>
     

        
        
        <ul class="menu-list">
            <li>
                <a class="sidebar-subtitle"
                   href="https://codelibrary.opendatasoft.com">
                    Home
                </a>
            </li>
            
              
                
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
              <li>
                  <a href="/components/"
                     class="sidebar-subtitle">
                      Components
                      
                  </a>
              </li>
              
            
              
                
                
                  
                  
                
                  
                  
                
              <li>
                  <a href="/custom-views/"
                     class="sidebar-subtitle">
                      Custom views
                      
                        <span class="tag pill is-size-7 is-rounded is-info">1</span>
                      
                  </a>
              </li>
              
            
              
                
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
              <li>
                  <a href="/generators/"
                     class="sidebar-subtitle">
                      Generators
                      
                        <span class="tag pill is-size-7 is-rounded is-info">1</span>
                      
                  </a>
              </li>
              
            
              
                
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
                  
                  
                
              <li>
                  <a href="/page-templates/"
                     class="sidebar-subtitle">
                      Page templates
                      
                  </a>
              </li>
              
            
              
                
                
                  
                  
                
                  
                  
                
                  
                  
                
              <li>
                  <a href="/portal-themes/"
                     class="sidebar-subtitle">
                      Portal themes
                      
                  </a>
              </li>
              
            
              
              <li>
                  <a class="sidebar-subtitle " href="/widget-tricks/">
                  Widget tricks
                  </a>
                  <ul>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-chart-css/">
                              <div>
                                ods-chart CSS Hacks
                                
                                
                                <span class="tag pill is-size-7 is-rounded is-info">
                                  1
                                </span>
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/animation/">
                              <div>
                                Animations
                                
                                
                                <span class="tag pill is-size-7 is-rounded is-info">
                                  1
                                </span>
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/svg-maps/">
                              <div>
                                Static maps, a quick introduction
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/charts/">
                              <div>
                                Chart samples
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/catalog-cards/">
                              <div>
                                Custom catalog card
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/custom-tooltips/">
                              <div>
                                Custom Tooltips
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/dates/">
                              <div>
                                Dates
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="is-active" href="/widget-tricks/drill-down/">
                              <div>
                                Drill-down refine in charts
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/filter-as-list/">
                              <div>
                                Filters as an HTML Select
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-aggregation/">
                              <div>
                                ods-aggregation
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-analysis/">
                              <div>
                                ods-analysis, quick intro
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-color-gradient/">
                              <div>
                                ods-color-gradient &#43; ods-map : a choropleth alternative
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-date-range-slider/">
                              <div>
                                ods-date-range-slider
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-map-tricks/">
                              <div>
                                ods-map: Refine &amp; Zoom
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-map-css/">
                              <div>
                                ods-map: CSS Hacks
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-pop-in/">
                              <div>
                                ods-pop-in variants
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-select/">
                              <div>
                                ods-select
                                
                                
                                <span class="tag pill is-size-7 is-rounded is-info">
                                  2
                                </span>
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/ods-simple-tabs/">
                              <div>
                                ods-simple-tabs
                                
                                
                              </div>
                            </a>
                        </li>
                      
                        <li>
                            <a class="" href="/widget-tricks/share-print/">
                              <div>
                                Share and print
                                
                                
                              </div>
                            </a>
                        </li>
                      
                  </ul>
              </li>
              
            
        </ul>
        <p class="menu-label">
            Tags
        </p>
        <div class="tags">
            
            <a class="tag" href="/tags/aggregation/">
                aggregation
            </a>
            
            <a class="tag" href="/tags/chart/">
                chart
            </a>
            
            <a class="tag" href="/tags/date/">
                date
            </a>
            
            <a class="tag" href="/tags/display/">
                display
            </a>
            
            <a class="tag" href="/tags/filter/">
                filter
            </a>
            
            <a class="tag" href="/tags/geo/">
                geo
            </a>
            
            <a class="tag" href="/tags/list/">
                list
            </a>
            
            <a class="tag" href="/tags/map/">
                map
            </a>
            
            <a class="tag" href="/tags/navigation/">
                navigation
            </a>
            
            <a class="tag" href="/tags/ods-aggregation/">
                ods-aggregation
            </a>
            
            <a class="tag" href="/tags/ods-analysis/">
                ods-analysis
            </a>
            
            <a class="tag" href="/tags/ods-maps/">
                ods-maps
            </a>
            
        </div>
</aside>

      </div>
      <div class="column codelibrary-content">
        
  <section>
    <div class="content-header container is-max-desktop mb-5">
      <div class="content">
        <h1>Widget Tricks - Drill-down refine in charts</h1>
        
      </div>
    </div>
    
    <div class="container">
      <div class="box box-example">
        <h2 class="title is-2" id="1-level-drill-down">
          1 level drill-down
          
          <a class="is-link anchor" href="#1-level-drill-down">
            <span class="icon">
              <img src="/img/fas-link.svg" />
            </span>
          </a>
        </h2>
        
        <div class="content">
          <p>Count rankings by country -&gt; sort universities by best score</p>

        </div>
        






    


<div class="codepen">

    <form id="form-1-level-drill-down"
          action="https://codepen.io/pen/define"
          method="POST"
          target="_blank">
        <input type="hidden"
               name="data"
               value='{
                 "title": "New Pen!",
                 "head": &#34;\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\&#34;\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\&#34;\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css\&#34;\u003e\n\n\u003c!-- ODS Platform CSS - must be hosted on static : WIP --\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css\&#34;\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://codelibrary.opendatasoft.com/css/theme.css\&#34;\u003e\n\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.8.2/angular-locale_fr.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript type=\&#34;text/javascript\&#34; src=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js\&#34;\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34; src=\&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js\&#34;\u003e\u003c/script\u003e\n\u003cscript type=\&#34;text/javascript\&#34; src=\&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js\&#34;\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n    angular.module(&#39;ods-widgets&#39;).config(function (ODSWidgetsConfigProvider) {\n        ODSWidgetsConfigProvider.setConfig({\n            \&#34;defaultDomain\&#34;: \&#34;https://userclub.opendatasoft.com/\&#34;,\n            \&#34;basemaps\&#34;: [\n                {\n                    \&#34;provider\&#34;: \&#34;jawg.light\&#34;,\n                    \&#34;label\&#34;: \&#34;Jawg Light\&#34;,\n                    \&#34;jawg_apikey\&#34;: \&#34;opendatasoft-community\&#34;\n                },\n                {\n                    \&#34;provider\&#34;: \&#34;jawg.streets\&#34;,\n                    \&#34;label\&#34;: \&#34;Jawg Streets\&#34;,\n                    \&#34;jawg_apikey\&#34;: \&#34;opendatasoft-community\&#34;,\n                    \&#34;id\&#34;: \&#34;streets\&#34;\n                }\n            ],\n            \&#34;themes\&#34;: {\n                &#39;default&#39;: {\n                    &#39;url&#39;: &#39;/img/ods.svg&#39;\n                },\n                &#39;Santé&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Culture, Patrimoine&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Éducation, Formation, Recherche, Enseignement&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Environment&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Transports, Déplacements&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Économie, Business, PME, Développement économique, Emploi&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Administration, Gouvernement, Finances publiques, Citoyenneté&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Justice, Sécurité, Police, Crime&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Sport, Loisirs&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Hébergement, Restauration&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Services, Social&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Checklist&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Usages&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                }\n            },\n            \&#34;mapPrependAttribution\&#34;: \&#34;Jawg apikey NOT suitable for production\&#34;\n        });\n    });\n\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n    document.addEventListener(\&#34;DOMContentLoaded\&#34;, function () {\n        document.querySelectorAll(&#39;a[href=\&#34;#\&#34;]&#39;).forEach((el) =\u003e {\n            el.addEventListener(&#39;click&#39;, (event) =\u003e {\n                event.preventDefault();\n            });\n        })\n    });\n\u003c/script\u003e\n&#34;,
                 "editors": 110,
                 "html": &#34;\u003cdiv ng-app=\&#34;ods-widgets\&#34;\u003e\n\u003cods-dataset-context context=\&#34;ctx1\&#34;\n                     ctx1-dataset=\&#34;shanghai-world-university-ranking\&#34;\n                     ctx1-domain=\&#34;userclub\&#34;\u003e\n    \u003cdiv class=\&#34;row\&#34;\u003e\n        \u003cdiv class=\&#34;col-md-9\&#34;\u003e\n            \u003cdiv class=\&#34;chart-box\&#34;\u003e\n                \u003c!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the \&#34;!\&#34; prior to the expression\nrefine-on-click on the field country that is trigerring the second ods-chart  --\u003e\n                \u003cdiv ng-if=\&#34;!ctx1.parameters[&#39;refine.country&#39;]\&#34;\u003e\n                    \u003ch3\u003e# of rankings by country\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;country\&#34; maxpoints=\&#34;25\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;pie\&#34; function-y=\&#34;COUNT\&#34;\n                                             color=\&#34;YlGnBu\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;# of rankings\&#34;\n                                             refine-on-click-context=\&#34;ctx1\&#34;\n                                             refine-on-click-ctx1-context-field=\&#34;country\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n                \u003c!-- ng-if directive to display this chart only if there is a refine on country\nthe context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--\u003e\n                \u003cdiv ng-if=\&#34;ctx1.parameters[&#39;refine.country&#39;]\&#34;\u003e\n                    \u003ch3\u003eBest ranking by university\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;university_name\&#34; maxpoints=\&#34;20\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;pie\&#34; function-y=\&#34;MAX\&#34; color=\&#34;YlGnBu\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;Best score\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities\nwith the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country\nthe concat method is used here to make sure the value is an array ie [\&#34;United States\&#34;] and not a string: United States --\u003e\n        \u003cdiv class=\&#34;col-md-3 filters\&#34;\u003e\n            \u003cp class=\&#34;appliedfilter\&#34; ng-repeat=\&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))\&#34;\u003e\n                {{filter}}\n            \u003c/p\u003e\n            \u003c!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition\nng-click: when you click on it, it is removing the refine on ctx1 context --\u003e\n            \u003ca href class=\&#34;resetfilter\&#34;\n               ng-if=\&#34;ctx1.parameters[&#39;refine.country&#39;]\&#34;\n               ng-click=\&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined\&#34;\u003eReset filter\u003c/a\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/ods-dataset-context\u003e\u003c/div\u003e&#34;,
                 "css": &#34;.filters {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n}\n.appliedfilter {\n    font-weight: 500;\n    font-size: 1.2em;\n}\n.resetfilter {\n    padding: 5px 10px;\n    border: 1px solid;\n    color: #006f96;\n    background-color: white;\n}\n.resetfilter:hover {\n    text-decoration: none;\n    color: white;\n    background-color: #006f96;\n}\n.chart-box {\n    height: 450px;\n}\n&#34;
               }'>
    </form>
</div>

<div class="ods-content">
    <section class="box box-live-example">
      <iframe id="iframe-1-level-drill-down"
              width="100%" height="100%"
              src="about:blank"
              srcdoc="
                <head>&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css&#34;&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#34;&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css&#34;&gt;

&lt;!-- ODS Platform CSS - must be hosted on static : WIP --&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css&#34;&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://codelibrary.opendatasoft.com/css/theme.css&#34;&gt;

&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.8.2/angular-locale_fr.min.js&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js&#34;&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34; src=&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js&#34;&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
    angular.module(&#39;ods-widgets&#39;).config(function (ODSWidgetsConfigProvider) {
        ODSWidgetsConfigProvider.setConfig({
            &#34;defaultDomain&#34;: &#34;https://userclub.opendatasoft.com/&#34;,
            &#34;basemaps&#34;: [
                {
                    &#34;provider&#34;: &#34;jawg.light&#34;,
                    &#34;label&#34;: &#34;Jawg Light&#34;,
                    &#34;jawg_apikey&#34;: &#34;opendatasoft-community&#34;
                },
                {
                    &#34;provider&#34;: &#34;jawg.streets&#34;,
                    &#34;label&#34;: &#34;Jawg Streets&#34;,
                    &#34;jawg_apikey&#34;: &#34;opendatasoft-community&#34;,
                    &#34;id&#34;: &#34;streets&#34;
                }
            ],
            &#34;themes&#34;: {
                &#39;default&#39;: {
                    &#39;url&#39;: &#39;/img/ods.svg&#39;
                },
                &#39;Santé&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Culture, Patrimoine&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Éducation, Formation, Recherche, Enseignement&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Environment&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Transports, Déplacements&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Économie, Business, PME, Développement économique, Emploi&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Administration, Gouvernement, Finances publiques, Citoyenneté&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Justice, Sécurité, Police, Crime&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Sport, Loisirs&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Hébergement, Restauration&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Services, Social&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Checklist&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Usages&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                }
            },
            &#34;mapPrependAttribution&#34;: &#34;Jawg apikey NOT suitable for production&#34;
        });
    });
&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
    document.addEventListener(&#34;DOMContentLoaded&#34;, function () {
        document.querySelectorAll(&#39;a[href=&#34;#&#34;]&#39;).forEach((el) =&gt; {
            el.addEventListener(&#39;click&#39;, (event) =&gt; {
                event.preventDefault();
            });
        })
    });
&lt;/script&gt;
</head>
                <body>
                <div ng-app='ods-widgets'>&lt;div ng-app=&#34;ods-widgets&#34;&gt;
&lt;ods-dataset-context context=&#34;ctx1&#34;
                     ctx1-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx1-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the &#34;!&#34; prior to the expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;country&#34; maxpoints=&#34;25&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx1&#34;
                                             refine-on-click-ctx1-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country
the context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--&gt;
                &lt;div ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;university_name&#34; maxpoints=&#34;20&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;MAX&#34; color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities
with the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country
the concat method is used here to make sure the value is an array ie [&#34;United States&#34;] and not a string: United States --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34; ng-repeat=&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))&#34;&gt;
                {{filter}}
            &lt;/p&gt;
            &lt;!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition
ng-click: when you click on it, it is removing the refine on ctx1 context --&gt;
            &lt;a href class=&#34;resetfilter&#34;
               ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;
               ng-click=&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Reset filter&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;&lt;/div&gt;</div>
                <style type='text/css'>
                    .filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}

                </style>
                </body>
              ">
      </iframe>
    </section>

    <section class="box box-code js-tabs">
        <nav class="level is-flex">
            <div class="level-left">
                <div class="level-item">
                    <ul class="buttons has-addons js-tablist">
                        <li class="button is-secondary is-outlined js-tablist__item">
                            <a class="js-tablist__link"
                               href="#code-1-level-drill-down-html-content">
                                HTML
                            </a>
                        </li>
                        
                        <li class="button is-secondary is-outlined js-tablist__item">
                            <a class="js-tablist__link"
                               href="#code-1-level-drill-down-css-content">
                                CSS
                            </a>
                        </li>
                        
                    </ul>
                </div>
            </div>
            <div class="level-right mt-0">
                <a class="button is-secondary is-outlined edit-on-codepen has-tooltip-left"
                   data-tooltip="Edit on CodePen"
                   target="_blank"
                   aria-role="link"
                   rel="noopener"
                   title="Edit on CodePen, open a new tab"
                   onclick="document.getElementById('form-1-level-drill-down').submit()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-edit">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                    </svg>
                </a>
            </div>
        </nav>

        <div class="tab-content">
            <div class="js-tabcontent"
                 id="code-1-level-drill-down-html-content">
                <div class="highlight">
                    <pre class="language-html" data-lang="html"><code>&lt;ods-dataset-context context=&#34;ctx1&#34;
                     ctx1-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx1-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the &#34;!&#34; prior to the expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;country&#34; maxpoints=&#34;25&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx1&#34;
                                             refine-on-click-ctx1-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country
the context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--&gt;
                &lt;div ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;university_name&#34; maxpoints=&#34;20&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;MAX&#34; color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities
with the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country
the concat method is used here to make sure the value is an array ie [&#34;United States&#34;] and not a string: United States --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34; ng-repeat=&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))&#34;&gt;
                {{filter}}
            &lt;/p&gt;
            &lt;!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition
ng-click: when you click on it, it is removing the refine on ctx1 context --&gt;
            &lt;a href class=&#34;resetfilter&#34;
               ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;
               ng-click=&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Reset filter&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;</code></pre>
                </div>
            </div>
            
            <div class="js-tabcontent"
                 id="code-1-level-drill-down-css-content">
                <div class="highlight">
                    <pre class="language-css" data-lang="css"><code>.filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}
</code></pre>
                </div>
            </div>
            
        </div>
    </section>
</div>

<script type="text/javascript">
    window.addEventListener("DOMContentLoaded", () => {
        var loopId = setInterval(() => {
            iframeId = "iframe-1-level-drill-down";
            iframe = document.getElementById(iframeId);
             
            size =  null 
             
            if (iframe != undefined && iframe.contentWindow.document.body != undefined){
                scrollHeight = parseInt(iframe.contentWindow.document.body.scrollHeight);
                if (iframe.height == size) {
                    clearInterval(loopId);
                } else {
                    iframe.height = size > 1 ? size : scrollHeight;
                }
            }
        }, 1000);
    });
</script>


<script type="text/javascript">
    window.addEventListener("DOMContentLoaded", () => {
        var loopId = setInterval(() => {
            iframeId = "iframe-1-level-drill-down";
            iframe = document.getElementById(iframeId);

            if (iframe != undefined && iframe.contentWindow.document.body != undefined){
                scrollHeight = parseInt(iframe.contentWindow.document.body.scrollHeight);
            }
        }, 1000);
    });
</script>

      </div>
    </div>
    
    <div class="container">
      <div class="box box-example">
        <h2 class="title is-2" id="2-levels-drill-down">
          2 levels drill-down
          
          <a class="is-link anchor" href="#2-levels-drill-down">
            <span class="icon">
              <img src="/img/fas-link.svg" />
            </span>
          </a>
        </h2>
        
        <div class="content">
          <p>Count rankings by country -&gt; sort university by best score -&gt; university score each years in the ranking</p>

        </div>
        






    


<div class="codepen">

    <form id="form-2-levels-drill-down"
          action="https://codepen.io/pen/define"
          method="POST"
          target="_blank">
        <input type="hidden"
               name="data"
               value='{
                 "title": "New Pen!",
                 "head": &#34;\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\&#34;\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\&#34;\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css\&#34;\u003e\n\n\u003c!-- ODS Platform CSS - must be hosted on static : WIP --\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css\&#34;\u003e\n\u003clink rel=\&#34;stylesheet\&#34; href=\&#34;https://codelibrary.opendatasoft.com/css/theme.css\&#34;\u003e\n\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.8.2/angular-locale_fr.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript type=\&#34;text/javascript\&#34; src=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js\&#34;\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34; src=\&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js\&#34;\u003e\u003c/script\u003e\n\u003cscript type=\&#34;text/javascript\&#34; src=\&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js\&#34;\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n    angular.module(&#39;ods-widgets&#39;).config(function (ODSWidgetsConfigProvider) {\n        ODSWidgetsConfigProvider.setConfig({\n            \&#34;defaultDomain\&#34;: \&#34;https://userclub.opendatasoft.com/\&#34;,\n            \&#34;basemaps\&#34;: [\n                {\n                    \&#34;provider\&#34;: \&#34;jawg.light\&#34;,\n                    \&#34;label\&#34;: \&#34;Jawg Light\&#34;,\n                    \&#34;jawg_apikey\&#34;: \&#34;opendatasoft-community\&#34;\n                },\n                {\n                    \&#34;provider\&#34;: \&#34;jawg.streets\&#34;,\n                    \&#34;label\&#34;: \&#34;Jawg Streets\&#34;,\n                    \&#34;jawg_apikey\&#34;: \&#34;opendatasoft-community\&#34;,\n                    \&#34;id\&#34;: \&#34;streets\&#34;\n                }\n            ],\n            \&#34;themes\&#34;: {\n                &#39;default&#39;: {\n                    &#39;url&#39;: &#39;/img/ods.svg&#39;\n                },\n                &#39;Santé&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Culture, Patrimoine&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Éducation, Formation, Recherche, Enseignement&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Environment&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Transports, Déplacements&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Économie, Business, PME, Développement économique, Emploi&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Administration, Gouvernement, Finances publiques, Citoyenneté&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Justice, Sécurité, Police, Crime&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Sport, Loisirs&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Hébergement, Restauration&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Services, Social&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Checklist&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                },\n                &#39;Usages&#39;: {\n                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#39;,\n                    &#39;color&#39;: &#39;#1446A0&#39;\n                }\n            },\n            \&#34;mapPrependAttribution\&#34;: \&#34;Jawg apikey NOT suitable for production\&#34;\n        });\n    });\n\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n    document.addEventListener(\&#34;DOMContentLoaded\&#34;, function () {\n        document.querySelectorAll(&#39;a[href=\&#34;#\&#34;]&#39;).forEach((el) =\u003e {\n            el.addEventListener(&#39;click&#39;, (event) =\u003e {\n                event.preventDefault();\n            });\n        })\n    });\n\u003c/script\u003e\n&#34;,
                 "editors": 110,
                 "html": &#34;\u003cdiv ng-app=\&#34;ods-widgets\&#34;\u003e\n\u003cods-dataset-context context=\&#34;ctx2\&#34;\n                     ctx2-dataset=\&#34;shanghai-world-university-ranking\&#34;\n                     ctx2-domain=\&#34;userclub\&#34;\u003e\n    \u003cdiv class=\&#34;row\&#34;\u003e\n        \u003cdiv class=\&#34;col-md-9\&#34;\u003e\n            \u003cdiv class=\&#34;chart-box\&#34;\u003e\n                \u003c!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the \&#34;!\&#34; prior each expression\nrefine-on-click on the field country that is trigerring the second ods-chart  --\u003e\n                \u003cdiv ng-if=\&#34;!ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 !ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\u003e\n                    \u003ch3\u003e# of rankings by country\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;country\&#34; maxpoints=\&#34;50\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;column\&#34; function-y=\&#34;COUNT\&#34;\n                                             color=\&#34;#2c7fb8\&#34; scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;# of rankings\&#34;\n                                             refine-on-click-context=\&#34;ctx2\&#34;\n                                             refine-on-click-ctx2-context-field=\&#34;country\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n                \u003c!-- ng-if directive to display this chart only if there is a refine on country and no refine on university\nthe context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)\nrefine-on-click on the field university_name that is trigerring the third ods-chart --\u003e\n                \u003cdiv ng-if=\&#34;ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 !ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\u003e\n                    \u003ch3\u003eBest ranking by university\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;university_name\&#34; maxpoints=\&#34;50\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;column\&#34; function-y=\&#34;MAX\&#34;\n                                             color=\&#34;#7fcdbb\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;Best score\&#34;\n                                             refine-on-click-context=\&#34;ctx2\&#34;\n                                             refine-on-click-ctx2-context-field=\&#34;university_name\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n                \u003c!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --\u003e\n                \u003cdiv ng-if=\&#34;ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\u003e\n                    \u003ch3\u003eScore evolution by year\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;year\&#34; maxpoints=\&#34;50\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;column\&#34; function-y=\&#34;MAX\&#34;\n                                             color=\&#34;#253494\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;Score\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores\nwe want to make sure the value displayed is a string for the end user\nwhen the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]\nhowever when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [\&#34;United Kingdom\&#34;,\&#34;University of Oxford\&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --\u003e\n        \u003cdiv class=\&#34;col-md-3 filters\&#34;\u003e\n            \u003cp class=\&#34;appliedfilter\&#34;\u003e\n                {{ (ctx2.parameters | values).join(\&#34;, \&#34;) || ctx2.parameters[&#39;refine.country&#39;] }}\n            \u003c/p\u003e\n            \u003c!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters\nBack to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --\u003e\n            \u003cdiv class=\&#34;resetfilters\&#34;\u003e\n                \u003ca href class=\&#34;resetfilter\&#34;\n                   ng-if=\&#34;ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 !ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\n                   ng-click=\&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined\&#34;\u003eBack to countries\u003c/a\u003e\n                \u003ca href class=\&#34;resetfilter\&#34;\n                   ng-if=\&#34;ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\n                   ng-click=\&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined\&#34;\u003eBack to universities\u003c/a\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/ods-dataset-context\u003e\u003c/div\u003e&#34;,
                 "css": &#34;.filters {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n}\n.appliedfilter {\n    font-weight: 500;\n    font-size: 1.2em;\n}\n.resetfilter {\n    padding: 5px 10px;\n    border: 1px solid;\n    color: #006f96;\n    background-color: white;\n}\n.resetfilter:hover {\n    text-decoration: none;\n    color: white;\n    background-color: #006f96;\n}\n.chart-box {\n    height: 450px;\n}\n&#34;
               }'>
    </form>
</div>

<div class="ods-content">
    <section class="box box-live-example">
      <iframe id="iframe-2-levels-drill-down"
              width="100%" height="100%"
              src="about:blank"
              srcdoc="
                <head>&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css&#34;&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#34;&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css&#34;&gt;

&lt;!-- ODS Platform CSS - must be hosted on static : WIP --&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css&#34;&gt;
&lt;link rel=&#34;stylesheet&#34; href=&#34;https://codelibrary.opendatasoft.com/css/theme.css&#34;&gt;

&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;https://cdnjs.cloudflare.com/ajax/libs/angular-i18n/1.8.2/angular-locale_fr.min.js&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js&#34;&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34; src=&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js&#34;&gt;&lt;/script&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js&#34;&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
    angular.module(&#39;ods-widgets&#39;).config(function (ODSWidgetsConfigProvider) {
        ODSWidgetsConfigProvider.setConfig({
            &#34;defaultDomain&#34;: &#34;https://userclub.opendatasoft.com/&#34;,
            &#34;basemaps&#34;: [
                {
                    &#34;provider&#34;: &#34;jawg.light&#34;,
                    &#34;label&#34;: &#34;Jawg Light&#34;,
                    &#34;jawg_apikey&#34;: &#34;opendatasoft-community&#34;
                },
                {
                    &#34;provider&#34;: &#34;jawg.streets&#34;,
                    &#34;label&#34;: &#34;Jawg Streets&#34;,
                    &#34;jawg_apikey&#34;: &#34;opendatasoft-community&#34;,
                    &#34;id&#34;: &#34;streets&#34;
                }
            ],
            &#34;themes&#34;: {
                &#39;default&#39;: {
                    &#39;url&#39;: &#39;/img/ods.svg&#39;
                },
                &#39;Santé&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Culture, Patrimoine&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Éducation, Formation, Recherche, Enseignement&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Environment&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Transports, Déplacements&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Économie, Business, PME, Développement économique, Emploi&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Administration, Gouvernement, Finances publiques, Citoyenneté&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Justice, Sécurité, Police, Crime&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Sport, Loisirs&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Hébergement, Restauration&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Services, Social&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Checklist&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                },
                &#39;Usages&#39;: {
                    &#39;url&#39;: &#39;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#39;,
                    &#39;color&#39;: &#39;#1446A0&#39;
                }
            },
            &#34;mapPrependAttribution&#34;: &#34;Jawg apikey NOT suitable for production&#34;
        });
    });
&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
    document.addEventListener(&#34;DOMContentLoaded&#34;, function () {
        document.querySelectorAll(&#39;a[href=&#34;#&#34;]&#39;).forEach((el) =&gt; {
            el.addEventListener(&#39;click&#39;, (event) =&gt; {
                event.preventDefault();
            });
        })
    });
&lt;/script&gt;
</head>
                <body>
                <div ng-app='ods-widgets'>&lt;div ng-app=&#34;ods-widgets&#34;&gt;
&lt;ods-dataset-context context=&#34;ctx2&#34;
                     ctx2-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx2-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the &#34;!&#34; prior each expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;country&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;#2c7fb8&#34; scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and no refine on university
the context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)
refine-on-click on the field university_name that is trigerring the third ods-chart --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;university_name&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#7fcdbb&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;university_name&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Score evolution by year&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;year&#34; maxpoints=&#34;50&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#253494&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores
we want to make sure the value displayed is a string for the end user
when the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]
however when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [&#34;United Kingdom&#34;,&#34;University of Oxford&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34;&gt;
                {{ (ctx2.parameters | values).join(&#34;, &#34;) || ctx2.parameters[&#39;refine.country&#39;] }}
            &lt;/p&gt;
            &lt;!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters
Back to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --&gt;
            &lt;div class=&#34;resetfilters&#34;&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Back to countries&lt;/a&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined&#34;&gt;Back to universities&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;&lt;/div&gt;</div>
                <style type='text/css'>
                    .filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}

                </style>
                </body>
              ">
      </iframe>
    </section>

    <section class="box box-code js-tabs">
        <nav class="level is-flex">
            <div class="level-left">
                <div class="level-item">
                    <ul class="buttons has-addons js-tablist">
                        <li class="button is-secondary is-outlined js-tablist__item">
                            <a class="js-tablist__link"
                               href="#code-2-levels-drill-down-html-content">
                                HTML
                            </a>
                        </li>
                        
                        <li class="button is-secondary is-outlined js-tablist__item">
                            <a class="js-tablist__link"
                               href="#code-2-levels-drill-down-css-content">
                                CSS
                            </a>
                        </li>
                        
                    </ul>
                </div>
            </div>
            <div class="level-right mt-0">
                <a class="button is-secondary is-outlined edit-on-codepen has-tooltip-left"
                   data-tooltip="Edit on CodePen"
                   target="_blank"
                   aria-role="link"
                   rel="noopener"
                   title="Edit on CodePen, open a new tab"
                   onclick="document.getElementById('form-2-levels-drill-down').submit()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                         stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                         class="feather feather-edit">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                    </svg>
                </a>
            </div>
        </nav>

        <div class="tab-content">
            <div class="js-tabcontent"
                 id="code-2-levels-drill-down-html-content">
                <div class="highlight">
                    <pre class="language-html" data-lang="html"><code>&lt;ods-dataset-context context=&#34;ctx2&#34;
                     ctx2-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx2-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the &#34;!&#34; prior each expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;country&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;#2c7fb8&#34; scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and no refine on university
the context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)
refine-on-click on the field university_name that is trigerring the third ods-chart --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;university_name&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#7fcdbb&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;university_name&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Score evolution by year&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;year&#34; maxpoints=&#34;50&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#253494&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores
we want to make sure the value displayed is a string for the end user
when the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]
however when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [&#34;United Kingdom&#34;,&#34;University of Oxford&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34;&gt;
                {{ (ctx2.parameters | values).join(&#34;, &#34;) || ctx2.parameters[&#39;refine.country&#39;] }}
            &lt;/p&gt;
            &lt;!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters
Back to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --&gt;
            &lt;div class=&#34;resetfilters&#34;&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Back to countries&lt;/a&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined&#34;&gt;Back to universities&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;</code></pre>
                </div>
            </div>
            
            <div class="js-tabcontent"
                 id="code-2-levels-drill-down-css-content">
                <div class="highlight">
                    <pre class="language-css" data-lang="css"><code>.filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}
</code></pre>
                </div>
            </div>
            
        </div>
    </section>
</div>

<script type="text/javascript">
    window.addEventListener("DOMContentLoaded", () => {
        var loopId = setInterval(() => {
            iframeId = "iframe-2-levels-drill-down";
            iframe = document.getElementById(iframeId);
             
            size =  null 
             
            if (iframe != undefined && iframe.contentWindow.document.body != undefined){
                scrollHeight = parseInt(iframe.contentWindow.document.body.scrollHeight);
                if (iframe.height == size) {
                    clearInterval(loopId);
                } else {
                    iframe.height = size > 1 ? size : scrollHeight;
                }
            }
        }, 1000);
    });
</script>


<script type="text/javascript">
    window.addEventListener("DOMContentLoaded", () => {
        var loopId = setInterval(() => {
            iframeId = "iframe-2-levels-drill-down";
            iframe = document.getElementById(iframeId);

            if (iframe != undefined && iframe.contentWindow.document.body != undefined){
                scrollHeight = parseInt(iframe.contentWindow.document.body.scrollHeight);
            }
        }, 1000);
    });
</script>

      </div>
    </div>
    
  </section>

      </div>
    </div>

    <footer class="footer">
    <a href="https://www.opendatasoft.com"
       class="footer-link"
       title="Opendatasoft website">
        <img src="/img/ods-logo.svg"
             class="footer-logo"
             alt="Opendatasoft logo"
        />
    </a>
    <span class="footer-copyright">
        &copy; Copyright 2020
    </span>
</footer>
    
    
    

    <script>
      var process = { env: { NODE_ENV: "production" } };
    </script>
    <script
      type="text/javascript"
      src="/index.min.a2d29702bc1ba00e41c8a549ddfdb348c67804eb2b40382ce695033b1677ea43.js"
      defer
    ></script>
  </body>
</html>
