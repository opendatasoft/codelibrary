<!DOCTYPE html>
<html class="has-navbar-fixed-top">
  <head>
    <meta charset="utf-8" />
    <title>
       Drill-down refine in charts &ndash; Codelibrary 
    </title>

    
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-41201218-21"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-41201218-21");
    </script>

    
    

    
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/algolia-min.css"
      integrity="sha256-HB49n/BZjuqiCtQQf49OdZn63XuKFaxcIHWf0HNKte8="
      crossorigin="anonymous"
    />

    
    <link rel="stylesheet" type="text/css" href="/scss/main.css" />
    
    
    <link rel="shortcut icon" href="/ods-favicon.ico" />
  </head>

  <body>
    <div class="is-hidden">
      <svg>
  <defs>
    <g id="link-2">
      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
    </g>

    <g id="check">
      <polyline points="20 6 9 17 4 12"></polyline>
    </g>

    <g id="copy">
      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
    </g>

    <g id="external">
      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
      <polyline points="15 3 21 3 21 9"></polyline>
      <line x1="10" y1="14" x2="21" y2="3"></line>
    </g>

  </defs>
</svg>

    </div>

    <nav class="ods-header navbar is-fixed-top"
     role="navigation"
     aria-label="Main navigation">

   <button type="button"
           class="menu-button navbar-burger burger"
           id="nav-button"
           data-target="sidebarNavbar"
           aria-controls="sidebarNavbar"
           aria-expanded="false"
           aria-label="Main menu">
        <img class="ods-header__menu-toggle__openlogo" src="/img/menu-fill.svg" alt="Open documentation menu">
    </button>

    <a class="ods-header-logo ods-header-logo-link"
       href="https://help.opendatasoft.com/">
        <img src="/img/ods-logo-noir.svg" alt="Opendatasoft logo">
        <span class="ods-header__brandname">
           Help Center
        </span>
    </a>

    <div class="ods-header__nav">
        <a class="ods-header__nav-item-link"
           href="https://userguide.opendatasoft.com/">
            User guide
        </a>
        <a class="ods-header__nav-item-link"
           href="https://academy.opendatasoft.com/page/homepage">
            Academy
        </a>
        <a class="ods-header__nav-item-link is-active"
           href="https://codelibrary.opendatasoft.com">
            Code Library
        </a>
        <a class="ods-header__nav-item-link"
           href="https://help.opendatasoft.com/widgets/">
            Widgets
        </a>
        <a class="ods-header__nav-item-link"
           href="https://help.opendatasoft.com/en/apis/">
            APIs
        </a>
        <a class="ods-header__nav-item-link"
           href="https://changes.opendatasoft.com/en">
            Release Notes
        </a>
    </div>
    <button type="button"
            class="menu-button navbar-burger burger"
            id="nav-button"
            data-target="helphubNavbar"
            aria-controls="helphubNavbar"
            aria-expanded="false"
            aria-label="Main menu">
        <img class="ods-header__menu-toggle__openlogo" src="/img/apps-custo.svg" alt="Open documentation menu">
    </button>
    <div class="navbar-menu" id="helphubNavbar">
        <a class="ods-header__nav-item-link"
           href="https://userguide.opendatasoft.com/">
            User guide
        </a>
        <a class="ods-header__nav-item-link"
           href="https://academy.opendatasoft.com/page/homepage">
            Academy
        </a>
        <a class="ods-header__nav-item-link is-active"
           href="https://codelibrary.opendatasoft.com">
            Code Library
        </a>
        <a class="ods-header__nav-item-link"
           href="https://help.opendatasoft.com/widgets/">
            Widgets
        </a>
        <a class="ods-header__nav-item-link"
           href="https://help.opendatasoft.com/en/apis/">
            APIs
        </a>
        <a class="ods-header__nav-item-link"
           href="https://changes.opendatasoft.com/en">
            Release Notes
        </a>
    </div>
</nav>


    <div class="columns is-desktop codelibrary mb-0">
      <div class="column is-narrow pb-0">
        <div class="sidebar-search is-hidden-touch">
  <div class="block search-wrapper">
    <div id="algolia-box"></div>
    <div class="search-results-wrapper">
      <div id="algolia-results"></div>
    </div>
  </div>
</div>
<aside class="sidebar"
       id="sidebarNavbar">
  
  <div class="sidebar-header">
    <div class="block">
      <ul class="menu-list">
        <p class="menu-label">On this page</p>
        <li>
          <a href="#">
            Top
          </a>
        </li>
        
        <li>
          <a href="#1-level-drill-down">
            1 level drill-down
          </a>
        </li>
        
        <li>
          <a href="#2-levels-drill-down">
            2 levels drill-down
          </a>
        </li>
        
      </ul>
    </div>
  </div>
  
  <div class="sidebar-body">
    
    
    <ul class="menu-list">
      <li>
        <a class="sidebar-subtitle"
          href="https://codelibrary.opendatasoft.com">
          Home
        </a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/components/"
        class="sidebar-subtitle">
        Components
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/custom-views/"
        class="sidebar-subtitle">
        Custom views
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/generators/"
        class="sidebar-subtitle">
        Generators
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/page-templates/"
        class="sidebar-subtitle">
        Page templates
        
        <span class="tag pill is-size-7 is-rounded is-info">2</span>
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/portal-themes/"
        class="sidebar-subtitle">
        Portal themes
        
      </a>
    </li>
    
    
      
      <li>
        <a class="sidebar-subtitle " href="/widget-tricks/">
          Widget tricks
        </a>
        <ul>
          
          <li>
            <a class="" href="/widget-tricks/age-pyramid-custom/">
              <div>
                Age Pyramid with custom HTML/CSS
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/age-pyramid-vegalite/">
              <div>
                Age Pyramid with Vega-Lite
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/animation/">
              <div>
                Animations
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/charts/">
              <div>
                Chart samples
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/catalog-cards/">
              <div>
                Custom catalog card
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/custom-tooltips/">
              <div>
                Custom Tooltips
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/dates/">
              <div>
                Dates
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="is-active" href="/widget-tricks/drill-down/">
              <div>
                Drill-down refine in charts
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/filter-as-list/">
              <div>
                Filters as an HTML Select
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/heatmaps-custom/">
              <div>
                Heatmaps with CSS Grid
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/heatmaps-vegalite/">
              <div>
                Heatmaps with Vega-Lite
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-adv-analysis/">
              <div>
                ods-adv-analysis
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-aggregation/">
              <div>
                ods-aggregation
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-analysis/">
              <div>
                ods-analysis, quick intro
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-chart-css-hacks/">
              <div>
                ods-chart: CSS Hacks
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-chart-css-library/">
              <div>
                ods-chart: Custom CSS Library
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-color-gradient/">
              <div>
                ods-color-gradient &#43; ods-map : a choropleth alternative
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-date-range-slider/">
              <div>
                ods-date-range-slider
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-map-css/">
              <div>
                ods-map: CSS Hacks
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-map-tricks/">
              <div>
                ods-map: Refine &amp; Zoom
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-pop-in/">
              <div>
                ods-pop-in variants
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-results/">
              <div>
                ods-results
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-select/">
              <div>
                ods-select
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/ods-simple-tabs/">
              <div>
                ods-simple-tabs
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/share-print/">
              <div>
                Share and print
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/widget-tricks/svg-maps/">
              <div>
                Static maps, a quick introduction
                
                
              </div>
            </a>
          </li>
          
        </ul>
      </li>
      
    
  </ul>
  <p class="menu-label">
    Tags
  </p>
  <div class="tags">
    
    <a class="tag" href="/tags/aggregation/">
      aggregation
    </a>
    
    <a class="tag" href="/tags/card/">
      card
    </a>
    
    <a class="tag" href="/tags/chart/">
      chart
    </a>
    
    <a class="tag" href="/tags/date/">
      date
    </a>
    
    <a class="tag" href="/tags/display/">
      display
    </a>
    
    <a class="tag" href="/tags/filter/">
      filter
    </a>
    
    <a class="tag" href="/tags/geo/">
      geo
    </a>
    
    <a class="tag" href="/tags/list/">
      list
    </a>
    
    <a class="tag" href="/tags/map/">
      map
    </a>
    
    <a class="tag" href="/tags/navigation/">
      navigation
    </a>
    
    <a class="tag" href="/tags/ods-adv-analysis/">
      ods-adv-analysis
    </a>
    
    <a class="tag" href="/tags/ods-aggregation/">
      ods-aggregation
    </a>
    
    <a class="tag" href="/tags/ods-analysis/">
      ods-analysis
    </a>
    
    <a class="tag" href="/tags/ods-maps/">
      ods-maps
    </a>
    
    <a class="tag" href="/tags/ods-subaggregation/">
      ods-subaggregation
    </a>
    
    <a class="tag" href="/tags/redirection/">
      redirection
    </a>
    
  </div>
</div>
</aside>

      </div>
      <div class="column codelibrary-content">
        
<section class="section resources">
    <div class="container is-max-widescreen">
        <h1 class="title is-1">Widget Tricks - Drill-down refine in charts</h1>
        <div class="content">
            
        </div>
        
        <article class="block">
            <h2 class="title is-2" id="1-level-drill-down">
                1 level drill-down 
                <a class="is-link anchor" href="#1-level-drill-down">
            <span class="icon">
              <img src="/img/fas-link.svg"/>
            </span>
                </a>
            </h2>
            <div class="content">
                <p>Count rankings by country -&gt; sort universities by best score</p>

            </div>
            
            
                <div class="box">
                    






    




    







<div class="codepen">
    <form id="form-1-level-drill-down"
          action="https://codepen.io/pen/define"
          method="POST"
          target="_blank">
        <input type="hidden"
               name="data"
               value='{
                 "title": "New Pen!",
                 "head": &#34;\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css\&#34;\n/\u003e\n\n\u003c!-- ODS Platform CSS - must be hosted on static : WIP --\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://codelibrary.opendatasoft.com/css/theme.css\&#34;\n/\u003e\n\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js\&#34;\n\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n  const sourceMonitoringInterceptor = $q =\u003e {\n    return {\n      request: config =\u003e {\n        console.log(config.url);\n        if (config.params)\n          if (config.params.source) delete config.params.source;\n\n        config.url = config.url.replace(\n          \&#34;ods-api-monitoring\&#34;,\n          \&#34;monitoring-copy\&#34;\n        );\n        return config;\n      }\n    };\n  };\n\n  angular\n    .module(\&#34;ods-widgets\&#34;)\n    .config(function(ODSWidgetsConfigProvider, $httpProvider) {\n      ODSWidgetsConfigProvider.setConfig({\n        defaultDomain: \&#34;https://userclub.opendatasoft.com/\&#34;,\n        basemaps: [\n          {\n            provider: \&#34;jawg.light\&#34;,\n            label: \&#34;Jawg Light\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;\n          },\n          {\n            provider: \&#34;jawg.streets\&#34;,\n            label: \&#34;Jawg Streets\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;,\n            id: \&#34;streets\&#34;\n          }\n        ],\n        themes: {\n          default: {\n            url: \&#34;/img/ods.svg\&#34;\n          },\n          Santé: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Culture, Patrimoine\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Éducation, Formation, Recherche, Enseignement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Environment: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Transports, Déplacements\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Économie, Business, PME, Développement économique, Emploi\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Administration, Gouvernement, Finances publiques, Citoyenneté\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Justice, Sécurité, Police, Crime\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Sport, Loisirs\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Hébergement, Restauration\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Services, Social\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Checklist: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Usages: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          }\n        },\n        mapPrependAttribution: \&#34;Jawg apikey NOT suitable for production\&#34;\n      });\n      $httpProvider.interceptors.push(sourceMonitoringInterceptor);\n    });\n\u003c/script\u003e\n&#34;,
                 "editors": 110,
                 "html": &#34;\u003cdiv ng-app=\&#34;ods-widgets\&#34;\u003e\n\u003cods-dataset-context context=\&#34;ctx1\&#34;\n                     ctx1-dataset=\&#34;shanghai-world-university-ranking\&#34;\n                     ctx1-domain=\&#34;userclub\&#34;\u003e\n    \u003cdiv class=\&#34;row\&#34;\u003e\n        \u003cdiv class=\&#34;col-md-9\&#34;\u003e\n            \u003cdiv class=\&#34;chart-box\&#34;\u003e\n                \u003c!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the \&#34;!\&#34; prior to the expression\nrefine-on-click on the field country that is trigerring the second ods-chart  --\u003e\n                \u003cdiv ng-if=\&#34;!ctx1.parameters[&#39;refine.country&#39;]\&#34;\u003e\n                    \u003ch3\u003e# of rankings by country\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;country\&#34; maxpoints=\&#34;25\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;pie\&#34; function-y=\&#34;COUNT\&#34;\n                                             color=\&#34;YlGnBu\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;# of rankings\&#34;\n                                             refine-on-click-context=\&#34;ctx1\&#34;\n                                             refine-on-click-ctx1-context-field=\&#34;country\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n                \u003c!-- ng-if directive to display this chart only if there is a refine on country\nthe context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--\u003e\n                \u003cdiv ng-if=\&#34;ctx1.parameters[&#39;refine.country&#39;]\&#34;\u003e\n                    \u003ch3\u003eBest ranking by university\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;university_name\&#34; maxpoints=\&#34;20\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;pie\&#34; function-y=\&#34;MAX\&#34; color=\&#34;YlGnBu\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;Best score\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities\nwith the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country\nthe concat method is used here to make sure the value is an array ie [\&#34;United States\&#34;] and not a string: United States --\u003e\n        \u003cdiv class=\&#34;col-md-3 filters\&#34;\u003e\n            \u003cp class=\&#34;appliedfilter\&#34; ng-repeat=\&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))\&#34;\u003e\n                {{filter}}\n            \u003c/p\u003e\n            \u003c!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition\nng-click: when you click on it, it is removing the refine on ctx1 context --\u003e\n            \u003ca href class=\&#34;resetfilter\&#34;\n               ng-if=\&#34;ctx1.parameters[&#39;refine.country&#39;]\&#34;\n               ng-click=\&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined\&#34;\u003eReset filter\u003c/a\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/ods-dataset-context\u003e\u003c/div\u003e&#34;,
                 "css": &#34;.filters {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n}\n.appliedfilter {\n    font-weight: 500;\n    font-size: 1.2em;\n}\n.resetfilter {\n    padding: 5px 10px;\n    border: 1px solid;\n    color: #006f96;\n    background-color: white;\n}\n.resetfilter:hover {\n    text-decoration: none;\n    color: white;\n    background-color: #006f96;\n}\n.chart-box {\n    height: 450px;\n}\n&#34;
               }'>
    </form>
</div>
<div class="ods-content">
    <div class="box-live-example"
      style="height: 500px;">
      <iframe id="iframe-1-level-drill-down"
              width="100%" height="100%"
              src="about:blank"
              srcdoc="
                <head>
                    &lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css&#34;
/&gt;

&lt;!-- ODS Platform CSS - must be hosted on static : WIP --&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://codelibrary.opendatasoft.com/css/theme.css&#34;
/&gt;

&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js&#34;&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js&#34;
&gt;&lt;/script&gt;

&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js&#34;
&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js&#34;
&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
  const sourceMonitoringInterceptor = $q =&gt; {
    return {
      request: config =&gt; {
        console.log(config.url);
        if (config.params)
          if (config.params.source) delete config.params.source;

        config.url = config.url.replace(
          &#34;ods-api-monitoring&#34;,
          &#34;monitoring-copy&#34;
        );
        return config;
      }
    };
  };

  angular
    .module(&#34;ods-widgets&#34;)
    .config(function(ODSWidgetsConfigProvider, $httpProvider) {
      ODSWidgetsConfigProvider.setConfig({
        defaultDomain: &#34;https://userclub.opendatasoft.com/&#34;,
        basemaps: [
          {
            provider: &#34;jawg.light&#34;,
            label: &#34;Jawg Light&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;
          },
          {
            provider: &#34;jawg.streets&#34;,
            label: &#34;Jawg Streets&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;,
            id: &#34;streets&#34;
          }
        ],
        themes: {
          default: {
            url: &#34;/img/ods.svg&#34;
          },
          Santé: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Culture, Patrimoine&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Éducation, Formation, Recherche, Enseignement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Environment: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Transports, Déplacements&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Économie, Business, PME, Développement économique, Emploi&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Administration, Gouvernement, Finances publiques, Citoyenneté&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Justice, Sécurité, Police, Crime&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Sport, Loisirs&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Hébergement, Restauration&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Services, Social&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Checklist: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Usages: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#34;,
            color: &#34;#1446A0&#34;
          }
        },
        mapPrependAttribution: &#34;Jawg apikey NOT suitable for production&#34;
      });
      $httpProvider.interceptors.push(sourceMonitoringInterceptor);
    });
&lt;/script&gt;

                    
                </head>
                <base href='https://userclub.opendatasoft.com/'>
                <body>
                <div ng-app='ods-widgets'>&lt;div ng-app=&#34;ods-widgets&#34;&gt;
&lt;ods-dataset-context context=&#34;ctx1&#34;
                     ctx1-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx1-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the &#34;!&#34; prior to the expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;country&#34; maxpoints=&#34;25&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx1&#34;
                                             refine-on-click-ctx1-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country
the context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--&gt;
                &lt;div ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;university_name&#34; maxpoints=&#34;20&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;MAX&#34; color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities
with the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country
the concat method is used here to make sure the value is an array ie [&#34;United States&#34;] and not a string: United States --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34; ng-repeat=&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))&#34;&gt;
                {{filter}}
            &lt;/p&gt;
            &lt;!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition
ng-click: when you click on it, it is removing the refine on ctx1 context --&gt;
            &lt;a href class=&#34;resetfilter&#34;
               ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;
               ng-click=&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Reset filter&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;&lt;/div&gt;</div>
                <style type='text/css'>
                    .filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}

                </style>
                </body>
              ">
      </iframe>
      <div class="buttons has-addons">
          
              <button id="tab-show-schema" aria-controls="panel-show-schema"
                      class="show-schema button is-light"
                      title="Show the data schema of the dataset used in this resource">
                  <span>See fields in use</span>
              </button>
          
          <button id="tab-show-code" aria-controls="panel-show-code"
                  class="show-code button is-light">
            <span>Show code</span>
          </button>
          <button class="button is-light"
             target="_blank"
             aria-role="link"
             rel="noopener"
             title="Edit on CodePen, open a new tab"
             onclick="document.getElementById('form-1-level-drill-down').submit()">
              <span>Edit on Codepen</span>
              <span class="icon is-small">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                  <use xlink:href="#external"></use>
                </svg>
              </span>
          </button>
      </div>
    </div>
    
        <div id="panel-show-schema" aria-labelledby="tab-show-schema" aria-hidden
             class="box-schema is-hidden">
            <div class="content">
                <p><strong>Dataset in use:</strong> <code>shanghai-world-university-ranking</code> <a href="https://userclub.opendatasoft.com/explore/dataset/shanghai-world-university-ranking/table/">(See it on userclub domain)</a></p>
<p><strong>Fields in use:</strong></p>
<table>
<thead>
<tr>
<th>country</th>
<th>total_score (numeric)</th>
<th>university_name</th>
</tr>
</thead>
<tbody>
<tr>
<td>United States</td>
<td>100</td>
<td>Harvard University</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>72,6</td>
<td>University of Cambridge</td>
</tr>
<tr>
<td>Germany</td>
<td>34,8</td>
<td>Heidelberg University</td>
</tr>
<tr>
<td>China</td>
<td>34,1</td>
<td>Tsinghua University</td>
</tr>
</tbody>
</table>

            </div>
        </div>
    
    <div id="panel-show-code" aria-labelledby="tab-show-code" aria-hidden
         class="box-code js-tabs is-hidden">
        <nav class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <div class="buttons has-addons js-tablist">
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-1-level-drill-down-html-content"
                        >
                          HTML
                        </a>
                        
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-1-level-drill-down-css-content"
                        >
                          CSS
                        </a>
                        
                    </div>
                </div>
            </div>
            <div class="level-right">
                <button class="copy-to-cc button is-primary is-outlined is-rounded has-tooltip-left"
                  data-tooltip="Copy to clipboard"
                  aria-role="button"
                  title="Edit on CodePen, open a new tab"
                >
                  <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#copy"></use>
                    </svg>
                  </span>
                </button>
                <button class="copied-to-cc button is-success is-outlined is-rounded has-tooltip-left is-hidden"
                  data-tooltip="Copied"
                  aria-role="button"
                  title="Copied"
                >
                  <figure class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#check"></use>
                    </svg>
                  </figure>
                </button>
            </div>
        </nav>
        <div class="tab-content">
            <div class="js-tabcontent"
                 id="code-1-level-drill-down-html-content"
                 data-clipboard="&lt;ods-dataset-context context=&#34;ctx1&#34;
                     ctx1-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx1-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the &#34;!&#34; prior to the expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;country&#34; maxpoints=&#34;25&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx1&#34;
                                             refine-on-click-ctx1-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country
the context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--&gt;
                &lt;div ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;university_name&#34; maxpoints=&#34;20&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;MAX&#34; color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities
with the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country
the concat method is used here to make sure the value is an array ie [&#34;United States&#34;] and not a string: United States --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34; ng-repeat=&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))&#34;&gt;
                {{filter}}
            &lt;/p&gt;
            &lt;!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition
ng-click: when you click on it, it is removing the refine on ctx1 context --&gt;
            &lt;a href class=&#34;resetfilter&#34;
               ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;
               ng-click=&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Reset filter&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;"
                 role="tabpanel">
                <div class="highlight">
                    <pre class="language-html" data-lang="html"><code>&lt;ods-dataset-context context=&#34;ctx1&#34;
                     ctx1-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx1-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) thanks to the &#34;!&#34; prior to the expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;country&#34; maxpoints=&#34;25&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx1&#34;
                                             refine-on-click-ctx1-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country
the context is still ctx1 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)--&gt;
                &lt;div ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;university_name&#34; maxpoints=&#34;20&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;pie&#34; function-y=&#34;MAX&#34; color=&#34;YlGnBu&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected country as a reminder for the end user when he/she deeps dive into universities
with the directive ng-repeat, we enumerate each item in the array ([].concat(ctx1.parameters[&#39;refine.country&#39;]) to display the country
the concat method is used here to make sure the value is an array ie [&#34;United States&#34;] and not a string: United States --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34; ng-repeat=&#34;filter in ([].concat(ctx1.parameters[&#39;refine.country&#39;]))&#34;&gt;
                {{filter}}
            &lt;/p&gt;
            &lt;!-- defining the reset button: it is only displayed if there is a refine on country with the ng-if condition
ng-click: when you click on it, it is removing the refine on ctx1 context --&gt;
            &lt;a href class=&#34;resetfilter&#34;
               ng-if=&#34;ctx1.parameters[&#39;refine.country&#39;]&#34;
               ng-click=&#34;ctx1.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Reset filter&lt;/a&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;</code></pre>
                </div>
            </div>
            
            <div class="js-tabcontent"
                 id="code-1-level-drill-down-css-content"
                 data-clipboard=".filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}
">
                <div class="highlight">
                    <pre class="language-css" data-lang="css"><code>.filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}
</code></pre>
                </div>
            </div>
            
        </div>
    </div>
</div>

                </div>
            
        </article>
        
        <article class="block">
            <h2 class="title is-2" id="2-levels-drill-down">
                2 levels drill-down 
                <a class="is-link anchor" href="#2-levels-drill-down">
            <span class="icon">
              <img src="/img/fas-link.svg"/>
            </span>
                </a>
            </h2>
            <div class="content">
                <p>Count rankings by country -&gt; sort university by best score -&gt; university score each years in the ranking</p>

            </div>
            
            
                <div class="box">
                    






    




    







<div class="codepen">
    <form id="form-2-levels-drill-down"
          action="https://codepen.io/pen/define"
          method="POST"
          target="_blank">
        <input type="hidden"
               name="data"
               value='{
                 "title": "New Pen!",
                 "head": &#34;\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css\&#34;\n/\u003e\n\n\u003c!-- ODS Platform CSS - must be hosted on static : WIP --\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://codelibrary.opendatasoft.com/css/theme.css\&#34;\n/\u003e\n\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js\&#34;\n\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n  const sourceMonitoringInterceptor = $q =\u003e {\n    return {\n      request: config =\u003e {\n        console.log(config.url);\n        if (config.params)\n          if (config.params.source) delete config.params.source;\n\n        config.url = config.url.replace(\n          \&#34;ods-api-monitoring\&#34;,\n          \&#34;monitoring-copy\&#34;\n        );\n        return config;\n      }\n    };\n  };\n\n  angular\n    .module(\&#34;ods-widgets\&#34;)\n    .config(function(ODSWidgetsConfigProvider, $httpProvider) {\n      ODSWidgetsConfigProvider.setConfig({\n        defaultDomain: \&#34;https://userclub.opendatasoft.com/\&#34;,\n        basemaps: [\n          {\n            provider: \&#34;jawg.light\&#34;,\n            label: \&#34;Jawg Light\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;\n          },\n          {\n            provider: \&#34;jawg.streets\&#34;,\n            label: \&#34;Jawg Streets\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;,\n            id: \&#34;streets\&#34;\n          }\n        ],\n        themes: {\n          default: {\n            url: \&#34;/img/ods.svg\&#34;\n          },\n          Santé: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Culture, Patrimoine\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Éducation, Formation, Recherche, Enseignement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Environment: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Transports, Déplacements\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Économie, Business, PME, Développement économique, Emploi\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Administration, Gouvernement, Finances publiques, Citoyenneté\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Justice, Sécurité, Police, Crime\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Sport, Loisirs\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Hébergement, Restauration\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Services, Social\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Checklist: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Usages: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          }\n        },\n        mapPrependAttribution: \&#34;Jawg apikey NOT suitable for production\&#34;\n      });\n      $httpProvider.interceptors.push(sourceMonitoringInterceptor);\n    });\n\u003c/script\u003e\n&#34;,
                 "editors": 110,
                 "html": &#34;\u003cdiv ng-app=\&#34;ods-widgets\&#34;\u003e\n\u003cods-dataset-context context=\&#34;ctx2\&#34;\n                     ctx2-dataset=\&#34;shanghai-world-university-ranking\&#34;\n                     ctx2-domain=\&#34;userclub\&#34;\u003e\n    \u003cdiv class=\&#34;row\&#34;\u003e\n        \u003cdiv class=\&#34;col-md-9\&#34;\u003e\n            \u003cdiv class=\&#34;chart-box\&#34;\u003e\n                \u003c!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the \&#34;!\&#34; prior each expression\nrefine-on-click on the field country that is trigerring the second ods-chart  --\u003e\n                \u003cdiv ng-if=\&#34;!ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 !ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\u003e\n                    \u003ch3\u003e# of rankings by country\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;country\&#34; maxpoints=\&#34;50\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;column\&#34; function-y=\&#34;COUNT\&#34;\n                                             color=\&#34;#2c7fb8\&#34; scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;# of rankings\&#34;\n                                             refine-on-click-context=\&#34;ctx2\&#34;\n                                             refine-on-click-ctx2-context-field=\&#34;country\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n                \u003c!-- ng-if directive to display this chart only if there is a refine on country and no refine on university\nthe context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)\nrefine-on-click on the field university_name that is trigerring the third ods-chart --\u003e\n                \u003cdiv ng-if=\&#34;ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 !ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\u003e\n                    \u003ch3\u003eBest ranking by university\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;university_name\&#34; maxpoints=\&#34;50\&#34; sort=\&#34;serie1-1\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;column\&#34; function-y=\&#34;MAX\&#34;\n                                             color=\&#34;#7fcdbb\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;Best score\&#34;\n                                             refine-on-click-context=\&#34;ctx2\&#34;\n                                             refine-on-click-ctx2-context-field=\&#34;university_name\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n                \u003c!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --\u003e\n                \u003cdiv ng-if=\&#34;ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\u003e\n                    \u003ch3\u003eScore evolution by year\u003c/h3\u003e\n                    \u003cods-chart align-month=\&#34;true\&#34; labels-x-length=\&#34;20\&#34;\u003e\n                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;year\&#34; maxpoints=\&#34;50\&#34;\u003e\n                            \u003cods-chart-serie expression-y=\&#34;total_score\&#34; chart-type=\&#34;column\&#34; function-y=\&#34;MAX\&#34;\n                                             color=\&#34;#253494\&#34;\n                                             scientific-display=\&#34;true\&#34;\n                                             label-y=\&#34;Score\&#34;\u003e\n                            \u003c/ods-chart-serie\u003e\n                        \u003c/ods-chart-query\u003e\n                    \u003c/ods-chart\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n        \u003c!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores\nwe want to make sure the value displayed is a string for the end user\nwhen the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]\nhowever when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [\&#34;United Kingdom\&#34;,\&#34;University of Oxford\&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --\u003e\n        \u003cdiv class=\&#34;col-md-3 filters\&#34;\u003e\n            \u003cp class=\&#34;appliedfilter\&#34;\u003e\n                {{ (ctx2.parameters | values).join(\&#34;, \&#34;) || ctx2.parameters[&#39;refine.country&#39;] }}\n            \u003c/p\u003e\n            \u003c!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters\nBack to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --\u003e\n            \u003cdiv class=\&#34;resetfilters\&#34;\u003e\n                \u003ca href class=\&#34;resetfilter\&#34;\n                   ng-if=\&#34;ctx2.parameters[&#39;refine.country&#39;] \u0026\u0026 !ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\n                   ng-click=\&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined\&#34;\u003eBack to countries\u003c/a\u003e\n                \u003ca href class=\&#34;resetfilter\&#34;\n                   ng-if=\&#34;ctx2.parameters[&#39;refine.university_name&#39;]\&#34;\n                   ng-click=\&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined\&#34;\u003eBack to universities\u003c/a\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n    \u003c/div\u003e\n\u003c/ods-dataset-context\u003e\u003c/div\u003e&#34;,
                 "css": &#34;.filters {\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n}\n.appliedfilter {\n    font-weight: 500;\n    font-size: 1.2em;\n}\n.resetfilter {\n    padding: 5px 10px;\n    border: 1px solid;\n    color: #006f96;\n    background-color: white;\n}\n.resetfilter:hover {\n    text-decoration: none;\n    color: white;\n    background-color: #006f96;\n}\n.chart-box {\n    height: 450px;\n}\n&#34;
               }'>
    </form>
</div>
<div class="ods-content">
    <div class="box-live-example"
      style="height: 500px;">
      <iframe id="iframe-2-levels-drill-down"
              width="100%" height="100%"
              src="about:blank"
              srcdoc="
                <head>
                    &lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css&#34;
/&gt;

&lt;!-- ODS Platform CSS - must be hosted on static : WIP --&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://codelibrary.opendatasoft.com/css/theme.css&#34;
/&gt;

&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js&#34;&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js&#34;
&gt;&lt;/script&gt;

&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js&#34;
&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js&#34;
&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
  const sourceMonitoringInterceptor = $q =&gt; {
    return {
      request: config =&gt; {
        console.log(config.url);
        if (config.params)
          if (config.params.source) delete config.params.source;

        config.url = config.url.replace(
          &#34;ods-api-monitoring&#34;,
          &#34;monitoring-copy&#34;
        );
        return config;
      }
    };
  };

  angular
    .module(&#34;ods-widgets&#34;)
    .config(function(ODSWidgetsConfigProvider, $httpProvider) {
      ODSWidgetsConfigProvider.setConfig({
        defaultDomain: &#34;https://userclub.opendatasoft.com/&#34;,
        basemaps: [
          {
            provider: &#34;jawg.light&#34;,
            label: &#34;Jawg Light&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;
          },
          {
            provider: &#34;jawg.streets&#34;,
            label: &#34;Jawg Streets&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;,
            id: &#34;streets&#34;
          }
        ],
        themes: {
          default: {
            url: &#34;/img/ods.svg&#34;
          },
          Santé: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Culture, Patrimoine&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Éducation, Formation, Recherche, Enseignement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Environment: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Transports, Déplacements&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Économie, Business, PME, Développement économique, Emploi&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Administration, Gouvernement, Finances publiques, Citoyenneté&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Justice, Sécurité, Police, Crime&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Sport, Loisirs&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Hébergement, Restauration&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Services, Social&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Checklist: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Usages: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#34;,
            color: &#34;#1446A0&#34;
          }
        },
        mapPrependAttribution: &#34;Jawg apikey NOT suitable for production&#34;
      });
      $httpProvider.interceptors.push(sourceMonitoringInterceptor);
    });
&lt;/script&gt;

                    
                </head>
                <base href='https://userclub.opendatasoft.com/'>
                <body>
                <div ng-app='ods-widgets'>&lt;div ng-app=&#34;ods-widgets&#34;&gt;
&lt;ods-dataset-context context=&#34;ctx2&#34;
                     ctx2-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx2-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the &#34;!&#34; prior each expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;country&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;#2c7fb8&#34; scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and no refine on university
the context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)
refine-on-click on the field university_name that is trigerring the third ods-chart --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;university_name&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#7fcdbb&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;university_name&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Score evolution by year&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;year&#34; maxpoints=&#34;50&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#253494&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores
we want to make sure the value displayed is a string for the end user
when the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]
however when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [&#34;United Kingdom&#34;,&#34;University of Oxford&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34;&gt;
                {{ (ctx2.parameters | values).join(&#34;, &#34;) || ctx2.parameters[&#39;refine.country&#39;] }}
            &lt;/p&gt;
            &lt;!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters
Back to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --&gt;
            &lt;div class=&#34;resetfilters&#34;&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Back to countries&lt;/a&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined&#34;&gt;Back to universities&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;&lt;/div&gt;</div>
                <style type='text/css'>
                    .filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}

                </style>
                </body>
              ">
      </iframe>
      <div class="buttons has-addons">
          
              <button id="tab-show-schema" aria-controls="panel-show-schema"
                      class="show-schema button is-light"
                      title="Show the data schema of the dataset used in this resource">
                  <span>See fields in use</span>
              </button>
          
          <button id="tab-show-code" aria-controls="panel-show-code"
                  class="show-code button is-light">
            <span>Show code</span>
          </button>
          <button class="button is-light"
             target="_blank"
             aria-role="link"
             rel="noopener"
             title="Edit on CodePen, open a new tab"
             onclick="document.getElementById('form-2-levels-drill-down').submit()">
              <span>Edit on Codepen</span>
              <span class="icon is-small">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                  <use xlink:href="#external"></use>
                </svg>
              </span>
          </button>
      </div>
    </div>
    
        <div id="panel-show-schema" aria-labelledby="tab-show-schema" aria-hidden
             class="box-schema is-hidden">
            <div class="content">
                <p><strong>Dataset in use:</strong> <code>shanghai-world-university-ranking</code> <a href="https://userclub.opendatasoft.com/explore/dataset/shanghai-world-university-ranking/table/">(See it on userclub domain)</a></p>
<p><strong>Fields in use:</strong></p>
<table>
<thead>
<tr>
<th>country</th>
<th>total_score (numeric)</th>
<th>university_name</th>
</tr>
</thead>
<tbody>
<tr>
<td>United States</td>
<td>100</td>
<td>Harvard University</td>
</tr>
<tr>
<td>United Kingdom</td>
<td>72,6</td>
<td>University of Cambridge</td>
</tr>
<tr>
<td>Germany</td>
<td>34,8</td>
<td>Heidelberg University</td>
</tr>
<tr>
<td>China</td>
<td>34,1</td>
<td>Tsinghua University</td>
</tr>
</tbody>
</table>

            </div>
        </div>
    
    <div id="panel-show-code" aria-labelledby="tab-show-code" aria-hidden
         class="box-code js-tabs is-hidden">
        <nav class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <div class="buttons has-addons js-tablist">
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-2-levels-drill-down-html-content"
                        >
                          HTML
                        </a>
                        
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-2-levels-drill-down-css-content"
                        >
                          CSS
                        </a>
                        
                    </div>
                </div>
            </div>
            <div class="level-right">
                <button class="copy-to-cc button is-primary is-outlined is-rounded has-tooltip-left"
                  data-tooltip="Copy to clipboard"
                  aria-role="button"
                  title="Edit on CodePen, open a new tab"
                >
                  <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#copy"></use>
                    </svg>
                  </span>
                </button>
                <button class="copied-to-cc button is-success is-outlined is-rounded has-tooltip-left is-hidden"
                  data-tooltip="Copied"
                  aria-role="button"
                  title="Copied"
                >
                  <figure class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#check"></use>
                    </svg>
                  </figure>
                </button>
            </div>
        </nav>
        <div class="tab-content">
            <div class="js-tabcontent"
                 id="code-2-levels-drill-down-html-content"
                 data-clipboard="&lt;ods-dataset-context context=&#34;ctx2&#34;
                     ctx2-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx2-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the &#34;!&#34; prior each expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;country&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;#2c7fb8&#34; scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and no refine on university
the context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)
refine-on-click on the field university_name that is trigerring the third ods-chart --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;university_name&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#7fcdbb&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;university_name&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Score evolution by year&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;year&#34; maxpoints=&#34;50&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#253494&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores
we want to make sure the value displayed is a string for the end user
when the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]
however when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [&#34;United Kingdom&#34;,&#34;University of Oxford&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34;&gt;
                {{ (ctx2.parameters | values).join(&#34;, &#34;) || ctx2.parameters[&#39;refine.country&#39;] }}
            &lt;/p&gt;
            &lt;!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters
Back to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --&gt;
            &lt;div class=&#34;resetfilters&#34;&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Back to countries&lt;/a&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined&#34;&gt;Back to universities&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;"
                 role="tabpanel">
                <div class="highlight">
                    <pre class="language-html" data-lang="html"><code>&lt;ods-dataset-context context=&#34;ctx2&#34;
                     ctx2-dataset=&#34;shanghai-world-university-ranking&#34;
                     ctx2-domain=&#34;userclub&#34;&gt;
    &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col-md-9&#34;&gt;
            &lt;div class=&#34;chart-box&#34;&gt;
                &lt;!-- ng-if directive to display this chart only if there is no refine on country (= no click on country column) and no refine on the university thanks to the &#34;!&#34; prior each expression
refine-on-click on the field country that is trigerring the second ods-chart  --&gt;
                &lt;div ng-if=&#34;!ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;# of rankings by country&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;country&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;COUNT&#34;
                                             color=&#34;#2c7fb8&#34; scientific-display=&#34;true&#34;
                                             label-y=&#34;# of rankings&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;country&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and no refine on university
the context is still ctx2 but some parameters are different in the ods-chart-query (x axis) and the ods-chart-serie (function-y)
refine-on-click on the field university_name that is trigerring the third ods-chart --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Best ranking by university&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;university_name&#34; maxpoints=&#34;50&#34; sort=&#34;serie1-1&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#7fcdbb&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Best score&#34;
                                             refine-on-click-context=&#34;ctx2&#34;
                                             refine-on-click-ctx2-context-field=&#34;university_name&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
                &lt;!-- ng-if directive to display this chart only if there is a refine on country and a refine on university_name  --&gt;
                &lt;div ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; ctx2.parameters[&#39;refine.university_name&#39;]&#34;&gt;
                    &lt;h3&gt;Score evolution by year&lt;/h3&gt;
                    &lt;ods-chart align-month=&#34;true&#34; labels-x-length=&#34;20&#34;&gt;
                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;year&#34; maxpoints=&#34;50&#34;&gt;
                            &lt;ods-chart-serie expression-y=&#34;total_score&#34; chart-type=&#34;column&#34; function-y=&#34;MAX&#34;
                                             color=&#34;#253494&#34;
                                             scientific-display=&#34;true&#34;
                                             label-y=&#34;Score&#34;&gt;
                            &lt;/ods-chart-serie&gt;
                        &lt;/ods-chart-query&gt;
                    &lt;/ods-chart&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- here we want to display the selected countries and universities as a reminder for the end user when he/she deeps dive into universities and scores
we want to make sure the value displayed is a string for the end user
when the country only has been refined, it is already the case for ctx2.parameters[&#39;refine.country&#39;]
however when country and university_name have been selected, the ctx2.parameters will be displayed as an array e.g. [&#34;United Kingdom&#34;,&#34;University of Oxford&#34;] and the join method will help us transform it as United Kingdom,University of Oxford --&gt;
        &lt;div class=&#34;col-md-3 filters&#34;&gt;
            &lt;p class=&#34;appliedfilter&#34;&gt;
                {{ (ctx2.parameters | values).join(&#34;, &#34;) || ctx2.parameters[&#39;refine.country&#39;] }}
            &lt;/p&gt;
            &lt;!-- defining the reset button: Back to countries is only displayed if refine on country and the click cancels the refine country in the context parameters
Back to universities is only displayed if refine on universitie_name and the click cancels the refine on university_name in the context parameters --&gt;
            &lt;div class=&#34;resetfilters&#34;&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.country&#39;] &amp;&amp; !ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.country&#39;] = undefined&#34;&gt;Back to countries&lt;/a&gt;
                &lt;a href class=&#34;resetfilter&#34;
                   ng-if=&#34;ctx2.parameters[&#39;refine.university_name&#39;]&#34;
                   ng-click=&#34;ctx2.parameters[&#39;refine.university_name&#39;] = undefined&#34;&gt;Back to universities&lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/ods-dataset-context&gt;</code></pre>
                </div>
            </div>
            
            <div class="js-tabcontent"
                 id="code-2-levels-drill-down-css-content"
                 data-clipboard=".filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}
">
                <div class="highlight">
                    <pre class="language-css" data-lang="css"><code>.filters {
    display: flex;
    flex-direction: column;
    text-align: center;
}
.appliedfilter {
    font-weight: 500;
    font-size: 1.2em;
}
.resetfilter {
    padding: 5px 10px;
    border: 1px solid;
    color: #006f96;
    background-color: white;
}
.resetfilter:hover {
    text-decoration: none;
    color: white;
    background-color: #006f96;
}
.chart-box {
    height: 450px;
}
</code></pre>
                </div>
            </div>
            
        </div>
    </div>
</div>

                </div>
            
        </article>
        
    </div>
</section>

      </div>
    </div>

    <footer class="footer">
    <a href="https://www.opendatasoft.com"
       class="footer-link"
       title="Opendatasoft website">
        <img src="/img/ods-logo.svg"
             class="footer-logo"
             alt="Opendatasoft logo"
        />
    </a>
    <span class="footer-copyright">
        &copy; Copyright 2020
    </span>
</footer>
    
    
    

    <script>
      var process = { env: { NODE_ENV: "production" } };
    </script>
    <script
      type="text/javascript"
      src="/index.min.79f95ac0c5f804431feb615d882ccd72301607008a5a6724a6bb192688fbc0ea.js"
      defer
    ></script>
  </body>
</html>
