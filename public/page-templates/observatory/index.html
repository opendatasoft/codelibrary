<!DOCTYPE html>
<html class="has-navbar-fixed-top">
  <head>
    <meta charset="utf-8" />
    <title>
       Observatory &ndash; Codelibrary 
    </title>

    
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-41201218-21"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "UA-41201218-21");
    </script>

    
    

    
    
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.0/themes/prism.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/instantsearch.css@7.3.1/themes/algolia-min.css"
      integrity="sha256-HB49n/BZjuqiCtQQf49OdZn63XuKFaxcIHWf0HNKte8="
      crossorigin="anonymous"
    />

    
    <link rel="stylesheet" type="text/css" href="/scss/main.css" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="shortcut icon" href="/favicon.ico" />
  </head>

  <body>
    <div class="is-hidden">
      <svg>
  <defs>
    <g id="link-2">
      <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
      <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
    </g>

    <g id="check">
      <polyline points="20 6 9 17 4 12"></polyline>
    </g>

    <g id="copy">
      <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
      <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
    </g>

    <g id="external">
      <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
      <polyline points="15 3 21 3 21 9"></polyline>
      <line x1="10" y1="14" x2="21" y2="3"></line>
    </g>

  </defs>
</svg>

    </div>

    <nav class="navbar is-fixed-top"
     role="navigation"
     aria-label="Main navigation">
    <div class="navbar-brand">
        <button class="navbar-burger burger"
                type="button"
                data-target="sidebarNavbar"
                aria-controls="sidebarNavbar"
                aria-expanded="false"
                aria-label="Main menu">
            Menu
        </button>
        <a class="navbar-item"
           href="/"
           title="Back to the homepage">
            <img src="/img/ods-logo-helphub.svg"
                 alt="Helphub Logo"/>
        </a>
        <button class="navbar-burger burger"
                type="button"
                data-target="helphubNavbar"
                aria-controls="helphubNavbar"
                aria-expanded="false"
                aria-label="Help Hub Menu">
            Help Hub
        </button>
    </div>
    <div class="navbar-menu"
         id="helphubNavbar">
        <div class="navbar-start">
            <a class="navbar-item"
               href="https://help.opendatasoft.com/">
                Help Hub
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/platform/en/">
                User guide
            </a>
            <a class="navbar-item is-active"
               href="https://codelibrary.opendatasoft.com">
                Code Library
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/faq-glossary/en/">
                FAQ
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/widgets/">
                Widgets
            </a>
            <a class="navbar-item"
               href="https://help.opendatasoft.com/en/apis/">
                APIs
            </a>
            <a class="navbar-item"
               href="https://academy.opendatasoft.com/page/homepage">
                Academy
            </a>
            <a class="navbar-item"
               href="https://documentation-resources.opendatasoft.com/pages/release-notes/?headless=true">
                Release Notes
            </a>
        </div>
    </div>
</nav>


    <div class="columns is-desktop codelibrary mb-0">
      <div class="column is-narrow pb-0">
        <div class="sidebar-search is-hidden-touch">
  <div class="block search-wrapper">
    <div id="algolia-box"></div>
    <div class="search-results-wrapper">
      <div id="algolia-results"></div>
    </div>
  </div>
</div>
<aside class="sidebar"
       id="sidebarNavbar">
  
  <div class="sidebar-header">
    <div class="block">
      <ul class="menu-list">
        <p class="menu-label">On this page</p>
        <li>
          <a href="#">
            Top
          </a>
        </li>
        
        <li>
          <a href="#an-observatory-dashboard-model">
            An observatory dashboard model
          </a>
        </li>
        
        <li>
          <a href="#css-grid--observatory-model">
            CSS Grid : Observatory model
          </a>
        </li>
        
      </ul>
    </div>
  </div>
  
  <div class="sidebar-body">
    
    
    <ul class="menu-list">
      <li>
        <a class="sidebar-subtitle"
          href="https://codelibrary.opendatasoft.com">
          Home
        </a>
      </li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/components/"
        class="sidebar-subtitle">
        Components
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/custom-views/"
        class="sidebar-subtitle">
        Custom views
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/generators/"
        class="sidebar-subtitle">
        Generators
        
      </a>
    </li>
    
    
      
      <li>
        <a class="sidebar-subtitle " href="/page-templates/">
          Page templates
        </a>
        <ul>
          
          <li>
            <a class="" href="/page-templates/css-grid-framework/">
              <div>
                CSS Grid Framework
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/dashboard/">
              <div>
                Dashboard
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/dashboard-layouts/">
              <div>
                Dashboard layouts
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/datastory/">
              <div>
                Data Story
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/fullscreen-map/">
              <div>
                Fullscreen map with filters
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/home-1/">
              <div>
                Home page 1
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/home-2/">
              <div>
                Home page 2
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/home-3/">
              <div>
                Home page 3
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/map-refine/">
              <div>
                Map &amp; Refine
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/monitoring-dashboard/">
              <div>
                Monitoring Dashboard
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="is-active" href="/page-templates/observatory/">
              <div>
                Observatory
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/ods-layout-over-ride/">
              <div>
                ODS Layout over-ride
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/regional-covid/">
              <div>
                Regional COVID-19 Dashboard
                
                
              </div>
            </a>
          </li>
          
          <li>
            <a class="" href="/page-templates/timeline/">
              <div>
                Timeline
                
                
              </div>
            </a>
          </li>
          
        </ul>
      </li>
      
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/portal-themes/"
        class="sidebar-subtitle">
        Portal themes
        
      </a>
    </li>
    
    
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li>
        <a href="/widget-tricks/"
        class="sidebar-subtitle">
        Widget tricks
        
        <span class="tag pill is-size-7 is-rounded is-info">1</span>
        
      </a>
    </li>
    
    
  </ul>
  <p class="menu-label">
    Tags
  </p>
  <div class="tags">
    
    <a class="tag" href="/tags/aggregation/">
      aggregation
    </a>
    
    <a class="tag" href="/tags/chart/">
      chart
    </a>
    
    <a class="tag" href="/tags/date/">
      date
    </a>
    
    <a class="tag" href="/tags/display/">
      display
    </a>
    
    <a class="tag" href="/tags/filter/">
      filter
    </a>
    
    <a class="tag" href="/tags/geo/">
      geo
    </a>
    
    <a class="tag" href="/tags/list/">
      list
    </a>
    
    <a class="tag" href="/tags/map/">
      map
    </a>
    
    <a class="tag" href="/tags/navigation/">
      navigation
    </a>
    
    <a class="tag" href="/tags/ods-aggregation/">
      ods-aggregation
    </a>
    
    <a class="tag" href="/tags/ods-analysis/">
      ods-analysis
    </a>
    
    <a class="tag" href="/tags/ods-maps/">
      ods-maps
    </a>
    
  </div>
</div>
</aside>

      </div>
      <div class="column codelibrary-content">
        
<section class="section resources">
  <div class="container is-max-widescreen">
    <h1 class="title is-1">Page Templates - Observatory</h1>
    <div class="content">
      
    </div>
    
    <article class="block">
      <h2 class="title is-2" id="an-observatory-dashboard-model">
        An observatory dashboard model 
        <a class="is-link anchor" href="#an-observatory-dashboard-model">
          <span class="icon">
            <img src="/img/fas-link.svg" />
          </span>
        </a>
      </h2>
      <div class="content">
        <p>Analytic view with KPIs, charts and filters</p>

      </div>
      
      <div class="box">
        







    




<div class="codepen">
    <form id="form-an-observatory-dashboard-model"
          action="https://codepen.io/pen/define"
          method="POST"
          target="_blank">
        <input type="hidden"
               name="data"
               value='{
                 "title": "New Pen!",
                 "head": &#34;\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css\&#34;\n/\u003e\n\n\u003c!-- ODS Platform CSS - must be hosted on static : WIP --\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://codelibrary.opendatasoft.com/css/theme.css\&#34;\n/\u003e\n\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js\&#34;\n\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n  const sourceMonitoringInterceptor = $q =\u003e {\n    return {\n      request: config =\u003e {\n        if (config.params)\n          if (config.params.source) delete config.params.source;\n\n        config.url = config.url.replace(\n          \&#34;ods-api-monitoring\&#34;,\n          \&#34;monitoring-copy\&#34;\n        );\n        return config;\n      }\n    };\n  };\n\n  angular\n    .module(\&#34;ods-widgets\&#34;)\n    .config(function(ODSWidgetsConfigProvider, $httpProvider) {\n      ODSWidgetsConfigProvider.setConfig({\n        defaultDomain: \&#34;https://userclub.opendatasoft.com/\&#34;,\n        basemaps: [\n          {\n            provider: \&#34;jawg.light\&#34;,\n            label: \&#34;Jawg Light\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;\n          },\n          {\n            provider: \&#34;jawg.streets\&#34;,\n            label: \&#34;Jawg Streets\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;,\n            id: \&#34;streets\&#34;\n          }\n        ],\n        themes: {\n          default: {\n            url: \&#34;/img/ods.svg\&#34;\n          },\n          Santé: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Culture, Patrimoine\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Éducation, Formation, Recherche, Enseignement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Environment: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Transports, Déplacements\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Économie, Business, PME, Développement économique, Emploi\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Administration, Gouvernement, Finances publiques, Citoyenneté\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Justice, Sécurité, Police, Crime\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Sport, Loisirs\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Hébergement, Restauration\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Services, Social\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Checklist: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Usages: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          }\n        },\n        mapPrependAttribution: \&#34;Jawg apikey NOT suitable for production\&#34;\n      });\n      $httpProvider.interceptors.push(sourceMonitoringInterceptor);\n    });\n\u003c/script\u003e\n&#34;,
                 "editors": 110,
                 "html": &#34;\u003cdiv ng-app=\&#34;ods-widgets\&#34;\u003e\n\u003csection class=\&#34;observatory\&#34; ng-init=\&#34;values.modalswitchstatus = false\&#34;\u003e\n    \u003cdiv class=\&#34;backdrop\&#34;\n         ng-click=\&#34;values.modalswitchstatus = !values.modalswitchstatus\&#34;\n         ng-class=\&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}\&#34;\u003e\n    \u003c/div\u003e\n\n    \u003cods-dataset-context context=\&#34;ctx1,ctx2,ctx3\&#34;\n                         ctx1-dataset=\&#34;buildingref-france-bpe-all-geolocated\&#34;\n                         ctx1-parameters=\&#34;{&#39;disjunctive.epci_name&#39;:true}\&#34;\n                         ctx1-domain=\&#34;public\&#34;\n                         ctx2-dataset=\&#34;buildingref-france-bpe-all-geolocated\&#34;\n                         ctx2-parameters=\&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}\&#34;\n                         ctx2-domain=\&#34;public\&#34;\n                         ctx3-dataset=\&#34;buildingref-france-bpe-all-geolocated\&#34;\n                         ctx3-parameters=\&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}\&#34;\n                         ctx3-domain=\&#34;public\&#34;\u003e\n\n        {{\n        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;\n        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;\n        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;\n        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;\n        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;\n        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;\n        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;\n        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;\n        \&#34;\&#34;\n        }}\n\n        \u003c!-- Analyses --\u003e\n        \u003cspan ods-aggregation=\&#34;agg\&#34;\n              ods-aggregation-context=\&#34;ctx1\&#34;\n              ods-aggregation-function=\&#34;COUNT\&#34;\u003e\n          {{ values.nbequip = agg ; &#39;&#39; }}\n        \u003c/span\u003e\n        \u003cspan ods-aggregation=\&#34;services\&#34;\n              ods-aggregation-context=\&#34;ctx2\&#34;\n              ods-aggregation-function=\&#34;COUNT\&#34;\u003e\n          {{ values.services = services ; &#39;&#39; }}\n        \u003c/span\u003e\n        \u003cspan ods-aggregation=\&#34;sante\&#34;\n              ods-aggregation-context=\&#34;ctx3\&#34;\n              ods-aggregation-function=\&#34;COUNT\&#34;\u003e\n          {{ values.sante = sante ; &#39;&#39; }}\n        \u003c/span\u003e\n\n\n        \u003c!-- THE RIGHT MODAL --\u003e\n        \u003cdiv class=\&#34;rightmodal\&#34;\u003e\n            \u003cdiv class=\&#34;cl-modal\&#34;\n                 ng-class=\&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}\&#34;\u003e\n                \u003cdiv class=\&#34;cl-modal__header\&#34;\n                     ng-click=\&#34;values.modalswitchstatus = !values.modalswitchstatus\&#34;\u003e\n                    \u003ca href=\&#34;#\&#34;\n                       class=\&#34;closebtn\&#34;\u003e\n                        Fermer \u003ci class=\&#34;fa fa-times-circle\&#34; aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                    \u003c/a\u003e\n                \u003c/div\u003e\n                \u003cdiv class=\&#34;cl-modal__content\&#34;\u003e\n                    \u003cods-facets context=\&#34;ctx1\&#34;\u003e\n                        \u003ch3\u003e\n                            Région\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;reg_name\&#34;\u003e\u003c/ods-facet\u003e\n                        \u003ch3\u003e\n                            Département\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;dep_name\&#34;\u003e\u003c/ods-facet\u003e\n                        \u003ch3\u003e\n                            Code DROM\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;com_arm_area_code\&#34;\u003e\u003c/ods-facet\u003e\n                        \u003ch3\u003e\n                            EPCI\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;epci_name\&#34;\u003e\u003c/ods-facet\u003e\n                    \u003c/ods-facets\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n\n        \u003csection class=\&#34;head\&#34;\u003e\n            \u003cdiv class=\&#34;container\&#34;\u003e\n                \u003ch1 class=\&#34;titre\&#34;\u003e\n                    Un modèle d&#39;observation des équipements en France\n                \u003c/h1\u003e\n                \u003cdiv class=\&#34;edito\&#34;\u003e\n                    \u003cp\u003eBien que .. \u003cq\u003eIl n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.\u003c/q\u003e Paul Éluard\n                    \u003c/p\u003e\n                \u003c/div\u003e\n                \u003cdiv id=\&#34;resume\&#34;\u003e\n                    \u003cp\u003e\n                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base\n                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.\n                    \u003c/p\u003e\n                    \u003cp\u003e\n                        La classification des équipements en gammes a pour objectif de réunir des équipements qui\n                        présentent\n                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes\n                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant\n                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.\n                    \u003c/p\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/section\u003e\n        \u003csection class=\&#34;filter-block\&#34;\u003e\n            \u003cdiv class=\&#34;container\&#34;\u003e\n                \u003cbutton ng-click=\&#34;values.modalswitchstatus = !values.modalswitchstatus\&#34;\u003e\n                    \u003csvg xmlns=\&#34;http://www.w3.org/2000/svg\&#34; width=\&#34;24\&#34; height=\&#34;24\&#34; viewBox=\&#34;0 0 24 24\&#34; fill=\&#34;none\&#34;\n                         stroke=\&#34;currentColor\&#34; stroke-width=\&#34;2\&#34; stroke-linecap=\&#34;round\&#34; stroke-linejoin=\&#34;round\&#34;\n                         class=\&#34;feather feather-filter\&#34;\u003e\n                        \u003cpolygon points=\&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\&#34;\u003e\u003c/polygon\u003e\n                    \u003c/svg\u003e\n                    Filtrer les données\n                \u003c/button\u003e\n                \u003cods-filter-summary context=\&#34;ctx1\&#34;\u003e\n                    {{ refinements }}\n                \u003c/ods-filter-summary\u003e\n            \u003c/div\u003e\n        \u003c/section\u003e\n\n        \u003csection\u003e\n            \u003cdiv class=\&#34;container\&#34;\u003e\n                \u003cdiv class=\&#34;row\&#34;\u003e\n                    \u003cdiv class=\&#34;col-md-6\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Nombre d&#39;équipements en 2019\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        Données INSEE issu de la BPE (Base permanente des équipements)\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle centered\&#34;\u003e\n                                    \u003cp class=\&#34;value\&#34;\u003e\n                                        {{ values.nbequip | number }}\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;col-md-6\&#34;\n                         ng-if=\&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Top 5 Région\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        Nombre d&#39;équipements des 5 régions les mieux équipées\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                    \u003cods-chart style=\&#34;height: 170px\&#34; class=\&#34;small-chart\&#34; single-y-axis=\&#34;true\&#34;\n                                               scientific-display=\&#34;true\&#34;\n                                               display-legend=\&#34;false\&#34;\n                                               labels-x-length=\&#34;20\&#34; align-month=\&#34;false\&#34;\u003e\n                                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;reg_name\&#34; maxpoints=\&#34;5\&#34;\n                                                         sort=\&#34;serie1-1\&#34;\u003e\n                                            \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#000000\&#34;\n                                                             scientific-display=\&#34;true\&#34;\u003e\n                                            \u003c/ods-chart-serie\u003e\n                                        \u003c/ods-chart-query\u003e\n                                    \u003c/ods-chart\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;col-md-6\&#34;\n                         ng-if=\&#34;ctx1.parameters[&#39;refine.reg_name&#39;]\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Top 5 Département\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        Nombre d&#39;équipements des 5 départements les mieux équipées\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                    \u003cods-chart style=\&#34;height: 170px\&#34; class=\&#34;small-chart\&#34; single-y-axis=\&#34;true\&#34;\n                                               scientific-display=\&#34;true\&#34;\n                                               display-legend=\&#34;false\&#34;\n                                               labels-x-length=\&#34;20\&#34; align-month=\&#34;false\&#34;\u003e\n                                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;dep_name\&#34; maxpoints=\&#34;5\&#34;\n                                                         sort=\&#34;serie1-1\&#34;\u003e\n                                            \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#000000\&#34;\n                                                             scientific-display=\&#34;true\&#34;\u003e\n                                            \u003c/ods-chart-serie\u003e\n                                        \u003c/ods-chart-query\u003e\n                                    \u003c/ods-chart\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;col-md-12\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Répartis en grandes catégories\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        La Base Permanente des Équipements est réparti en 7 grands domaines :\n                                        services\n                                        aux\n                                        particuliers ; commerces ; enseignement ; santé ; transports et\n                                        déplacements ;\n                                        sports, loisirs et culture ; tourisme.\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                    \u003cods-chart class=\&#34;medium-chart\&#34; labels-x-length=\&#34;30\&#34; align-month=\&#34;true\&#34;\u003e\n                                        \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;category\&#34; maxpoints=\&#34;0\&#34;\n                                                         sort=\&#34;serie1-1\&#34;\n                                                         category-colors=\&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}\&#34;\u003e\n                                            \u003cods-chart-serie chart-type=\&#34;treemap\&#34; function-y=\&#34;COUNT\&#34;\n                                                             color=\&#34;range-PiYG\&#34;\n                                                             scientific-display=\&#34;false\&#34;\u003e\n                                            \u003c/ods-chart-serie\u003e\n                                        \u003c/ods-chart-query\u003e\n                                    \u003c/ods-chart\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n\n                \u003ch2\u003e\n                    Observons ses deux principales catégories\n                \u003c/h2\u003e\n\n                \u003cdiv class=\&#34;row\&#34;\u003e\n                    \u003cdiv class=\&#34;col-md-6 order-md-1\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat colored services\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Les Services aux particuliers\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        qui représentent\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle centered\&#34;\u003e\n                                    \u003cp class=\&#34;value\&#34;\u003e\n                                        {{ (values.services / values.nbequip * 100) | number : 1 }} %\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;col-md-6 order-md-3\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat colored services\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Principaux équipement de services aux particuliers\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        Description du TOP 20 de cette catégorie\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                    \u003cods-chart class=\&#34;medium-chart\&#34; labels-x-length=\&#34;40\&#34; align-month=\&#34;true\&#34;\u003e\n                                        \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;equipment_name\&#34; maxpoints=\&#34;20\&#34;\n                                                         sort=\&#34;serie1-1\&#34;\u003e\n                                            \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#ff714d\&#34;\n                                                             scientific-display=\&#34;true\&#34;\n                                                             label-y=\&#34;Nb. équipements\&#34;\u003e\n                                            \u003c/ods-chart-serie\u003e\n                                        \u003c/ods-chart-query\u003e\n                                    \u003c/ods-chart\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;col-md-6 order-md-2\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat colored sante\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        et la Santé\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        qui représente\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle centered\&#34;\u003e\n                                    \u003cp class=\&#34;value\&#34;\u003e\n                                        {{ (values.sante / values.nbequip * 100) | number : 1 }} %\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;col-md-6 order-md-4\&#34;\u003e\n                        \u003cdiv class=\&#34;box white flat colored sante\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                    \u003ch3 class=\&#34;title\&#34;\u003e\n                                        Principaux équipements de Santé\n                                    \u003c/h3\u003e\n                                    \u003cp class=\&#34;description\&#34;\u003e\n                                        Description du TOP 20 de cette catégorie\n                                    \u003c/p\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                    \u003cods-chart class=\&#34;medium-chart\&#34; labels-x-length=\&#34;40\&#34; align-month=\&#34;true\&#34;\u003e\n                                        \u003cods-chart-query context=\&#34;ctx3\&#34; field-x=\&#34;equipment_name\&#34; maxpoints=\&#34;20\&#34;\n                                                         sort=\&#34;serie1-1\&#34;\u003e\n                                            \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#25c9ff\&#34;\n                                                             scientific-display=\&#34;true\&#34;\n                                                             label-y=\&#34;Nb. équipements\&#34;\u003e\n                                            \u003c/ods-chart-serie\u003e\n                                        \u003c/ods-chart-query\u003e\n                                    \u003c/ods-chart\u003e\n                                \u003c/div\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                    \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                        \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                        \u003ca class=\&#34;source\&#34;\n                                           href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                           title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                                class=\&#34;fa fa-long-arrow-right\&#34;\n                                                aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                        \u003c/a\u003e\n                                    \u003c/div\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/section\u003e\n    \u003c/ods-dataset-context\u003e\n\u003c/section\u003e\u003c/div\u003e&#34;,
                 "css": &#34;:root {\n    --boxes-radius: 6px;\n}\n\nmain {\n    margin: 0;\n}\n\n/* ALL PAGE CONTAINER */\n.observatory {\n    background-color: var(--page-background);\n    /* prerequisite for full height modal bar */\n    position: relative;\n}\n\n/* Section 1 : heading */\nsection.head {\n    background-color: white;\n    padding: 26px 0;\n}\n\n.filter-block {\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    box-shadow: 0px 15px 10px -15px #2b2b2b;\n    margin-bottom: 35px;\n    background-color: black;\n}\n\n.filter-block .container {\n    display: flex;\n    align-items: center;\n    padding: 18px 0;\n}\n\n.filter-block button {\n    padding: 0 13px;\n    margin: 0 10px;\n    border-radius: 100000px;\n    display: flex;\n    align-items: center;\n    background-color: white;\n    color: black;\n    border: 1px solid black;\n    height: 36px;\n    min-width: max-content;\n}\n\n.filter-block button:hover {\n    filter: invert();\n}\n\n.filter-block button svg {\n    margin-right: 6px;\n}\n\n.titre {\n    font-size: 37px;\n    margin: 26px 0 6px;\n}\n\n.edito {\n    margin: 0;\n    font-size: 19px;\n}\n\n.edito q {\n    font-style: italic;\n}\n\n#resume {\n    font-size: 1.1em;\n    line-height: 1.8em;\n    margin-top: 26px;\n}\n\n@media screen and (min-width: 640px) {\n    #resume {\n        margin-right: 33%;\n    }\n}\n\n/* BACKDROP (black screen when modal active) */\n.backdrop {\n    visibility: hidden;\n    opacity: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 900;\n    background-color: #000;\n    cursor: default;\n    -webkit-transition: visibility 0.5s, opacity 0.5s;\n    transition: visibility 0.5s, opacity 0.5s;\n}\n\n.backdrop-active {\n    visibility: visible;\n    opacity: 0.6;\n    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */\n}\n\n/* MODAL */\n/* The modal is composed of 2 parts:\nthe leftside, that is the banner that is always visible, and contains an icon on top to click and actiavte the modal\nthe right side, that contains filters, searchbar, charts etc... that is not visible, activated on demand\nthe modal default size (width) is 57px, it correspond to the leftside width */\n.cl-modal {\n    display: flex;\n    flex-direction: column;\n    position: fixed;\n    top: 0;\n    right: -400px;\n    bottom: 0;\n    width: 400px;\n    background-color: white;\n    z-index: 1000;\n    overflow: hidden;\n    /* Disable horizontal scroll */\n    transition: ease-in 0.3s;\n}\n\n.cl-modal-active {\n    right: 0;\n}\n\n/* specific because charts are loaded inside */\n.cl-modal__content {\n    width: 400px;\n}\n\n@media (max-width: 420px) {\n    .cl-modal-active {\n        width: 100%;\n    }\n\n    .cl-modal__content {\n        width: 100vw;\n    }\n}\n\n.cl-modal__header {\n    min-height: 35px;\n    background-color: white;\n    padding: 0 10px;\n    display: flex;\n    align-items: center;\n    justify-content: start;\n    opacity: 0;\n    transition: opacity 0s;\n}\n\n.cl-modal__header .closebtn {\n    padding: 0 13px;\n    color: black;\n}\n\n.cl-modal-active .cl-modal__header {\n    opacity: 1;\n    transition-delay: 0.3s;\n}\n\n/* CONTENT OF THE MODAL */\n/* HEADER / UPPER PART */\n.cl-modal__header {\n    border-bottom: 1px solid lightgrey;\n}\n\n/* THEN THE MIDDLE / CONTENT */\n.cl-modal__content {\n    height: 100%;\n    overflow-y: auto;\n    padding: 25px;\n    opacity: 0;\n    transition: opacity 0s;\n}\n\n/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal\nie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content\nthis trick is very important to avoid the browser the resize all the content during the modal opening */\n.cl-modal-active .cl-modal__content {\n    opacity: 1;\n    transition-delay: 0.3s;\n}\n\n/** FILTER SUMMARY */\nul.odswidget.odswidget-filter-summary {\n    font-size: 1em;\n    margin-left: 13px;\n    position: relative;\n}\n\n@media (min-width: 420px) {\n    ul.odswidget.odswidget-filter-summary {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n    }\n}\n\nli.odswidget-filter-summary__active-filter,\nli.odswidget-filter-summary__clear-all {\n    border-radius: 3px;\n    margin: 2px 4px;\n    padding: 0;\n}\n\nli.odswidget-filter-summary__active-filter {\n    color: white;\n}\n\n.odswidget-filter-summary__active-filter-label {\n    color: black;\n    font-size: 1rem;\n}\n\na.odswidget-filter-summary__active-filter-link,\na.odswidget-clear-all-filters {\n    border-left: none;\n    margin: 0;\n    padding: 2px 4px 2px 2px;\n    display: flex;\n    align-items: center;\n}\n\na.odswidget-clear-all-filters {\n    align-items: center;\n    color: white;\n    opacity: 0.8;\n}\n\na.odswidget-clear-all-filters:hover {\n    color: white;\n    opacity: 1;\n}\n\na.odswidget-clear-all-filters i {\n    margin-right: 3px;\n}\n\n.box {\n    position: relative;\n    padding: 13px;\n}\n\n.box.colored {\n    padding-top: calc(13px &#43; 9px);\n}\n\n.box.colored:before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 9px;\n    content: \&#34;\&#34;;\n    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;\n}\n\n.box.colored.services:before {\n    background-color: #ff714d;\n}\n\n.box.colored.sante:before {\n    background-color: #25c9ff;\n}\n\n.box.white {\n    background-color: white;\n}\n\n.box.flat {\n    border: 1px solid #dfdfdf;\n    border-radius: var(--boxes-radius);\n}\n\n.advanced-kpi {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n\n.advanced-kpi--top .title {\n    font-size: 1.2em;\n    margin: 0 auto 6px;\n}\n\n.advanced-kpi--top .description {\n    margin: 0 auto;\n    color: #565656;\n    font-size: 1em;\n    font-weight: 400;\n}\n\n.advanced-kpi--middle {\n    display: flex;\n    flex-direction: column;\n    margin: 20px 0;\n}\n\n.advanced-kpi--middle.centered {\n    align-items: center;\n}\n\n.advanced-kpi--middle \u003e * {\n    margin: 5px 0;\n}\n\n.advanced-kpi--middle .value {\n    color: var(--highlight);\n    font-weight: 600;\n    font-size: 3rem;\n}\n\n.advanced-kpi--bottom {\n    font-size: 0.8em;\n}\n\n.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {\n    display: flex;\n    justify-content: space-between;\n}\n\n.advanced-kpi--bottom .source {\n    text-decoration: underline;\n    color: var(--links);\n}\n\n.advanced-kpi--bottom .source i {\n    margin-left: 6px;\n}\n\n.advanced-kpi--bottom .source:hover {\n    opacity: 0.65;\n}\n\n.advanced-kpi--bottom .source:hover i {\n    animation: bounce 0.7s ease infinite;\n}\n\n@keyframes bounce {\n    from {\n        margin-left: 6px;\n        margin-right: 0;\n    }\n    50% {\n        margin-left: 2px;\n        margin-right: 4px;\n    }\n    to {\n        margin-left: 6px;\n        margin-right: 0;\n    }\n}\n\n/* CHARTS */\n.ods-chart {\n    min-height: inherit;\n}\n\n.medium-chart {\n    height: 350px;\n}\n\n.small-chart {\n    height: 130px;\n}\n\n.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {\n    font-family: Gotham-book, Arial, sans-serif !important;\n}\n\n.ods-highcharts__tooltip {\n    align-items: center;\n}\n\n/**\n * License: MIT License\n * Generated on 25 Jun 2021\n * Author: Labs from opendatasoft\n * Version: 0.3\n * Description: ODS Layout over-ride to Flexbox system\n */\n\n.box,.row.full-height{height:100%}.row{display:flex;flex-wrap:wrap}.row\u003e*{margin-bottom:20px}.order-0{order:0}@media screen and (min-width:750px){.order-sm-0{order:0}}@media screen and (min-width:970px){.order-md-0{order:0}}@media screen and (min-width:1170px){.order-lg-0{order:0}.order-lg-1{order:1}}.order-1{order:1}@media screen and (min-width:750px){.order-sm-1{order:1}}@media screen and (min-width:970px){.order-md-1{order:1}.order-md-2{order:2}}.order-2{order:2}@media screen and (min-width:750px){.order-sm-2{order:2}}@media screen and (min-width:1170px){.order-lg-2{order:2}.order-lg-3{order:3}}.order-3{order:3}@media screen and (min-width:750px){.order-sm-3{order:3}}@media screen and (min-width:970px){.order-md-3{order:3}.order-md-4{order:4}}.order-4{order:4}@media screen and (min-width:750px){.order-sm-4{order:4}}@media screen and (min-width:1170px){.order-lg-4{order:4}.order-lg-5{order:5}}.order-5{order:5}@media screen and (min-width:750px){.order-sm-5{order:5}}@media screen and (min-width:970px){.order-md-5{order:5}.order-md-6{order:6}}.order-6{order:6}@media screen and (min-width:750px){.order-sm-6{order:6}}@media screen and (min-width:1170px){.order-lg-6{order:6}.order-lg-7{order:7}}.order-7{order:7}@media screen and (min-width:750px){.order-sm-7{order:7}}@media screen and (min-width:970px){.order-md-7{order:7}.order-md-8{order:8}}.order-8{order:8}@media screen and (min-width:750px){.order-sm-8{order:8}}@media screen and (min-width:1170px){.order-lg-8{order:8}.order-lg-9{order:9}}.order-9{order:9}@media screen and (min-width:750px){.order-sm-9{order:9}}@media screen and (min-width:970px){.order-md-9{order:9}.order-md-10{order:10}}.order-10{order:10}@media screen and (min-width:750px){.order-sm-10{order:10}}@media screen and (min-width:1170px){.order-lg-10{order:10}.order-lg-11{order:11}}.order-11{order:11}@media screen and (min-width:750px){.order-sm-11{order:11}}@media screen and (min-width:970px){.order-md-11{order:11}.order-md-12{order:12}}.order-12{order:12}@media screen and (min-width:750px){.order-sm-12{order:12}}@media screen and (min-width:1170px){.order-lg-12{order:12}}@media screen and (max-width:1169px){:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-1,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-10,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-11,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-12,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-2,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-3,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-4,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-5,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-6,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-7,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-8,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-9{width:100%}}@media screen and (max-width:969px){:not([class*=col-sm]):not([class*=col-xs]).col-md-1,:not([class*=col-sm]):not([class*=col-xs]).col-md-10,:not([class*=col-sm]):not([class*=col-xs]).col-md-11,:not([class*=col-sm]):not([class*=col-xs]).col-md-12,:not([class*=col-sm]):not([class*=col-xs]).col-md-2,:not([class*=col-sm]):not([class*=col-xs]).col-md-3,:not([class*=col-sm]):not([class*=col-xs]).col-md-4,:not([class*=col-sm]):not([class*=col-xs]).col-md-5,:not([class*=col-sm]):not([class*=col-xs]).col-md-6,:not([class*=col-sm]):not([class*=col-xs]).col-md-7,:not([class*=col-sm]):not([class*=col-xs]).col-md-8,:not([class*=col-sm]):not([class*=col-xs]).col-md-9{width:100%}}@media screen and (max-width:749px){.row{flex-direction:column}:not([class*=col-xs]).col-sm-1,:not([class*=col-xs]).col-sm-10,:not([class*=col-xs]).col-sm-11,:not([class*=col-xs]).col-sm-12,:not([class*=col-xs]).col-sm-2,:not([class*=col-xs]).col-sm-3,:not([class*=col-xs]).col-sm-4,:not([class*=col-xs]).col-sm-5,:not([class*=col-xs]).col-sm-6,:not([class*=col-xs]).col-sm-7,:not([class*=col-xs]).col-sm-8,:not([class*=col-xs]).col-sm-9{width:100%}}.no-margin-bottom,.no-mb{margin-bottom:0!important}.no-margin-x,.no-mx{margin-left:0!important;margin-right:0!important}\n&#34;
               }'>
    </form>
</div>
<div class="ods-content">
    <div class="box-live-example"
      style="height: 800px;">
      <iframe id="iframe-an-observatory-dashboard-model"
              width="100%" height="100%"
              src="about:blank"
              srcdoc="
                <head>&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css&#34;
/&gt;

&lt;!-- ODS Platform CSS - must be hosted on static : WIP --&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://codelibrary.opendatasoft.com/css/theme.css&#34;
/&gt;

&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js&#34;&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js&#34;
&gt;&lt;/script&gt;

&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js&#34;
&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js&#34;
&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
  const sourceMonitoringInterceptor = $q =&gt; {
    return {
      request: config =&gt; {
        if (config.params)
          if (config.params.source) delete config.params.source;

        config.url = config.url.replace(
          &#34;ods-api-monitoring&#34;,
          &#34;monitoring-copy&#34;
        );
        return config;
      }
    };
  };

  angular
    .module(&#34;ods-widgets&#34;)
    .config(function(ODSWidgetsConfigProvider, $httpProvider) {
      ODSWidgetsConfigProvider.setConfig({
        defaultDomain: &#34;https://userclub.opendatasoft.com/&#34;,
        basemaps: [
          {
            provider: &#34;jawg.light&#34;,
            label: &#34;Jawg Light&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;
          },
          {
            provider: &#34;jawg.streets&#34;,
            label: &#34;Jawg Streets&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;,
            id: &#34;streets&#34;
          }
        ],
        themes: {
          default: {
            url: &#34;/img/ods.svg&#34;
          },
          Santé: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Culture, Patrimoine&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Éducation, Formation, Recherche, Enseignement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Environment: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Transports, Déplacements&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Économie, Business, PME, Développement économique, Emploi&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Administration, Gouvernement, Finances publiques, Citoyenneté&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Justice, Sécurité, Police, Crime&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Sport, Loisirs&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Hébergement, Restauration&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Services, Social&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Checklist: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Usages: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#34;,
            color: &#34;#1446A0&#34;
          }
        },
        mapPrependAttribution: &#34;Jawg apikey NOT suitable for production&#34;
      });
      $httpProvider.interceptors.push(sourceMonitoringInterceptor);
    });
&lt;/script&gt;
</head>
                <base href='https://userclub.opendatasoft.com/'>
                <body>
                <div ng-app='ods-widgets'>&lt;div ng-app=&#34;ods-widgets&#34;&gt;
&lt;section class=&#34;observatory&#34; ng-init=&#34;values.modalswitchstatus = false&#34;&gt;
    &lt;div class=&#34;backdrop&#34;
         ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;
         ng-class=&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}&#34;&gt;
    &lt;/div&gt;

    &lt;ods-dataset-context context=&#34;ctx1,ctx2,ctx3&#34;
                         ctx1-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx1-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true}&#34;
                         ctx1-domain=&#34;public&#34;
                         ctx2-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx2-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}&#34;
                         ctx2-domain=&#34;public&#34;
                         ctx3-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx3-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}&#34;
                         ctx3-domain=&#34;public&#34;&gt;

        {{
        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        &#34;&#34;
        }}

        &lt;!-- Analyses --&gt;
        &lt;span ods-aggregation=&#34;agg&#34;
              ods-aggregation-context=&#34;ctx1&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.nbequip = agg ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;services&#34;
              ods-aggregation-context=&#34;ctx2&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.services = services ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;sante&#34;
              ods-aggregation-context=&#34;ctx3&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.sante = sante ; &#39;&#39; }}
        &lt;/span&gt;


        &lt;!-- THE RIGHT MODAL --&gt;
        &lt;div class=&#34;rightmodal&#34;&gt;
            &lt;div class=&#34;cl-modal&#34;
                 ng-class=&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}&#34;&gt;
                &lt;div class=&#34;cl-modal__header&#34;
                     ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;a href=&#34;#&#34;
                       class=&#34;closebtn&#34;&gt;
                        Fermer &lt;i class=&#34;fa fa-times-circle&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&#34;cl-modal__content&#34;&gt;
                    &lt;ods-facets context=&#34;ctx1&#34;&gt;
                        &lt;h3&gt;
                            Région
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;reg_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Département
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;dep_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Code DROM
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;com_arm_area_code&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            EPCI
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;epci_name&#34;&gt;&lt;/ods-facet&gt;
                    &lt;/ods-facets&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;section class=&#34;head&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;h1 class=&#34;titre&#34;&gt;
                    Un modèle d&#39;observation des équipements en France
                &lt;/h1&gt;
                &lt;div class=&#34;edito&#34;&gt;
                    &lt;p&gt;Bien que .. &lt;q&gt;Il n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.&lt;/q&gt; Paul Éluard
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div id=&#34;resume&#34;&gt;
                    &lt;p&gt;
                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base
                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.
                    &lt;/p&gt;
                    &lt;p&gt;
                        La classification des équipements en gammes a pour objectif de réunir des équipements qui
                        présentent
                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes
                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant
                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
        &lt;section class=&#34;filter-block&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;button ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;24&#34; height=&#34;24&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34;
                         stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;
                         class=&#34;feather feather-filter&#34;&gt;
                        &lt;polygon points=&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3&#34;&gt;&lt;/polygon&gt;
                    &lt;/svg&gt;
                    Filtrer les données
                &lt;/button&gt;
                &lt;ods-filter-summary context=&#34;ctx1&#34;&gt;
                    {{ refinements }}
                &lt;/ods-filter-summary&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;section&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;div class=&#34;row&#34;&gt;
                    &lt;div class=&#34;col-md-6&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Nombre d&#39;équipements en 2019
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Données INSEE issu de la BPE (Base permanente des équipements)
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ values.nbequip | number }}
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6&#34;
                         ng-if=&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Top 5 Région
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Nombre d&#39;équipements des 5 régions les mieux équipées
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                               scientific-display=&#34;true&#34;
                                               display-legend=&#34;false&#34;
                                               labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;reg_name&#34; maxpoints=&#34;5&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                             scientific-display=&#34;true&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6&#34;
                         ng-if=&#34;ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Top 5 Département
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Nombre d&#39;équipements des 5 départements les mieux équipées
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                               scientific-display=&#34;true&#34;
                                               display-legend=&#34;false&#34;
                                               labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;dep_name&#34; maxpoints=&#34;5&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                             scientific-display=&#34;true&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-12&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Répartis en grandes catégories
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        La Base Permanente des Équipements est réparti en 7 grands domaines :
                                        services
                                        aux
                                        particuliers ; commerces ; enseignement ; santé ; transports et
                                        déplacements ;
                                        sports, loisirs et culture ; tourisme.
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;30&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;category&#34; maxpoints=&#34;0&#34;
                                                         sort=&#34;serie1-1&#34;
                                                         category-colors=&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;treemap&#34; function-y=&#34;COUNT&#34;
                                                             color=&#34;range-PiYG&#34;
                                                             scientific-display=&#34;false&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

                &lt;h2&gt;
                    Observons ses deux principales catégories
                &lt;/h2&gt;

                &lt;div class=&#34;row&#34;&gt;
                    &lt;div class=&#34;col-md-6 order-md-1&#34;&gt;
                        &lt;div class=&#34;box white flat colored services&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Les Services aux particuliers
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        qui représentent
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ (values.services / values.nbequip * 100) | number : 1 }} %
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-3&#34;&gt;
                        &lt;div class=&#34;box white flat colored services&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Principaux équipement de services aux particuliers
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Description du TOP 20 de cette catégorie
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#ff714d&#34;
                                                             scientific-display=&#34;true&#34;
                                                             label-y=&#34;Nb. équipements&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-2&#34;&gt;
                        &lt;div class=&#34;box white flat colored sante&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        et la Santé
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        qui représente
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ (values.sante / values.nbequip * 100) | number : 1 }} %
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-4&#34;&gt;
                        &lt;div class=&#34;box white flat colored sante&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Principaux équipements de Santé
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Description du TOP 20 de cette catégorie
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx3&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#25c9ff&#34;
                                                             scientific-display=&#34;true&#34;
                                                             label-y=&#34;Nb. équipements&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/ods-dataset-context&gt;
&lt;/section&gt;&lt;/div&gt;</div>
                <style type='text/css'>
                    :root {
    --boxes-radius: 6px;
}

main {
    margin: 0;
}

/* ALL PAGE CONTAINER */
.observatory {
    background-color: var(--page-background);
    /* prerequisite for full height modal bar */
    position: relative;
}

/* Section 1 : heading */
section.head {
    background-color: white;
    padding: 26px 0;
}

.filter-block {
    position: sticky;
    top: 0;
    z-index: 1;
    box-shadow: 0px 15px 10px -15px #2b2b2b;
    margin-bottom: 35px;
    background-color: black;
}

.filter-block .container {
    display: flex;
    align-items: center;
    padding: 18px 0;
}

.filter-block button {
    padding: 0 13px;
    margin: 0 10px;
    border-radius: 100000px;
    display: flex;
    align-items: center;
    background-color: white;
    color: black;
    border: 1px solid black;
    height: 36px;
    min-width: max-content;
}

.filter-block button:hover {
    filter: invert();
}

.filter-block button svg {
    margin-right: 6px;
}

.titre {
    font-size: 37px;
    margin: 26px 0 6px;
}

.edito {
    margin: 0;
    font-size: 19px;
}

.edito q {
    font-style: italic;
}

#resume {
    font-size: 1.1em;
    line-height: 1.8em;
    margin-top: 26px;
}

@media screen and (min-width: 640px) {
    #resume {
        margin-right: 33%;
    }
}

/* BACKDROP (black screen when modal active) */
.backdrop {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 900;
    background-color: #000;
    cursor: default;
    -webkit-transition: visibility 0.5s, opacity 0.5s;
    transition: visibility 0.5s, opacity 0.5s;
}

.backdrop-active {
    visibility: visible;
    opacity: 0.6;
    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */
}

/* MODAL */
/* The modal is composed of 2 parts:
the leftside, that is the banner that is always visible, and contains an icon on top to click and actiavte the modal
the right side, that contains filters, searchbar, charts etc... that is not visible, activated on demand
the modal default size (width) is 57px, it correspond to the leftside width */
.cl-modal {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -400px;
    bottom: 0;
    width: 400px;
    background-color: white;
    z-index: 1000;
    overflow: hidden;
    /* Disable horizontal scroll */
    transition: ease-in 0.3s;
}

.cl-modal-active {
    right: 0;
}

/* specific because charts are loaded inside */
.cl-modal__content {
    width: 400px;
}

@media (max-width: 420px) {
    .cl-modal-active {
        width: 100%;
    }

    .cl-modal__content {
        width: 100vw;
    }
}

.cl-modal__header {
    min-height: 35px;
    background-color: white;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: start;
    opacity: 0;
    transition: opacity 0s;
}

.cl-modal__header .closebtn {
    padding: 0 13px;
    color: black;
}

.cl-modal-active .cl-modal__header {
    opacity: 1;
    transition-delay: 0.3s;
}

/* CONTENT OF THE MODAL */
/* HEADER / UPPER PART */
.cl-modal__header {
    border-bottom: 1px solid lightgrey;
}

/* THEN THE MIDDLE / CONTENT */
.cl-modal__content {
    height: 100%;
    overflow-y: auto;
    padding: 25px;
    opacity: 0;
    transition: opacity 0s;
}

/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal
ie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content
this trick is very important to avoid the browser the resize all the content during the modal opening */
.cl-modal-active .cl-modal__content {
    opacity: 1;
    transition-delay: 0.3s;
}

/** FILTER SUMMARY */
ul.odswidget.odswidget-filter-summary {
    font-size: 1em;
    margin-left: 13px;
    position: relative;
}

@media (min-width: 420px) {
    ul.odswidget.odswidget-filter-summary {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
}

li.odswidget-filter-summary__active-filter,
li.odswidget-filter-summary__clear-all {
    border-radius: 3px;
    margin: 2px 4px;
    padding: 0;
}

li.odswidget-filter-summary__active-filter {
    color: white;
}

.odswidget-filter-summary__active-filter-label {
    color: black;
    font-size: 1rem;
}

a.odswidget-filter-summary__active-filter-link,
a.odswidget-clear-all-filters {
    border-left: none;
    margin: 0;
    padding: 2px 4px 2px 2px;
    display: flex;
    align-items: center;
}

a.odswidget-clear-all-filters {
    align-items: center;
    color: white;
    opacity: 0.8;
}

a.odswidget-clear-all-filters:hover {
    color: white;
    opacity: 1;
}

a.odswidget-clear-all-filters i {
    margin-right: 3px;
}

.box {
    position: relative;
    padding: 13px;
}

.box.colored {
    padding-top: calc(13px &#43; 9px);
}

.box.colored:before {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 9px;
    content: &#34;&#34;;
    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;
}

.box.colored.services:before {
    background-color: #ff714d;
}

.box.colored.sante:before {
    background-color: #25c9ff;
}

.box.white {
    background-color: white;
}

.box.flat {
    border: 1px solid #dfdfdf;
    border-radius: var(--boxes-radius);
}

.advanced-kpi {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.advanced-kpi--top .title {
    font-size: 1.2em;
    margin: 0 auto 6px;
}

.advanced-kpi--top .description {
    margin: 0 auto;
    color: #565656;
    font-size: 1em;
    font-weight: 400;
}

.advanced-kpi--middle {
    display: flex;
    flex-direction: column;
    margin: 20px 0;
}

.advanced-kpi--middle.centered {
    align-items: center;
}

.advanced-kpi--middle &gt; * {
    margin: 5px 0;
}

.advanced-kpi--middle .value {
    color: var(--highlight);
    font-weight: 600;
    font-size: 3rem;
}

.advanced-kpi--bottom {
    font-size: 0.8em;
}

.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {
    display: flex;
    justify-content: space-between;
}

.advanced-kpi--bottom .source {
    text-decoration: underline;
    color: var(--links);
}

.advanced-kpi--bottom .source i {
    margin-left: 6px;
}

.advanced-kpi--bottom .source:hover {
    opacity: 0.65;
}

.advanced-kpi--bottom .source:hover i {
    animation: bounce 0.7s ease infinite;
}

@keyframes bounce {
    from {
        margin-left: 6px;
        margin-right: 0;
    }
    50% {
        margin-left: 2px;
        margin-right: 4px;
    }
    to {
        margin-left: 6px;
        margin-right: 0;
    }
}

/* CHARTS */
.ods-chart {
    min-height: inherit;
}

.medium-chart {
    height: 350px;
}

.small-chart {
    height: 130px;
}

.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {
    font-family: Gotham-book, Arial, sans-serif !important;
}

.ods-highcharts__tooltip {
    align-items: center;
}

/**
 * License: MIT License
 * Generated on 25 Jun 2021
 * Author: Labs from opendatasoft
 * Version: 0.3
 * Description: ODS Layout over-ride to Flexbox system
 */

.box,.row.full-height{height:100%}.row{display:flex;flex-wrap:wrap}.row&gt;*{margin-bottom:20px}.order-0{order:0}@media screen and (min-width:750px){.order-sm-0{order:0}}@media screen and (min-width:970px){.order-md-0{order:0}}@media screen and (min-width:1170px){.order-lg-0{order:0}.order-lg-1{order:1}}.order-1{order:1}@media screen and (min-width:750px){.order-sm-1{order:1}}@media screen and (min-width:970px){.order-md-1{order:1}.order-md-2{order:2}}.order-2{order:2}@media screen and (min-width:750px){.order-sm-2{order:2}}@media screen and (min-width:1170px){.order-lg-2{order:2}.order-lg-3{order:3}}.order-3{order:3}@media screen and (min-width:750px){.order-sm-3{order:3}}@media screen and (min-width:970px){.order-md-3{order:3}.order-md-4{order:4}}.order-4{order:4}@media screen and (min-width:750px){.order-sm-4{order:4}}@media screen and (min-width:1170px){.order-lg-4{order:4}.order-lg-5{order:5}}.order-5{order:5}@media screen and (min-width:750px){.order-sm-5{order:5}}@media screen and (min-width:970px){.order-md-5{order:5}.order-md-6{order:6}}.order-6{order:6}@media screen and (min-width:750px){.order-sm-6{order:6}}@media screen and (min-width:1170px){.order-lg-6{order:6}.order-lg-7{order:7}}.order-7{order:7}@media screen and (min-width:750px){.order-sm-7{order:7}}@media screen and (min-width:970px){.order-md-7{order:7}.order-md-8{order:8}}.order-8{order:8}@media screen and (min-width:750px){.order-sm-8{order:8}}@media screen and (min-width:1170px){.order-lg-8{order:8}.order-lg-9{order:9}}.order-9{order:9}@media screen and (min-width:750px){.order-sm-9{order:9}}@media screen and (min-width:970px){.order-md-9{order:9}.order-md-10{order:10}}.order-10{order:10}@media screen and (min-width:750px){.order-sm-10{order:10}}@media screen and (min-width:1170px){.order-lg-10{order:10}.order-lg-11{order:11}}.order-11{order:11}@media screen and (min-width:750px){.order-sm-11{order:11}}@media screen and (min-width:970px){.order-md-11{order:11}.order-md-12{order:12}}.order-12{order:12}@media screen and (min-width:750px){.order-sm-12{order:12}}@media screen and (min-width:1170px){.order-lg-12{order:12}}@media screen and (max-width:1169px){:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-1,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-10,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-11,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-12,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-2,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-3,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-4,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-5,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-6,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-7,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-8,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-9{width:100%}}@media screen and (max-width:969px){:not([class*=col-sm]):not([class*=col-xs]).col-md-1,:not([class*=col-sm]):not([class*=col-xs]).col-md-10,:not([class*=col-sm]):not([class*=col-xs]).col-md-11,:not([class*=col-sm]):not([class*=col-xs]).col-md-12,:not([class*=col-sm]):not([class*=col-xs]).col-md-2,:not([class*=col-sm]):not([class*=col-xs]).col-md-3,:not([class*=col-sm]):not([class*=col-xs]).col-md-4,:not([class*=col-sm]):not([class*=col-xs]).col-md-5,:not([class*=col-sm]):not([class*=col-xs]).col-md-6,:not([class*=col-sm]):not([class*=col-xs]).col-md-7,:not([class*=col-sm]):not([class*=col-xs]).col-md-8,:not([class*=col-sm]):not([class*=col-xs]).col-md-9{width:100%}}@media screen and (max-width:749px){.row{flex-direction:column}:not([class*=col-xs]).col-sm-1,:not([class*=col-xs]).col-sm-10,:not([class*=col-xs]).col-sm-11,:not([class*=col-xs]).col-sm-12,:not([class*=col-xs]).col-sm-2,:not([class*=col-xs]).col-sm-3,:not([class*=col-xs]).col-sm-4,:not([class*=col-xs]).col-sm-5,:not([class*=col-xs]).col-sm-6,:not([class*=col-xs]).col-sm-7,:not([class*=col-xs]).col-sm-8,:not([class*=col-xs]).col-sm-9{width:100%}}.no-margin-bottom,.no-mb{margin-bottom:0!important}.no-margin-x,.no-mx{margin-left:0!important;margin-right:0!important}

                </style>
                </body>
              ">
      </iframe>
      <div class="show-code buttons has-addons">
          <button class="button is-light">
            <span>Show code</span>
          </button>
          <button class="button is-light"
             target="_blank"
             aria-role="link"
             rel="noopener"
             title="Edit on CodePen, open a new tab"
             onclick="document.getElementById('form-an-observatory-dashboard-model').submit()">
              <span>Edit on Codepen</span>
              <span class="icon is-small">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                  <use xlink:href="#external"></use>
                </svg>
              </span>
          </button>
      </div>
    </div>
    <div class="box-code js-tabs is-hidden">
        <nav class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <div class="buttons has-addons js-tablist">
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-an-observatory-dashboard-model-html-content"
                        >
                          HTML
                        </a>
                        
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-an-observatory-dashboard-model-css-content"
                        >
                          CSS
                        </a>
                        
                    </div>
                </div>
            </div>
            
            <div class="level-right">
                <button class="copy-to-cc button is-primary is-outlined is-rounded has-tooltip-left"
                  data-tooltip="Copy to clipboard"
                  aria-role="button"
                  title="Edit on CodePen, open a new tab"
                >
                  <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#copy"></use>
                    </svg>
                  </span>
                </button>
                <button class="copied-to-cc button is-success is-outlined is-rounded has-tooltip-left is-hidden"
                  data-tooltip="Copied"
                  aria-role="button"
                  title="Copied"
                >
                  <figure class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#check"></use>
                    </svg>
                  </figure>
                </button>
            </div>
        </nav>
        <div class="tab-content">
            <div class="js-tabcontent"
                 id="code-an-observatory-dashboard-model-html-content"
                 data-clipboard="&lt;section class=&#34;observatory&#34; ng-init=&#34;values.modalswitchstatus = false&#34;&gt;
    &lt;div class=&#34;backdrop&#34;
         ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;
         ng-class=&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}&#34;&gt;
    &lt;/div&gt;

    &lt;ods-dataset-context context=&#34;ctx1,ctx2,ctx3&#34;
                         ctx1-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx1-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true}&#34;
                         ctx1-domain=&#34;public&#34;
                         ctx2-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx2-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}&#34;
                         ctx2-domain=&#34;public&#34;
                         ctx3-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx3-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}&#34;
                         ctx3-domain=&#34;public&#34;&gt;

        {{
        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        &#34;&#34;
        }}

        &lt;!-- Analyses --&gt;
        &lt;span ods-aggregation=&#34;agg&#34;
              ods-aggregation-context=&#34;ctx1&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.nbequip = agg ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;services&#34;
              ods-aggregation-context=&#34;ctx2&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.services = services ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;sante&#34;
              ods-aggregation-context=&#34;ctx3&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.sante = sante ; &#39;&#39; }}
        &lt;/span&gt;


        &lt;!-- THE RIGHT MODAL --&gt;
        &lt;div class=&#34;rightmodal&#34;&gt;
            &lt;div class=&#34;cl-modal&#34;
                 ng-class=&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}&#34;&gt;
                &lt;div class=&#34;cl-modal__header&#34;
                     ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;a href=&#34;#&#34;
                       class=&#34;closebtn&#34;&gt;
                        Fermer &lt;i class=&#34;fa fa-times-circle&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&#34;cl-modal__content&#34;&gt;
                    &lt;ods-facets context=&#34;ctx1&#34;&gt;
                        &lt;h3&gt;
                            Région
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;reg_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Département
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;dep_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Code DROM
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;com_arm_area_code&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            EPCI
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;epci_name&#34;&gt;&lt;/ods-facet&gt;
                    &lt;/ods-facets&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;section class=&#34;head&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;h1 class=&#34;titre&#34;&gt;
                    Un modèle d&#39;observation des équipements en France
                &lt;/h1&gt;
                &lt;div class=&#34;edito&#34;&gt;
                    &lt;p&gt;Bien que .. &lt;q&gt;Il n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.&lt;/q&gt; Paul Éluard
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div id=&#34;resume&#34;&gt;
                    &lt;p&gt;
                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base
                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.
                    &lt;/p&gt;
                    &lt;p&gt;
                        La classification des équipements en gammes a pour objectif de réunir des équipements qui
                        présentent
                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes
                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant
                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
        &lt;section class=&#34;filter-block&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;button ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;24&#34; height=&#34;24&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34;
                         stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;
                         class=&#34;feather feather-filter&#34;&gt;
                        &lt;polygon points=&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3&#34;&gt;&lt;/polygon&gt;
                    &lt;/svg&gt;
                    Filtrer les données
                &lt;/button&gt;
                &lt;ods-filter-summary context=&#34;ctx1&#34;&gt;
                    {{ refinements }}
                &lt;/ods-filter-summary&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;section&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;div class=&#34;row&#34;&gt;
                    &lt;div class=&#34;col-md-6&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Nombre d&#39;équipements en 2019
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Données INSEE issu de la BPE (Base permanente des équipements)
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ values.nbequip | number }}
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6&#34;
                         ng-if=&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Top 5 Région
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Nombre d&#39;équipements des 5 régions les mieux équipées
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                               scientific-display=&#34;true&#34;
                                               display-legend=&#34;false&#34;
                                               labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;reg_name&#34; maxpoints=&#34;5&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                             scientific-display=&#34;true&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6&#34;
                         ng-if=&#34;ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Top 5 Département
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Nombre d&#39;équipements des 5 départements les mieux équipées
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                               scientific-display=&#34;true&#34;
                                               display-legend=&#34;false&#34;
                                               labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;dep_name&#34; maxpoints=&#34;5&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                             scientific-display=&#34;true&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-12&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Répartis en grandes catégories
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        La Base Permanente des Équipements est réparti en 7 grands domaines :
                                        services
                                        aux
                                        particuliers ; commerces ; enseignement ; santé ; transports et
                                        déplacements ;
                                        sports, loisirs et culture ; tourisme.
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;30&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;category&#34; maxpoints=&#34;0&#34;
                                                         sort=&#34;serie1-1&#34;
                                                         category-colors=&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;treemap&#34; function-y=&#34;COUNT&#34;
                                                             color=&#34;range-PiYG&#34;
                                                             scientific-display=&#34;false&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

                &lt;h2&gt;
                    Observons ses deux principales catégories
                &lt;/h2&gt;

                &lt;div class=&#34;row&#34;&gt;
                    &lt;div class=&#34;col-md-6 order-md-1&#34;&gt;
                        &lt;div class=&#34;box white flat colored services&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Les Services aux particuliers
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        qui représentent
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ (values.services / values.nbequip * 100) | number : 1 }} %
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-3&#34;&gt;
                        &lt;div class=&#34;box white flat colored services&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Principaux équipement de services aux particuliers
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Description du TOP 20 de cette catégorie
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#ff714d&#34;
                                                             scientific-display=&#34;true&#34;
                                                             label-y=&#34;Nb. équipements&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-2&#34;&gt;
                        &lt;div class=&#34;box white flat colored sante&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        et la Santé
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        qui représente
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ (values.sante / values.nbequip * 100) | number : 1 }} %
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-4&#34;&gt;
                        &lt;div class=&#34;box white flat colored sante&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Principaux équipements de Santé
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Description du TOP 20 de cette catégorie
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx3&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#25c9ff&#34;
                                                             scientific-display=&#34;true&#34;
                                                             label-y=&#34;Nb. équipements&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/ods-dataset-context&gt;
&lt;/section&gt;"
                 role="tabpanel">
                <div class="highlight">
                    <pre class="language-html" data-lang="html"><code>&lt;section class=&#34;observatory&#34; ng-init=&#34;values.modalswitchstatus = false&#34;&gt;
    &lt;div class=&#34;backdrop&#34;
         ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;
         ng-class=&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}&#34;&gt;
    &lt;/div&gt;

    &lt;ods-dataset-context context=&#34;ctx1,ctx2,ctx3&#34;
                         ctx1-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx1-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true}&#34;
                         ctx1-domain=&#34;public&#34;
                         ctx2-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx2-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}&#34;
                         ctx2-domain=&#34;public&#34;
                         ctx3-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx3-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}&#34;
                         ctx3-domain=&#34;public&#34;&gt;

        {{
        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        &#34;&#34;
        }}

        &lt;!-- Analyses --&gt;
        &lt;span ods-aggregation=&#34;agg&#34;
              ods-aggregation-context=&#34;ctx1&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.nbequip = agg ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;services&#34;
              ods-aggregation-context=&#34;ctx2&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.services = services ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;sante&#34;
              ods-aggregation-context=&#34;ctx3&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.sante = sante ; &#39;&#39; }}
        &lt;/span&gt;


        &lt;!-- THE RIGHT MODAL --&gt;
        &lt;div class=&#34;rightmodal&#34;&gt;
            &lt;div class=&#34;cl-modal&#34;
                 ng-class=&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}&#34;&gt;
                &lt;div class=&#34;cl-modal__header&#34;
                     ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;a href=&#34;#&#34;
                       class=&#34;closebtn&#34;&gt;
                        Fermer &lt;i class=&#34;fa fa-times-circle&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&#34;cl-modal__content&#34;&gt;
                    &lt;ods-facets context=&#34;ctx1&#34;&gt;
                        &lt;h3&gt;
                            Région
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;reg_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Département
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;dep_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Code DROM
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;com_arm_area_code&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            EPCI
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;epci_name&#34;&gt;&lt;/ods-facet&gt;
                    &lt;/ods-facets&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;section class=&#34;head&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;h1 class=&#34;titre&#34;&gt;
                    Un modèle d&#39;observation des équipements en France
                &lt;/h1&gt;
                &lt;div class=&#34;edito&#34;&gt;
                    &lt;p&gt;Bien que .. &lt;q&gt;Il n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.&lt;/q&gt; Paul Éluard
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div id=&#34;resume&#34;&gt;
                    &lt;p&gt;
                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base
                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.
                    &lt;/p&gt;
                    &lt;p&gt;
                        La classification des équipements en gammes a pour objectif de réunir des équipements qui
                        présentent
                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes
                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant
                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
        &lt;section class=&#34;filter-block&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;button ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;24&#34; height=&#34;24&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34;
                         stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;
                         class=&#34;feather feather-filter&#34;&gt;
                        &lt;polygon points=&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3&#34;&gt;&lt;/polygon&gt;
                    &lt;/svg&gt;
                    Filtrer les données
                &lt;/button&gt;
                &lt;ods-filter-summary context=&#34;ctx1&#34;&gt;
                    {{ refinements }}
                &lt;/ods-filter-summary&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;section&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;div class=&#34;row&#34;&gt;
                    &lt;div class=&#34;col-md-6&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Nombre d&#39;équipements en 2019
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Données INSEE issu de la BPE (Base permanente des équipements)
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ values.nbequip | number }}
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6&#34;
                         ng-if=&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Top 5 Région
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Nombre d&#39;équipements des 5 régions les mieux équipées
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                               scientific-display=&#34;true&#34;
                                               display-legend=&#34;false&#34;
                                               labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;reg_name&#34; maxpoints=&#34;5&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                             scientific-display=&#34;true&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6&#34;
                         ng-if=&#34;ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Top 5 Département
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Nombre d&#39;équipements des 5 départements les mieux équipées
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                               scientific-display=&#34;true&#34;
                                               display-legend=&#34;false&#34;
                                               labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;dep_name&#34; maxpoints=&#34;5&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                             scientific-display=&#34;true&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-12&#34;&gt;
                        &lt;div class=&#34;box white flat&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Répartis en grandes catégories
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        La Base Permanente des Équipements est réparti en 7 grands domaines :
                                        services
                                        aux
                                        particuliers ; commerces ; enseignement ; santé ; transports et
                                        déplacements ;
                                        sports, loisirs et culture ; tourisme.
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;30&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;category&#34; maxpoints=&#34;0&#34;
                                                         sort=&#34;serie1-1&#34;
                                                         category-colors=&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;treemap&#34; function-y=&#34;COUNT&#34;
                                                             color=&#34;range-PiYG&#34;
                                                             scientific-display=&#34;false&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

                &lt;h2&gt;
                    Observons ses deux principales catégories
                &lt;/h2&gt;

                &lt;div class=&#34;row&#34;&gt;
                    &lt;div class=&#34;col-md-6 order-md-1&#34;&gt;
                        &lt;div class=&#34;box white flat colored services&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Les Services aux particuliers
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        qui représentent
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ (values.services / values.nbequip * 100) | number : 1 }} %
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-3&#34;&gt;
                        &lt;div class=&#34;box white flat colored services&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Principaux équipement de services aux particuliers
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Description du TOP 20 de cette catégorie
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#ff714d&#34;
                                                             scientific-display=&#34;true&#34;
                                                             label-y=&#34;Nb. équipements&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-2&#34;&gt;
                        &lt;div class=&#34;box white flat colored sante&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        et la Santé
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        qui représente
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                    &lt;p class=&#34;value&#34;&gt;
                                        {{ (values.sante / values.nbequip * 100) | number : 1 }} %
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;col-md-6 order-md-4&#34;&gt;
                        &lt;div class=&#34;box white flat colored sante&#34;&gt;
                            &lt;div class=&#34;advanced-kpi&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                    &lt;h3 class=&#34;title&#34;&gt;
                                        Principaux équipements de Santé
                                    &lt;/h3&gt;
                                    &lt;p class=&#34;description&#34;&gt;
                                        Description du TOP 20 de cette catégorie
                                    &lt;/p&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                    &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                        &lt;ods-chart-query context=&#34;ctx3&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                         sort=&#34;serie1-1&#34;&gt;
                                            &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#25c9ff&#34;
                                                             scientific-display=&#34;true&#34;
                                                             label-y=&#34;Nb. équipements&#34;&gt;
                                            &lt;/ods-chart-serie&gt;
                                        &lt;/ods-chart-query&gt;
                                    &lt;/ods-chart&gt;
                                &lt;/div&gt;
                                &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                    &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                        &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                        &lt;a class=&#34;source&#34;
                                           href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                           title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                                class=&#34;fa fa-long-arrow-right&#34;
                                                aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                        &lt;/a&gt;
                                    &lt;/div&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/ods-dataset-context&gt;
&lt;/section&gt;</code></pre>
                </div>
            </div>
            
            <div class="js-tabcontent"
                 id="code-an-observatory-dashboard-model-css-content"
                 data-clipboard=":root {
    --boxes-radius: 6px;
}

main {
    margin: 0;
}

/* ALL PAGE CONTAINER */
.observatory {
    background-color: var(--page-background);
    /* prerequisite for full height modal bar */
    position: relative;
}

/* Section 1 : heading */
section.head {
    background-color: white;
    padding: 26px 0;
}

.filter-block {
    position: sticky;
    top: 0;
    z-index: 1;
    box-shadow: 0px 15px 10px -15px #2b2b2b;
    margin-bottom: 35px;
    background-color: black;
}

.filter-block .container {
    display: flex;
    align-items: center;
    padding: 18px 0;
}

.filter-block button {
    padding: 0 13px;
    margin: 0 10px;
    border-radius: 100000px;
    display: flex;
    align-items: center;
    background-color: white;
    color: black;
    border: 1px solid black;
    height: 36px;
    min-width: max-content;
}

.filter-block button:hover {
    filter: invert();
}

.filter-block button svg {
    margin-right: 6px;
}

.titre {
    font-size: 37px;
    margin: 26px 0 6px;
}

.edito {
    margin: 0;
    font-size: 19px;
}

.edito q {
    font-style: italic;
}

#resume {
    font-size: 1.1em;
    line-height: 1.8em;
    margin-top: 26px;
}

@media screen and (min-width: 640px) {
    #resume {
        margin-right: 33%;
    }
}

/* BACKDROP (black screen when modal active) */
.backdrop {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 900;
    background-color: #000;
    cursor: default;
    -webkit-transition: visibility 0.5s, opacity 0.5s;
    transition: visibility 0.5s, opacity 0.5s;
}

.backdrop-active {
    visibility: visible;
    opacity: 0.6;
    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */
}

/* MODAL */
/* The modal is composed of 2 parts:
the leftside, that is the banner that is always visible, and contains an icon on top to click and actiavte the modal
the right side, that contains filters, searchbar, charts etc... that is not visible, activated on demand
the modal default size (width) is 57px, it correspond to the leftside width */
.cl-modal {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -400px;
    bottom: 0;
    width: 400px;
    background-color: white;
    z-index: 1000;
    overflow: hidden;
    /* Disable horizontal scroll */
    transition: ease-in 0.3s;
}

.cl-modal-active {
    right: 0;
}

/* specific because charts are loaded inside */
.cl-modal__content {
    width: 400px;
}

@media (max-width: 420px) {
    .cl-modal-active {
        width: 100%;
    }

    .cl-modal__content {
        width: 100vw;
    }
}

.cl-modal__header {
    min-height: 35px;
    background-color: white;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: start;
    opacity: 0;
    transition: opacity 0s;
}

.cl-modal__header .closebtn {
    padding: 0 13px;
    color: black;
}

.cl-modal-active .cl-modal__header {
    opacity: 1;
    transition-delay: 0.3s;
}

/* CONTENT OF THE MODAL */
/* HEADER / UPPER PART */
.cl-modal__header {
    border-bottom: 1px solid lightgrey;
}

/* THEN THE MIDDLE / CONTENT */
.cl-modal__content {
    height: 100%;
    overflow-y: auto;
    padding: 25px;
    opacity: 0;
    transition: opacity 0s;
}

/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal
ie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content
this trick is very important to avoid the browser the resize all the content during the modal opening */
.cl-modal-active .cl-modal__content {
    opacity: 1;
    transition-delay: 0.3s;
}

/** FILTER SUMMARY */
ul.odswidget.odswidget-filter-summary {
    font-size: 1em;
    margin-left: 13px;
    position: relative;
}

@media (min-width: 420px) {
    ul.odswidget.odswidget-filter-summary {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
}

li.odswidget-filter-summary__active-filter,
li.odswidget-filter-summary__clear-all {
    border-radius: 3px;
    margin: 2px 4px;
    padding: 0;
}

li.odswidget-filter-summary__active-filter {
    color: white;
}

.odswidget-filter-summary__active-filter-label {
    color: black;
    font-size: 1rem;
}

a.odswidget-filter-summary__active-filter-link,
a.odswidget-clear-all-filters {
    border-left: none;
    margin: 0;
    padding: 2px 4px 2px 2px;
    display: flex;
    align-items: center;
}

a.odswidget-clear-all-filters {
    align-items: center;
    color: white;
    opacity: 0.8;
}

a.odswidget-clear-all-filters:hover {
    color: white;
    opacity: 1;
}

a.odswidget-clear-all-filters i {
    margin-right: 3px;
}

.box {
    position: relative;
    padding: 13px;
}

.box.colored {
    padding-top: calc(13px &#43; 9px);
}

.box.colored:before {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 9px;
    content: &#34;&#34;;
    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;
}

.box.colored.services:before {
    background-color: #ff714d;
}

.box.colored.sante:before {
    background-color: #25c9ff;
}

.box.white {
    background-color: white;
}

.box.flat {
    border: 1px solid #dfdfdf;
    border-radius: var(--boxes-radius);
}

.advanced-kpi {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.advanced-kpi--top .title {
    font-size: 1.2em;
    margin: 0 auto 6px;
}

.advanced-kpi--top .description {
    margin: 0 auto;
    color: #565656;
    font-size: 1em;
    font-weight: 400;
}

.advanced-kpi--middle {
    display: flex;
    flex-direction: column;
    margin: 20px 0;
}

.advanced-kpi--middle.centered {
    align-items: center;
}

.advanced-kpi--middle &gt; * {
    margin: 5px 0;
}

.advanced-kpi--middle .value {
    color: var(--highlight);
    font-weight: 600;
    font-size: 3rem;
}

.advanced-kpi--bottom {
    font-size: 0.8em;
}

.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {
    display: flex;
    justify-content: space-between;
}

.advanced-kpi--bottom .source {
    text-decoration: underline;
    color: var(--links);
}

.advanced-kpi--bottom .source i {
    margin-left: 6px;
}

.advanced-kpi--bottom .source:hover {
    opacity: 0.65;
}

.advanced-kpi--bottom .source:hover i {
    animation: bounce 0.7s ease infinite;
}

@keyframes bounce {
    from {
        margin-left: 6px;
        margin-right: 0;
    }
    50% {
        margin-left: 2px;
        margin-right: 4px;
    }
    to {
        margin-left: 6px;
        margin-right: 0;
    }
}

/* CHARTS */
.ods-chart {
    min-height: inherit;
}

.medium-chart {
    height: 350px;
}

.small-chart {
    height: 130px;
}

.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {
    font-family: Gotham-book, Arial, sans-serif !important;
}

.ods-highcharts__tooltip {
    align-items: center;
}

/**
 * License: MIT License
 * Generated on 25 Jun 2021
 * Author: Labs from opendatasoft
 * Version: 0.3
 * Description: ODS Layout over-ride to Flexbox system
 */

.box,.row.full-height{height:100%}.row{display:flex;flex-wrap:wrap}.row&gt;*{margin-bottom:20px}.order-0{order:0}@media screen and (min-width:750px){.order-sm-0{order:0}}@media screen and (min-width:970px){.order-md-0{order:0}}@media screen and (min-width:1170px){.order-lg-0{order:0}.order-lg-1{order:1}}.order-1{order:1}@media screen and (min-width:750px){.order-sm-1{order:1}}@media screen and (min-width:970px){.order-md-1{order:1}.order-md-2{order:2}}.order-2{order:2}@media screen and (min-width:750px){.order-sm-2{order:2}}@media screen and (min-width:1170px){.order-lg-2{order:2}.order-lg-3{order:3}}.order-3{order:3}@media screen and (min-width:750px){.order-sm-3{order:3}}@media screen and (min-width:970px){.order-md-3{order:3}.order-md-4{order:4}}.order-4{order:4}@media screen and (min-width:750px){.order-sm-4{order:4}}@media screen and (min-width:1170px){.order-lg-4{order:4}.order-lg-5{order:5}}.order-5{order:5}@media screen and (min-width:750px){.order-sm-5{order:5}}@media screen and (min-width:970px){.order-md-5{order:5}.order-md-6{order:6}}.order-6{order:6}@media screen and (min-width:750px){.order-sm-6{order:6}}@media screen and (min-width:1170px){.order-lg-6{order:6}.order-lg-7{order:7}}.order-7{order:7}@media screen and (min-width:750px){.order-sm-7{order:7}}@media screen and (min-width:970px){.order-md-7{order:7}.order-md-8{order:8}}.order-8{order:8}@media screen and (min-width:750px){.order-sm-8{order:8}}@media screen and (min-width:1170px){.order-lg-8{order:8}.order-lg-9{order:9}}.order-9{order:9}@media screen and (min-width:750px){.order-sm-9{order:9}}@media screen and (min-width:970px){.order-md-9{order:9}.order-md-10{order:10}}.order-10{order:10}@media screen and (min-width:750px){.order-sm-10{order:10}}@media screen and (min-width:1170px){.order-lg-10{order:10}.order-lg-11{order:11}}.order-11{order:11}@media screen and (min-width:750px){.order-sm-11{order:11}}@media screen and (min-width:970px){.order-md-11{order:11}.order-md-12{order:12}}.order-12{order:12}@media screen and (min-width:750px){.order-sm-12{order:12}}@media screen and (min-width:1170px){.order-lg-12{order:12}}@media screen and (max-width:1169px){:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-1,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-10,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-11,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-12,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-2,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-3,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-4,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-5,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-6,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-7,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-8,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-9{width:100%}}@media screen and (max-width:969px){:not([class*=col-sm]):not([class*=col-xs]).col-md-1,:not([class*=col-sm]):not([class*=col-xs]).col-md-10,:not([class*=col-sm]):not([class*=col-xs]).col-md-11,:not([class*=col-sm]):not([class*=col-xs]).col-md-12,:not([class*=col-sm]):not([class*=col-xs]).col-md-2,:not([class*=col-sm]):not([class*=col-xs]).col-md-3,:not([class*=col-sm]):not([class*=col-xs]).col-md-4,:not([class*=col-sm]):not([class*=col-xs]).col-md-5,:not([class*=col-sm]):not([class*=col-xs]).col-md-6,:not([class*=col-sm]):not([class*=col-xs]).col-md-7,:not([class*=col-sm]):not([class*=col-xs]).col-md-8,:not([class*=col-sm]):not([class*=col-xs]).col-md-9{width:100%}}@media screen and (max-width:749px){.row{flex-direction:column}:not([class*=col-xs]).col-sm-1,:not([class*=col-xs]).col-sm-10,:not([class*=col-xs]).col-sm-11,:not([class*=col-xs]).col-sm-12,:not([class*=col-xs]).col-sm-2,:not([class*=col-xs]).col-sm-3,:not([class*=col-xs]).col-sm-4,:not([class*=col-xs]).col-sm-5,:not([class*=col-xs]).col-sm-6,:not([class*=col-xs]).col-sm-7,:not([class*=col-xs]).col-sm-8,:not([class*=col-xs]).col-sm-9{width:100%}}.no-margin-bottom,.no-mb{margin-bottom:0!important}.no-margin-x,.no-mx{margin-left:0!important;margin-right:0!important}
"
            >
                <div class="highlight">
                    <pre class="language-css" data-lang="css"><code>:root {
    --boxes-radius: 6px;
}

main {
    margin: 0;
}

/* ALL PAGE CONTAINER */
.observatory {
    background-color: var(--page-background);
    /* prerequisite for full height modal bar */
    position: relative;
}

/* Section 1 : heading */
section.head {
    background-color: white;
    padding: 26px 0;
}

.filter-block {
    position: sticky;
    top: 0;
    z-index: 1;
    box-shadow: 0px 15px 10px -15px #2b2b2b;
    margin-bottom: 35px;
    background-color: black;
}

.filter-block .container {
    display: flex;
    align-items: center;
    padding: 18px 0;
}

.filter-block button {
    padding: 0 13px;
    margin: 0 10px;
    border-radius: 100000px;
    display: flex;
    align-items: center;
    background-color: white;
    color: black;
    border: 1px solid black;
    height: 36px;
    min-width: max-content;
}

.filter-block button:hover {
    filter: invert();
}

.filter-block button svg {
    margin-right: 6px;
}

.titre {
    font-size: 37px;
    margin: 26px 0 6px;
}

.edito {
    margin: 0;
    font-size: 19px;
}

.edito q {
    font-style: italic;
}

#resume {
    font-size: 1.1em;
    line-height: 1.8em;
    margin-top: 26px;
}

@media screen and (min-width: 640px) {
    #resume {
        margin-right: 33%;
    }
}

/* BACKDROP (black screen when modal active) */
.backdrop {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 900;
    background-color: #000;
    cursor: default;
    -webkit-transition: visibility 0.5s, opacity 0.5s;
    transition: visibility 0.5s, opacity 0.5s;
}

.backdrop-active {
    visibility: visible;
    opacity: 0.6;
    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */
}

/* MODAL */
/* The modal is composed of 2 parts:
the leftside, that is the banner that is always visible, and contains an icon on top to click and actiavte the modal
the right side, that contains filters, searchbar, charts etc... that is not visible, activated on demand
the modal default size (width) is 57px, it correspond to the leftside width */
.cl-modal {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -400px;
    bottom: 0;
    width: 400px;
    background-color: white;
    z-index: 1000;
    overflow: hidden;
    /* Disable horizontal scroll */
    transition: ease-in 0.3s;
}

.cl-modal-active {
    right: 0;
}

/* specific because charts are loaded inside */
.cl-modal__content {
    width: 400px;
}

@media (max-width: 420px) {
    .cl-modal-active {
        width: 100%;
    }

    .cl-modal__content {
        width: 100vw;
    }
}

.cl-modal__header {
    min-height: 35px;
    background-color: white;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: start;
    opacity: 0;
    transition: opacity 0s;
}

.cl-modal__header .closebtn {
    padding: 0 13px;
    color: black;
}

.cl-modal-active .cl-modal__header {
    opacity: 1;
    transition-delay: 0.3s;
}

/* CONTENT OF THE MODAL */
/* HEADER / UPPER PART */
.cl-modal__header {
    border-bottom: 1px solid lightgrey;
}

/* THEN THE MIDDLE / CONTENT */
.cl-modal__content {
    height: 100%;
    overflow-y: auto;
    padding: 25px;
    opacity: 0;
    transition: opacity 0s;
}

/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal
ie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content
this trick is very important to avoid the browser the resize all the content during the modal opening */
.cl-modal-active .cl-modal__content {
    opacity: 1;
    transition-delay: 0.3s;
}

/** FILTER SUMMARY */
ul.odswidget.odswidget-filter-summary {
    font-size: 1em;
    margin-left: 13px;
    position: relative;
}

@media (min-width: 420px) {
    ul.odswidget.odswidget-filter-summary {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
}

li.odswidget-filter-summary__active-filter,
li.odswidget-filter-summary__clear-all {
    border-radius: 3px;
    margin: 2px 4px;
    padding: 0;
}

li.odswidget-filter-summary__active-filter {
    color: white;
}

.odswidget-filter-summary__active-filter-label {
    color: black;
    font-size: 1rem;
}

a.odswidget-filter-summary__active-filter-link,
a.odswidget-clear-all-filters {
    border-left: none;
    margin: 0;
    padding: 2px 4px 2px 2px;
    display: flex;
    align-items: center;
}

a.odswidget-clear-all-filters {
    align-items: center;
    color: white;
    opacity: 0.8;
}

a.odswidget-clear-all-filters:hover {
    color: white;
    opacity: 1;
}

a.odswidget-clear-all-filters i {
    margin-right: 3px;
}

.box {
    position: relative;
    padding: 13px;
}

.box.colored {
    padding-top: calc(13px &#43; 9px);
}

.box.colored:before {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 9px;
    content: &#34;&#34;;
    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;
}

.box.colored.services:before {
    background-color: #ff714d;
}

.box.colored.sante:before {
    background-color: #25c9ff;
}

.box.white {
    background-color: white;
}

.box.flat {
    border: 1px solid #dfdfdf;
    border-radius: var(--boxes-radius);
}

.advanced-kpi {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.advanced-kpi--top .title {
    font-size: 1.2em;
    margin: 0 auto 6px;
}

.advanced-kpi--top .description {
    margin: 0 auto;
    color: #565656;
    font-size: 1em;
    font-weight: 400;
}

.advanced-kpi--middle {
    display: flex;
    flex-direction: column;
    margin: 20px 0;
}

.advanced-kpi--middle.centered {
    align-items: center;
}

.advanced-kpi--middle &gt; * {
    margin: 5px 0;
}

.advanced-kpi--middle .value {
    color: var(--highlight);
    font-weight: 600;
    font-size: 3rem;
}

.advanced-kpi--bottom {
    font-size: 0.8em;
}

.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {
    display: flex;
    justify-content: space-between;
}

.advanced-kpi--bottom .source {
    text-decoration: underline;
    color: var(--links);
}

.advanced-kpi--bottom .source i {
    margin-left: 6px;
}

.advanced-kpi--bottom .source:hover {
    opacity: 0.65;
}

.advanced-kpi--bottom .source:hover i {
    animation: bounce 0.7s ease infinite;
}

@keyframes bounce {
    from {
        margin-left: 6px;
        margin-right: 0;
    }
    50% {
        margin-left: 2px;
        margin-right: 4px;
    }
    to {
        margin-left: 6px;
        margin-right: 0;
    }
}

/* CHARTS */
.ods-chart {
    min-height: inherit;
}

.medium-chart {
    height: 350px;
}

.small-chart {
    height: 130px;
}

.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {
    font-family: Gotham-book, Arial, sans-serif !important;
}

.ods-highcharts__tooltip {
    align-items: center;
}

/**
 * License: MIT License
 * Generated on 25 Jun 2021
 * Author: Labs from opendatasoft
 * Version: 0.3
 * Description: ODS Layout over-ride to Flexbox system
 */

.box,.row.full-height{height:100%}.row{display:flex;flex-wrap:wrap}.row&gt;*{margin-bottom:20px}.order-0{order:0}@media screen and (min-width:750px){.order-sm-0{order:0}}@media screen and (min-width:970px){.order-md-0{order:0}}@media screen and (min-width:1170px){.order-lg-0{order:0}.order-lg-1{order:1}}.order-1{order:1}@media screen and (min-width:750px){.order-sm-1{order:1}}@media screen and (min-width:970px){.order-md-1{order:1}.order-md-2{order:2}}.order-2{order:2}@media screen and (min-width:750px){.order-sm-2{order:2}}@media screen and (min-width:1170px){.order-lg-2{order:2}.order-lg-3{order:3}}.order-3{order:3}@media screen and (min-width:750px){.order-sm-3{order:3}}@media screen and (min-width:970px){.order-md-3{order:3}.order-md-4{order:4}}.order-4{order:4}@media screen and (min-width:750px){.order-sm-4{order:4}}@media screen and (min-width:1170px){.order-lg-4{order:4}.order-lg-5{order:5}}.order-5{order:5}@media screen and (min-width:750px){.order-sm-5{order:5}}@media screen and (min-width:970px){.order-md-5{order:5}.order-md-6{order:6}}.order-6{order:6}@media screen and (min-width:750px){.order-sm-6{order:6}}@media screen and (min-width:1170px){.order-lg-6{order:6}.order-lg-7{order:7}}.order-7{order:7}@media screen and (min-width:750px){.order-sm-7{order:7}}@media screen and (min-width:970px){.order-md-7{order:7}.order-md-8{order:8}}.order-8{order:8}@media screen and (min-width:750px){.order-sm-8{order:8}}@media screen and (min-width:1170px){.order-lg-8{order:8}.order-lg-9{order:9}}.order-9{order:9}@media screen and (min-width:750px){.order-sm-9{order:9}}@media screen and (min-width:970px){.order-md-9{order:9}.order-md-10{order:10}}.order-10{order:10}@media screen and (min-width:750px){.order-sm-10{order:10}}@media screen and (min-width:1170px){.order-lg-10{order:10}.order-lg-11{order:11}}.order-11{order:11}@media screen and (min-width:750px){.order-sm-11{order:11}}@media screen and (min-width:970px){.order-md-11{order:11}.order-md-12{order:12}}.order-12{order:12}@media screen and (min-width:750px){.order-sm-12{order:12}}@media screen and (min-width:1170px){.order-lg-12{order:12}}@media screen and (max-width:1169px){:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-1,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-10,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-11,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-12,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-2,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-3,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-4,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-5,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-6,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-7,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-8,:not([class*=col-md]):not([class*=col-sm]):not([class*=col-xs]).col-lg-9{width:100%}}@media screen and (max-width:969px){:not([class*=col-sm]):not([class*=col-xs]).col-md-1,:not([class*=col-sm]):not([class*=col-xs]).col-md-10,:not([class*=col-sm]):not([class*=col-xs]).col-md-11,:not([class*=col-sm]):not([class*=col-xs]).col-md-12,:not([class*=col-sm]):not([class*=col-xs]).col-md-2,:not([class*=col-sm]):not([class*=col-xs]).col-md-3,:not([class*=col-sm]):not([class*=col-xs]).col-md-4,:not([class*=col-sm]):not([class*=col-xs]).col-md-5,:not([class*=col-sm]):not([class*=col-xs]).col-md-6,:not([class*=col-sm]):not([class*=col-xs]).col-md-7,:not([class*=col-sm]):not([class*=col-xs]).col-md-8,:not([class*=col-sm]):not([class*=col-xs]).col-md-9{width:100%}}@media screen and (max-width:749px){.row{flex-direction:column}:not([class*=col-xs]).col-sm-1,:not([class*=col-xs]).col-sm-10,:not([class*=col-xs]).col-sm-11,:not([class*=col-xs]).col-sm-12,:not([class*=col-xs]).col-sm-2,:not([class*=col-xs]).col-sm-3,:not([class*=col-xs]).col-sm-4,:not([class*=col-xs]).col-sm-5,:not([class*=col-xs]).col-sm-6,:not([class*=col-xs]).col-sm-7,:not([class*=col-xs]).col-sm-8,:not([class*=col-xs]).col-sm-9{width:100%}}.no-margin-bottom,.no-mb{margin-bottom:0!important}.no-margin-x,.no-mx{margin-left:0!important;margin-right:0!important}
</code></pre>
                </div>
            </div>
            
        </div>
    </div>
</div>

      </div>
    </article>
    
    <article class="block">
      <h2 class="title is-2" id="css-grid--observatory-model">
        CSS Grid : Observatory model 
        <a class="is-link anchor" href="#css-grid--observatory-model">
          <span class="icon">
            <img src="/img/fas-link.svg" />
          </span>
        </a>
      </h2>
      <div class="content">
        <p>This version is based on the <a href="/page-templates/css-grid-framework">CSS Grid framework available here</a>. Please read the resource description carefully before using it as it&rsquo;s mainly dedicated to expert users.</p>
<blockquote>
<p>Note: The CSS includes only necessary classes and NOT the entire CSS Grid framework. To change the layout, you&rsquo;ll then also need to change the according CSS.
Feel free to get the full framework if needed.</p>
</blockquote>

      </div>
      
      <div class="box">
        







    




<div class="codepen">
    <form id="form-css-grid--observatory-model"
          action="https://codepen.io/pen/define"
          method="POST"
          target="_blank">
        <input type="hidden"
               name="data"
               value='{
                 "title": "New Pen!",
                 "head": &#34;\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css\&#34;\n/\u003e\n\n\u003c!-- ODS Platform CSS - must be hosted on static : WIP --\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css\&#34;\n/\u003e\n\u003clink\n  rel=\&#34;stylesheet\&#34;\n  href=\&#34;https://codelibrary.opendatasoft.com/css/theme.css\&#34;\n/\u003e\n\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js\&#34;\u003e\u003c/script\u003e\n\u003cscript src=\&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js\&#34;\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js\&#34;\n\u003e\u003c/script\u003e\n\u003cscript\n  type=\&#34;text/javascript\&#34;\n  src=\&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js\&#34;\n\u003e\u003c/script\u003e\n\n\u003cscript type=\&#34;text/javascript\&#34;\u003e\n  const sourceMonitoringInterceptor = $q =\u003e {\n    return {\n      request: config =\u003e {\n        if (config.params)\n          if (config.params.source) delete config.params.source;\n\n        config.url = config.url.replace(\n          \&#34;ods-api-monitoring\&#34;,\n          \&#34;monitoring-copy\&#34;\n        );\n        return config;\n      }\n    };\n  };\n\n  angular\n    .module(\&#34;ods-widgets\&#34;)\n    .config(function(ODSWidgetsConfigProvider, $httpProvider) {\n      ODSWidgetsConfigProvider.setConfig({\n        defaultDomain: \&#34;https://userclub.opendatasoft.com/\&#34;,\n        basemaps: [\n          {\n            provider: \&#34;jawg.light\&#34;,\n            label: \&#34;Jawg Light\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;\n          },\n          {\n            provider: \&#34;jawg.streets\&#34;,\n            label: \&#34;Jawg Streets\&#34;,\n            jawg_apikey: \&#34;opendatasoft-community\&#34;,\n            id: \&#34;streets\&#34;\n          }\n        ],\n        themes: {\n          default: {\n            url: \&#34;/img/ods.svg\&#34;\n          },\n          Santé: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Culture, Patrimoine\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Éducation, Formation, Recherche, Enseignement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Environment: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Transports, Déplacements\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Économie, Business, PME, Développement économique, Emploi\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Administration, Gouvernement, Finances publiques, Citoyenneté\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Justice, Sécurité, Police, Crime\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Sport, Loisirs\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Hébergement, Restauration\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          \&#34;Services, Social\&#34;: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Checklist: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          },\n          Usages: {\n            url:\n              \&#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg\&#34;,\n            color: \&#34;#1446A0\&#34;\n          }\n        },\n        mapPrependAttribution: \&#34;Jawg apikey NOT suitable for production\&#34;\n      });\n      $httpProvider.interceptors.push(sourceMonitoringInterceptor);\n    });\n\u003c/script\u003e\n&#34;,
                 "editors": 110,
                 "html": &#34;\u003cdiv ng-app=\&#34;ods-widgets\&#34;\u003e\n\u003csection class=\&#34;observatory\&#34; ng-init=\&#34;values.modalswitchstatus = false\&#34;\u003e\n    \u003cdiv class=\&#34;backdrop\&#34;\n         ng-click=\&#34;values.modalswitchstatus = !values.modalswitchstatus\&#34;\n         ng-class=\&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}\&#34;\u003e\n    \u003c/div\u003e\n\n    \u003cods-dataset-context context=\&#34;ctx1,ctx2,ctx3\&#34;\n                         ctx1-dataset=\&#34;buildingref-france-bpe-all-geolocated\&#34;\n                         ctx1-parameters=\&#34;{&#39;disjunctive.epci_name&#39;:true}\&#34;\n                         ctx1-domain=\&#34;public\&#34;\n                         ctx2-dataset=\&#34;buildingref-france-bpe-all-geolocated\&#34;\n                         ctx2-parameters=\&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}\&#34;\n                         ctx2-domain=\&#34;public\&#34;\n                         ctx3-dataset=\&#34;buildingref-france-bpe-all-geolocated\&#34;\n                         ctx3-parameters=\&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}\&#34;\n                         ctx3-domain=\&#34;public\&#34;\u003e\n\n        {{\n        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;\n        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;\n        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;\n        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;\n        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;\n        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;\n        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;\n        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;\n        \&#34;\&#34;\n        }}\n\n        \u003c!-- Analyses --\u003e\n        \u003cspan ods-aggregation=\&#34;agg\&#34;\n              ods-aggregation-context=\&#34;ctx1\&#34;\n              ods-aggregation-function=\&#34;COUNT\&#34;\u003e\n          {{ values.nbequip = agg ; &#39;&#39; }}\n        \u003c/span\u003e\n        \u003cspan ods-aggregation=\&#34;services\&#34;\n              ods-aggregation-context=\&#34;ctx2\&#34;\n              ods-aggregation-function=\&#34;COUNT\&#34;\u003e\n          {{ values.services = services ; &#39;&#39; }}\n        \u003c/span\u003e\n        \u003cspan ods-aggregation=\&#34;sante\&#34;\n              ods-aggregation-context=\&#34;ctx3\&#34;\n              ods-aggregation-function=\&#34;COUNT\&#34;\u003e\n          {{ values.sante = sante ; &#39;&#39; }}\n        \u003c/span\u003e\n\n\n        \u003c!-- THE RIGHT MODAL --\u003e\n        \u003cdiv class=\&#34;rightmodal\&#34;\u003e\n            \u003cdiv class=\&#34;cl-modal\&#34;\n                 ng-class=\&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}\&#34;\u003e\n                \u003cdiv class=\&#34;cl-modal__header\&#34;\n                     ng-click=\&#34;values.modalswitchstatus = !values.modalswitchstatus\&#34;\u003e\n                    \u003ca href=\&#34;#\&#34;\n                       class=\&#34;closebtn\&#34;\u003e\n                        Fermer \u003ci class=\&#34;fa fa-times-circle\&#34; aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                    \u003c/a\u003e\n                \u003c/div\u003e\n                \u003cdiv class=\&#34;cl-modal__content\&#34;\u003e\n                    \u003cods-facets context=\&#34;ctx1\&#34;\u003e\n                        \u003ch3\u003e\n                            Région\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;reg_name\&#34;\u003e\u003c/ods-facet\u003e\n                        \u003ch3\u003e\n                            Département\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;dep_name\&#34;\u003e\u003c/ods-facet\u003e\n                        \u003ch3\u003e\n                            Code DROM\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;com_arm_area_code\&#34;\u003e\u003c/ods-facet\u003e\n                        \u003ch3\u003e\n                            EPCI\n                        \u003c/h3\u003e\n                        \u003cods-facet name=\&#34;epci_name\&#34;\u003e\u003c/ods-facet\u003e\n                    \u003c/ods-facets\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/div\u003e\n\n        \u003csection class=\&#34;head\&#34;\u003e\n            \u003cdiv class=\&#34;container\&#34;\u003e\n                \u003ch1 class=\&#34;titre\&#34;\u003e\n                    Un modèle d&#39;observation des équipements en France\n                \u003c/h1\u003e\n                \u003cdiv class=\&#34;edito\&#34;\u003e\n                    \u003cp\u003eBien que .. \u003cq\u003eIl n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.\u003c/q\u003e Paul Éluard\n                    \u003c/p\u003e\n                \u003c/div\u003e\n                \u003cdiv id=\&#34;resume\&#34;\u003e\n                    \u003cp\u003e\n                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base\n                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.\n                    \u003c/p\u003e\n                    \u003cp\u003e\n                        La classification des équipements en gammes a pour objectif de réunir des équipements qui\n                        présentent\n                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes\n                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant\n                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.\n                    \u003c/p\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/section\u003e\n        \u003csection class=\&#34;filter-block\&#34;\u003e\n            \u003cdiv class=\&#34;container\&#34;\u003e\n                \u003cbutton ng-click=\&#34;values.modalswitchstatus = !values.modalswitchstatus\&#34;\u003e\n                    \u003csvg xmlns=\&#34;http://www.w3.org/2000/svg\&#34; width=\&#34;24\&#34; height=\&#34;24\&#34; viewBox=\&#34;0 0 24 24\&#34; fill=\&#34;none\&#34;\n                         stroke=\&#34;currentColor\&#34; stroke-width=\&#34;2\&#34; stroke-linecap=\&#34;round\&#34; stroke-linejoin=\&#34;round\&#34;\n                         class=\&#34;feather feather-filter\&#34;\u003e\n                        \u003cpolygon points=\&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\&#34;\u003e\u003c/polygon\u003e\n                    \u003c/svg\u003e\n                    Filtrer les données\n                \u003c/button\u003e\n                \u003cods-filter-summary context=\&#34;ctx1\&#34;\u003e\n                    {{ refinements }}\n                \u003c/ods-filter-summary\u003e\n            \u003c/div\u003e\n        \u003c/section\u003e\n\n        \u003csection\u003e\n            \u003cdiv class=\&#34;container\&#34;\u003e\n                \u003cdiv class=\&#34;grid md:grid-4 gap-6\&#34;\u003e\n                    \u003cdiv class=\&#34;md:cell-2 box white flat\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Nombre d&#39;équipements en 2019\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    Données INSEE issu de la BPE (Base permanente des équipements)\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle centered\&#34;\u003e\n                                \u003cp class=\&#34;value\&#34;\u003e\n                                    {{ values.nbequip | number }}\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci class=\&#34;fa fa-long-arrow-right\&#34;\n                                                                                        aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;md:cell-2 box white flat\&#34;\n                         ng-if=\&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Top 5 Région\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    Nombre d&#39;équipements des 5 régions les mieux équipées\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                \u003cods-chart style=\&#34;height: 170px\&#34; class=\&#34;small-chart\&#34; single-y-axis=\&#34;true\&#34;\n                                           scientific-display=\&#34;true\&#34;\n                                           display-legend=\&#34;false\&#34;\n                                           labels-x-length=\&#34;20\&#34; align-month=\&#34;false\&#34;\u003e\n                                    \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;reg_name\&#34; maxpoints=\&#34;5\&#34;\n                                                     sort=\&#34;serie1-1\&#34;\u003e\n                                        \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#000000\&#34;\n                                                         scientific-display=\&#34;true\&#34;\u003e\n                                        \u003c/ods-chart-serie\u003e\n                                    \u003c/ods-chart-query\u003e\n                                \u003c/ods-chart\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                            class=\&#34;fa fa-long-arrow-right\&#34;\n                                            aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;md:cell-2 box white flat\&#34;\n                         ng-if=\&#34;ctx1.parameters[&#39;refine.reg_name&#39;]\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Top 5 Département\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    Nombre d&#39;équipements des 5 départements les mieux équipées\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                \u003cods-chart style=\&#34;height: 170px\&#34; class=\&#34;small-chart\&#34; single-y-axis=\&#34;true\&#34;\n                                           scientific-display=\&#34;true\&#34;\n                                           display-legend=\&#34;false\&#34;\n                                           labels-x-length=\&#34;20\&#34; align-month=\&#34;false\&#34;\u003e\n                                    \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;dep_name\&#34; maxpoints=\&#34;5\&#34;\n                                                     sort=\&#34;serie1-1\&#34;\u003e\n                                        \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#000000\&#34;\n                                                         scientific-display=\&#34;true\&#34;\u003e\n                                        \u003c/ods-chart-serie\u003e\n                                    \u003c/ods-chart-query\u003e\n                                \u003c/ods-chart\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci\n                                            class=\&#34;fa fa-long-arrow-right\&#34;\n                                            aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;md:cell-full box white flat\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Répartis en grandes catégories\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    La Base Permanente des Équipements est réparti en 7 grands domaines : services aux\n                                    particuliers ; commerces ; enseignement ; santé ; transports et déplacements ;\n                                    sports, loisirs et culture ; tourisme.\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                \u003cods-chart class=\&#34;medium-chart\&#34; labels-x-length=\&#34;30\&#34; align-month=\&#34;true\&#34;\u003e\n                                    \u003cods-chart-query context=\&#34;ctx1\&#34; field-x=\&#34;category\&#34; maxpoints=\&#34;0\&#34; sort=\&#34;serie1-1\&#34;\n                                                     category-colors=\&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}\&#34;\u003e\n                                        \u003cods-chart-serie chart-type=\&#34;treemap\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;range-PiYG\&#34;\n                                                         scientific-display=\&#34;false\&#34;\u003e\n                                        \u003c/ods-chart-serie\u003e\n                                    \u003c/ods-chart-query\u003e\n                                \u003c/ods-chart\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci class=\&#34;fa fa-long-arrow-right\&#34;\n                                                                                        aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n\n                \u003ch2\u003e\n                    Observons ses deux principales catégories\n                \u003c/h2\u003e\n\n                \u003cdiv class=\&#34;grid lg:grid-4 gap-6\&#34;\u003e\n                    \u003cdiv class=\&#34;lg:cell-2 lg:cell-order-1 box white flat colored services\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Les Services aux particuliers\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    qui représentent\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle centered\&#34;\u003e\n                                \u003cp class=\&#34;value\&#34;\u003e\n                                    {{ (values.services / values.nbequip * 100) | number : 1 }} %\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci class=\&#34;fa fa-long-arrow-right\&#34;\n                                                                                        aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;lg:cell-2 lg:cell-order-3 box white flat colored services\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Principaux équipement de services aux particuliers\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    Description du TOP 20 de cette catégorie\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                \u003cods-chart class=\&#34;medium-chart\&#34; labels-x-length=\&#34;40\&#34; align-month=\&#34;true\&#34;\u003e\n                                    \u003cods-chart-query context=\&#34;ctx2\&#34; field-x=\&#34;equipment_name\&#34; maxpoints=\&#34;20\&#34;\n                                                     sort=\&#34;serie1-1\&#34;\u003e\n                                        \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#ff714d\&#34;\n                                                         scientific-display=\&#34;true\&#34; label-y=\&#34;Nb. équipements\&#34;\u003e\n                                        \u003c/ods-chart-serie\u003e\n                                    \u003c/ods-chart-query\u003e\n                                \u003c/ods-chart\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci class=\&#34;fa fa-long-arrow-right\&#34;\n                                                                                        aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;lg:cell-2 lg:cell-order-2 box white flat colored sante\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    et la Santé\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    qui représente\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle centered\&#34;\u003e\n                                \u003cp class=\&#34;value\&#34;\u003e\n                                    {{ (values.sante / values.nbequip * 100) | number : 1 }} %\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci class=\&#34;fa fa-long-arrow-right\&#34;\n                                                                                        aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                    \u003cdiv class=\&#34;lg:cell-2 lg:cell-order-4 box white flat colored sante\&#34;\u003e\n                        \u003cdiv class=\&#34;advanced-kpi\&#34;\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--top\&#34;\u003e\n                                \u003ch3 class=\&#34;title\&#34;\u003e\n                                    Principaux équipements de Santé\n                                \u003c/h3\u003e\n                                \u003cp class=\&#34;description\&#34;\u003e\n                                    Description du TOP 20 de cette catégorie\n                                \u003c/p\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--middle\&#34;\u003e\n                                \u003cods-chart class=\&#34;medium-chart\&#34; labels-x-length=\&#34;40\&#34; align-month=\&#34;true\&#34;\u003e\n                                    \u003cods-chart-query context=\&#34;ctx3\&#34; field-x=\&#34;equipment_name\&#34; maxpoints=\&#34;20\&#34;\n                                                     sort=\&#34;serie1-1\&#34;\u003e\n                                        \u003cods-chart-serie chart-type=\&#34;bar\&#34; function-y=\&#34;COUNT\&#34; color=\&#34;#25c9ff\&#34;\n                                                         scientific-display=\&#34;true\&#34; label-y=\&#34;Nb. équipements\&#34;\u003e\n                                        \u003c/ods-chart-serie\u003e\n                                    \u003c/ods-chart-query\u003e\n                                \u003c/ods-chart\u003e\n                            \u003c/div\u003e\n                            \u003cdiv class=\&#34;advanced-kpi--bottom\&#34;\u003e\n                                \u003cdiv class=\&#34;advanced-kpi--bottom-second-stage\&#34;\u003e\n                                    \u003cspan class=\&#34;date\&#34;\u003e{{ ctx1.dataset.metas.data_processed | date }}\u003c/span\u003e\n                                    \u003ca class=\&#34;source\&#34;\n                                       href=\&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}\&#34;\n                                       title=\&#34;{{ ctx1.dataset.metas.title }}\&#34;\u003eSource \u003ci class=\&#34;fa fa-long-arrow-right\&#34;\n                                                                                        aria-hidden=\&#34;true\&#34;\u003e\u003c/i\u003e\n                                    \u003c/a\u003e\n                                \u003c/div\u003e\n                            \u003c/div\u003e\n                        \u003c/div\u003e\n                    \u003c/div\u003e\n                \u003c/div\u003e\n            \u003c/div\u003e\n        \u003c/section\u003e\n    \u003c/ods-dataset-context\u003e\n\u003c/section\u003e\u003c/div\u003e&#34;,
                 "css": &#34;/***** Observatory *****/\n:root {\n    --boxes-radius: 6px;\n}\n\nmain {\n    margin: 0;\n}\n\n.observatory {\n    background-color: var(--page-background);\n    /* prerequisite for full height modal bar */\n    position: relative;\n}\n\n/***** GRID ******/\n[class^=grid] {\n    display: grid;\n    grid-gap: 1rem;\n}\n\n@media screen and (min-width: 768px), print {\n\n    .md\\:grid-4 {\n        grid-template-columns: repeat(4, minmax(0, 1fr));\n    }\n}\n@media screen and (min-width: 1024px), print {\n\n    .lg\\:grid-4 {\n        grid-template-columns: repeat(4, minmax(0, 1fr));\n    }\n}\n\n[class*=\&#34;:cell\&#34;] {\n    display: flex;\n    flex-direction: column;\n    /*grid-column: 1 / -1;*/\n    justify-content: stretch;\n}\n@media screen and (min-width: 768px), print {\n\n    .md\\:cell-full {\n        grid-column: 1/-1;\n    }\n\n    .md\\:cell-2 {\n        grid-column: span 2/span 2;\n    }\n}\n@media screen and (min-width: 1024px), print {\n\n    .lg\\:cell-2 {\n        grid-column: span 2/span 2;\n    }\n\n    .lg\\:cell-order-1 {\n        order: 1;\n    }\n\n    .lg\\:cell-order-2 {\n        order: 2;\n    }\n\n    .lg\\:cell-order-3 {\n        order: 3;\n    }\n\n    .lg\\:cell-order-4 {\n        order: 4;\n    }\n}\n\n.gap-6,\n.gap-6 [class^=grid] {\n    gap: 1.5rem;\n}\n\n\nsection.head {\n    background-color: white;\n    padding: 26px 0;\n}\n\n.filter-block {\n    position: sticky;\n    top: 0;\n    z-index: 1;\n    box-shadow: 0px 15px 10px -15px #2b2b2b;\n    margin-bottom: 35px;\n    background-color: black;\n}\n.filter-block .container {\n    display: flex;\n    align-items: center;\n    padding: 18px 0;\n}\n.filter-block button {\n    padding: 0 13px;\n    margin: 0 10px;\n    border-radius: 100000px;\n    display: flex;\n    align-items: center;\n    background-color: white;\n    color: black;\n    border: 1px solid black;\n    height: 36px;\n    min-width: max-content;\n}\n.filter-block button:hover {\n    filter: invert();\n}\n.filter-block button svg {\n    margin-right: 6px;\n}\n\n.titre {\n    font-size: 37px;\n    margin: 26px 0 6px;\n}\n\n.edito {\n    margin: 0;\n    font-size: 19px;\n}\n\n.edito q {\n    font-style: italic;\n}\n\n#resume {\n    font-size: 1.1em;\n    line-height: 1.8em;\n    margin-top: 26px;\n}\n@media screen and (min-width: 640px) {\n    #resume {\n        margin-right: 33%;\n    }\n}\n\n/* BACKDROP (black screen when modal active) */\n.backdrop {\n    visibility: hidden;\n    opacity: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 900;\n    background-color: #000;\n    cursor: default;\n    -webkit-transition: visibility 0.5s, opacity 0.5s;\n    transition: visibility 0.5s, opacity 0.5s;\n}\n\n.backdrop-active {\n    visibility: visible;\n    opacity: 0.6;\n    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */\n}\n\n/* MODAL */\n.cl-modal {\n    display: flex;\n    flex-direction: column;\n    position: fixed;\n    top: 0;\n    right: -400px;\n    bottom: 0;\n    width: 400px;\n    background-color: white;\n    z-index: 1000;\n    overflow: hidden;\n    /* Disable horizontal scroll */\n    transition: ease-in 0.3s;\n}\n\n.cl-modal-active {\n    right: 0;\n}\n\n/* specific because ods-widgets are loaded inside */\n.cl-modal__content {\n    width: 400px;\n}\n\n@media (max-width: 420px) {\n    .cl-modal-active {\n        width: 100%;\n    }\n\n    .cl-modal__content {\n        width: 100vw;\n    }\n}\n.cl-modal__header {\n    min-height: 35px;\n    background-color: white;\n    padding: 0 10px;\n    display: flex;\n    align-items: center;\n    justify-content: start;\n    opacity: 0;\n    transition: opacity 0s;\n}\n.cl-modal__header .closebtn {\n    padding: 0 13px;\n    color: black;\n}\n\n.cl-modal-active .cl-modal__header {\n    opacity: 1;\n    transition-delay: 0.3s;\n}\n\n/* CONTENT OF THE MODAL */\n/* HEADER / UPPER PART */\n.cl-modal__header {\n    border-bottom: 1px solid lightgrey;\n}\n\n/* THEN THE MIDDLE / CONTENT */\n.cl-modal__content {\n    height: 100%;\n    overflow-y: auto;\n    padding: 25px;\n    opacity: 0;\n    transition: opacity 0s;\n}\n\n/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal\nie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content\nthis trick is very important to avoid the browser the resize all the content during the modal opening */\n.cl-modal-active .cl-modal__content {\n    opacity: 1;\n    transition-delay: 0.3s;\n}\n\n/** FILTER SUMMARY */\nul.odswidget.odswidget-filter-summary {\n    font-size: 1em;\n    margin-left: 13px;\n    position: relative;\n}\n\n@media (min-width: 420px) {\n    ul.odswidget.odswidget-filter-summary {\n        display: flex;\n        flex-wrap: wrap;\n        align-items: center;\n    }\n}\nli.odswidget-filter-summary__active-filter,\nli.odswidget-filter-summary__clear-all {\n    border-radius: 3px;\n    margin: 2px 4px;\n    padding: 0;\n}\n\nli.odswidget-filter-summary__active-filter {\n    color: white;\n}\n\n.odswidget-filter-summary__active-filter-label {\n    color: black;\n    font-size: 1rem;\n}\n\na.odswidget-filter-summary__active-filter-link,\na.odswidget-clear-all-filters {\n    border-left: none;\n    margin: 0;\n    padding: 2px 4px 2px 2px;\n    display: flex;\n    align-items: center;\n}\n\na.odswidget-clear-all-filters {\n    align-items: center;\n    color: white;\n    opacity: 0.8;\n}\na.odswidget-clear-all-filters:hover {\n    color: white;\n    opacity: 1;\n}\n\na.odswidget-clear-all-filters i {\n    margin-right: 3px;\n}\n\n.box {\n    position: relative;\n    padding: 13px;\n}\n.box.colored {\n    padding-top: calc(13px &#43; 9px);\n}\n.box.colored:before {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 9px;\n    content: \&#34;\&#34;;\n    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;\n}\n.box.colored.services:before {\n    background-color: #ff714d;\n}\n.box.colored.sante:before {\n    background-color: #25c9ff;\n}\n.box.white {\n    background-color: white;\n}\n.box.flat {\n    border: 1px solid #dfdfdf;\n    border-radius: var(--boxes-radius);\n}\n\n.advanced-kpi {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n\n.advanced-kpi--top .title {\n    font-size: 1.2em;\n    margin: 0 auto 6px;\n}\n.advanced-kpi--top .description {\n    margin: 0 auto;\n    color: #565656;\n    font-size: 1em;\n    font-weight: 400;\n}\n\n.advanced-kpi--middle {\n    display: flex;\n    flex-direction: column;\n    margin: 20px 0;\n}\n.advanced-kpi--middle.centered {\n    align-items: center;\n}\n.advanced-kpi--middle \u003e * {\n    margin: 5px 0;\n}\n.advanced-kpi--middle .value {\n    color: var(--highlight);\n    font-weight: 600;\n    font-size: 3rem;\n}\n\n.advanced-kpi--bottom {\n    font-size: 0.8em;\n}\n.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {\n    display: flex;\n    justify-content: space-between;\n}\n.advanced-kpi--bottom .source {\n    text-decoration: underline;\n    color: var(--links);\n}\n.advanced-kpi--bottom .source i {\n    margin-left: 6px;\n}\n.advanced-kpi--bottom .source:hover {\n    opacity: 0.65;\n}\n.advanced-kpi--bottom .source:hover i {\n    animation: bounce 0.7s ease infinite;\n}\n\n@keyframes bounce {\n    from {\n        margin-left: 6px;\n        margin-right: 0;\n    }\n    50% {\n        margin-left: 2px;\n        margin-right: 4px;\n    }\n    to {\n        margin-left: 6px;\n        margin-right: 0;\n    }\n}\n/* CHARTS */\n.ods-chart {\n    min-height: inherit;\n}\n\n.medium-chart {\n    height: 350px;\n}\n\n.small-chart {\n    height: 130px;\n}\n\n.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {\n    font-family: Gotham-book, Arial, sans-serif !important;\n}\n\n.ods-highcharts__tooltip {\n    align-items: center;\n}&#34;
               }'>
    </form>
</div>
<div class="ods-content">
    <div class="box-live-example"
      style="height: 800px;">
      <iframe id="iframe-css-grid--observatory-model"
              width="100%" height="100%"
              src="about:blank"
              srcdoc="
                <head>&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.css&#34;
/&gt;

&lt;!-- ODS Platform CSS - must be hosted on static : WIP --&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://s3-us-west-2.amazonaws.com/s.cdpn.io/4124551/ods.css&#34;
/&gt;
&lt;link
  rel=&#34;stylesheet&#34;
  href=&#34;https://codelibrary.opendatasoft.com/css/theme.css&#34;
/&gt;

&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.js&#34;&gt;&lt;/script&gt;
&lt;script src=&#34;//cdnjs.cloudflare.com/ajax/libs/angular-sanitize/1.8.2/angular-sanitize.min.js&#34;&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://static.opendatasoft.com/ods-widgets/latest-v2/ods-widgets.js&#34;
&gt;&lt;/script&gt;

&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/platform-filters.js&#34;
&gt;&lt;/script&gt;
&lt;script
  type=&#34;text/javascript&#34;
  src=&#34;https://codelibrary.opendatasoft.com/js/ods-catalog-card.js&#34;
&gt;&lt;/script&gt;

&lt;script type=&#34;text/javascript&#34;&gt;
  const sourceMonitoringInterceptor = $q =&gt; {
    return {
      request: config =&gt; {
        if (config.params)
          if (config.params.source) delete config.params.source;

        config.url = config.url.replace(
          &#34;ods-api-monitoring&#34;,
          &#34;monitoring-copy&#34;
        );
        return config;
      }
    };
  };

  angular
    .module(&#34;ods-widgets&#34;)
    .config(function(ODSWidgetsConfigProvider, $httpProvider) {
      ODSWidgetsConfigProvider.setConfig({
        defaultDomain: &#34;https://userclub.opendatasoft.com/&#34;,
        basemaps: [
          {
            provider: &#34;jawg.light&#34;,
            label: &#34;Jawg Light&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;
          },
          {
            provider: &#34;jawg.streets&#34;,
            label: &#34;Jawg Streets&#34;,
            jawg_apikey: &#34;opendatasoft-community&#34;,
            id: &#34;streets&#34;
          }
        ],
        themes: {
          default: {
            url: &#34;/img/ods.svg&#34;
          },
          Santé: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/doctors.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Culture, Patrimoine&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/culture.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Éducation, Formation, Recherche, Enseignement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/college.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Environment: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/leaf.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Transports, Déplacements&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/train_station.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Aménagement du territoire, Urbanisme, Bâtiments, Équipements, Logement&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/townplanning.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Économie, Business, PME, Développement économique, Emploi&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/economy.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Administration, Gouvernement, Finances publiques, Citoyenneté&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/administration.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Justice, Sécurité, Police, Crime&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/court.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Sport, Loisirs&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/soccer.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Hébergement, Restauration&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/accommodation.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          &#34;Services, Social&#34;: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/social.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Checklist: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/copyshop.svg&#34;,
            color: &#34;#1446A0&#34;
          },
          Usages: {
            url:
              &#34;https://userclub.opendatasoft.com/static/pictos/img/set-v3/pictos/bike.svg&#34;,
            color: &#34;#1446A0&#34;
          }
        },
        mapPrependAttribution: &#34;Jawg apikey NOT suitable for production&#34;
      });
      $httpProvider.interceptors.push(sourceMonitoringInterceptor);
    });
&lt;/script&gt;
</head>
                <base href='https://userclub.opendatasoft.com/'>
                <body>
                <div ng-app='ods-widgets'>&lt;div ng-app=&#34;ods-widgets&#34;&gt;
&lt;section class=&#34;observatory&#34; ng-init=&#34;values.modalswitchstatus = false&#34;&gt;
    &lt;div class=&#34;backdrop&#34;
         ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;
         ng-class=&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}&#34;&gt;
    &lt;/div&gt;

    &lt;ods-dataset-context context=&#34;ctx1,ctx2,ctx3&#34;
                         ctx1-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx1-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true}&#34;
                         ctx1-domain=&#34;public&#34;
                         ctx2-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx2-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}&#34;
                         ctx2-domain=&#34;public&#34;
                         ctx3-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx3-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}&#34;
                         ctx3-domain=&#34;public&#34;&gt;

        {{
        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        &#34;&#34;
        }}

        &lt;!-- Analyses --&gt;
        &lt;span ods-aggregation=&#34;agg&#34;
              ods-aggregation-context=&#34;ctx1&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.nbequip = agg ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;services&#34;
              ods-aggregation-context=&#34;ctx2&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.services = services ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;sante&#34;
              ods-aggregation-context=&#34;ctx3&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.sante = sante ; &#39;&#39; }}
        &lt;/span&gt;


        &lt;!-- THE RIGHT MODAL --&gt;
        &lt;div class=&#34;rightmodal&#34;&gt;
            &lt;div class=&#34;cl-modal&#34;
                 ng-class=&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}&#34;&gt;
                &lt;div class=&#34;cl-modal__header&#34;
                     ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;a href=&#34;#&#34;
                       class=&#34;closebtn&#34;&gt;
                        Fermer &lt;i class=&#34;fa fa-times-circle&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&#34;cl-modal__content&#34;&gt;
                    &lt;ods-facets context=&#34;ctx1&#34;&gt;
                        &lt;h3&gt;
                            Région
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;reg_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Département
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;dep_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Code DROM
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;com_arm_area_code&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            EPCI
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;epci_name&#34;&gt;&lt;/ods-facet&gt;
                    &lt;/ods-facets&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;section class=&#34;head&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;h1 class=&#34;titre&#34;&gt;
                    Un modèle d&#39;observation des équipements en France
                &lt;/h1&gt;
                &lt;div class=&#34;edito&#34;&gt;
                    &lt;p&gt;Bien que .. &lt;q&gt;Il n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.&lt;/q&gt; Paul Éluard
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div id=&#34;resume&#34;&gt;
                    &lt;p&gt;
                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base
                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.
                    &lt;/p&gt;
                    &lt;p&gt;
                        La classification des équipements en gammes a pour objectif de réunir des équipements qui
                        présentent
                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes
                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant
                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
        &lt;section class=&#34;filter-block&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;button ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;24&#34; height=&#34;24&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34;
                         stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;
                         class=&#34;feather feather-filter&#34;&gt;
                        &lt;polygon points=&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3&#34;&gt;&lt;/polygon&gt;
                    &lt;/svg&gt;
                    Filtrer les données
                &lt;/button&gt;
                &lt;ods-filter-summary context=&#34;ctx1&#34;&gt;
                    {{ refinements }}
                &lt;/ods-filter-summary&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;section&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;div class=&#34;grid md:grid-4 gap-6&#34;&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Nombre d&#39;équipements en 2019
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Données INSEE issu de la BPE (Base permanente des équipements)
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ values.nbequip | number }}
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;
                         ng-if=&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Top 5 Région
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Nombre d&#39;équipements des 5 régions les mieux équipées
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                           scientific-display=&#34;true&#34;
                                           display-legend=&#34;false&#34;
                                           labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;reg_name&#34; maxpoints=&#34;5&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                         scientific-display=&#34;true&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                            class=&#34;fa fa-long-arrow-right&#34;
                                            aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;
                         ng-if=&#34;ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Top 5 Département
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Nombre d&#39;équipements des 5 départements les mieux équipées
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                           scientific-display=&#34;true&#34;
                                           display-legend=&#34;false&#34;
                                           labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;dep_name&#34; maxpoints=&#34;5&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                         scientific-display=&#34;true&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                            class=&#34;fa fa-long-arrow-right&#34;
                                            aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-full box white flat&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Répartis en grandes catégories
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    La Base Permanente des Équipements est réparti en 7 grands domaines : services aux
                                    particuliers ; commerces ; enseignement ; santé ; transports et déplacements ;
                                    sports, loisirs et culture ; tourisme.
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;30&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;category&#34; maxpoints=&#34;0&#34; sort=&#34;serie1-1&#34;
                                                     category-colors=&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;treemap&#34; function-y=&#34;COUNT&#34; color=&#34;range-PiYG&#34;
                                                         scientific-display=&#34;false&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

                &lt;h2&gt;
                    Observons ses deux principales catégories
                &lt;/h2&gt;

                &lt;div class=&#34;grid lg:grid-4 gap-6&#34;&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-1 box white flat colored services&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Les Services aux particuliers
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    qui représentent
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ (values.services / values.nbequip * 100) | number : 1 }} %
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-3 box white flat colored services&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Principaux équipement de services aux particuliers
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Description du TOP 20 de cette catégorie
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#ff714d&#34;
                                                         scientific-display=&#34;true&#34; label-y=&#34;Nb. équipements&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-2 box white flat colored sante&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    et la Santé
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    qui représente
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ (values.sante / values.nbequip * 100) | number : 1 }} %
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-4 box white flat colored sante&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Principaux équipements de Santé
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Description du TOP 20 de cette catégorie
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx3&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#25c9ff&#34;
                                                         scientific-display=&#34;true&#34; label-y=&#34;Nb. équipements&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/ods-dataset-context&gt;
&lt;/section&gt;&lt;/div&gt;</div>
                <style type='text/css'>
                    /***** Observatory *****/
:root {
    --boxes-radius: 6px;
}

main {
    margin: 0;
}

.observatory {
    background-color: var(--page-background);
    /* prerequisite for full height modal bar */
    position: relative;
}

/***** GRID ******/
[class^=grid] {
    display: grid;
    grid-gap: 1rem;
}

@media screen and (min-width: 768px), print {

    .md\:grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}
@media screen and (min-width: 1024px), print {

    .lg\:grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}

[class*=&#34;:cell&#34;] {
    display: flex;
    flex-direction: column;
    /*grid-column: 1 / -1;*/
    justify-content: stretch;
}
@media screen and (min-width: 768px), print {

    .md\:cell-full {
        grid-column: 1/-1;
    }

    .md\:cell-2 {
        grid-column: span 2/span 2;
    }
}
@media screen and (min-width: 1024px), print {

    .lg\:cell-2 {
        grid-column: span 2/span 2;
    }

    .lg\:cell-order-1 {
        order: 1;
    }

    .lg\:cell-order-2 {
        order: 2;
    }

    .lg\:cell-order-3 {
        order: 3;
    }

    .lg\:cell-order-4 {
        order: 4;
    }
}

.gap-6,
.gap-6 [class^=grid] {
    gap: 1.5rem;
}


section.head {
    background-color: white;
    padding: 26px 0;
}

.filter-block {
    position: sticky;
    top: 0;
    z-index: 1;
    box-shadow: 0px 15px 10px -15px #2b2b2b;
    margin-bottom: 35px;
    background-color: black;
}
.filter-block .container {
    display: flex;
    align-items: center;
    padding: 18px 0;
}
.filter-block button {
    padding: 0 13px;
    margin: 0 10px;
    border-radius: 100000px;
    display: flex;
    align-items: center;
    background-color: white;
    color: black;
    border: 1px solid black;
    height: 36px;
    min-width: max-content;
}
.filter-block button:hover {
    filter: invert();
}
.filter-block button svg {
    margin-right: 6px;
}

.titre {
    font-size: 37px;
    margin: 26px 0 6px;
}

.edito {
    margin: 0;
    font-size: 19px;
}

.edito q {
    font-style: italic;
}

#resume {
    font-size: 1.1em;
    line-height: 1.8em;
    margin-top: 26px;
}
@media screen and (min-width: 640px) {
    #resume {
        margin-right: 33%;
    }
}

/* BACKDROP (black screen when modal active) */
.backdrop {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 900;
    background-color: #000;
    cursor: default;
    -webkit-transition: visibility 0.5s, opacity 0.5s;
    transition: visibility 0.5s, opacity 0.5s;
}

.backdrop-active {
    visibility: visible;
    opacity: 0.6;
    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */
}

/* MODAL */
.cl-modal {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -400px;
    bottom: 0;
    width: 400px;
    background-color: white;
    z-index: 1000;
    overflow: hidden;
    /* Disable horizontal scroll */
    transition: ease-in 0.3s;
}

.cl-modal-active {
    right: 0;
}

/* specific because ods-widgets are loaded inside */
.cl-modal__content {
    width: 400px;
}

@media (max-width: 420px) {
    .cl-modal-active {
        width: 100%;
    }

    .cl-modal__content {
        width: 100vw;
    }
}
.cl-modal__header {
    min-height: 35px;
    background-color: white;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: start;
    opacity: 0;
    transition: opacity 0s;
}
.cl-modal__header .closebtn {
    padding: 0 13px;
    color: black;
}

.cl-modal-active .cl-modal__header {
    opacity: 1;
    transition-delay: 0.3s;
}

/* CONTENT OF THE MODAL */
/* HEADER / UPPER PART */
.cl-modal__header {
    border-bottom: 1px solid lightgrey;
}

/* THEN THE MIDDLE / CONTENT */
.cl-modal__content {
    height: 100%;
    overflow-y: auto;
    padding: 25px;
    opacity: 0;
    transition: opacity 0s;
}

/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal
ie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content
this trick is very important to avoid the browser the resize all the content during the modal opening */
.cl-modal-active .cl-modal__content {
    opacity: 1;
    transition-delay: 0.3s;
}

/** FILTER SUMMARY */
ul.odswidget.odswidget-filter-summary {
    font-size: 1em;
    margin-left: 13px;
    position: relative;
}

@media (min-width: 420px) {
    ul.odswidget.odswidget-filter-summary {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
}
li.odswidget-filter-summary__active-filter,
li.odswidget-filter-summary__clear-all {
    border-radius: 3px;
    margin: 2px 4px;
    padding: 0;
}

li.odswidget-filter-summary__active-filter {
    color: white;
}

.odswidget-filter-summary__active-filter-label {
    color: black;
    font-size: 1rem;
}

a.odswidget-filter-summary__active-filter-link,
a.odswidget-clear-all-filters {
    border-left: none;
    margin: 0;
    padding: 2px 4px 2px 2px;
    display: flex;
    align-items: center;
}

a.odswidget-clear-all-filters {
    align-items: center;
    color: white;
    opacity: 0.8;
}
a.odswidget-clear-all-filters:hover {
    color: white;
    opacity: 1;
}

a.odswidget-clear-all-filters i {
    margin-right: 3px;
}

.box {
    position: relative;
    padding: 13px;
}
.box.colored {
    padding-top: calc(13px &#43; 9px);
}
.box.colored:before {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 9px;
    content: &#34;&#34;;
    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;
}
.box.colored.services:before {
    background-color: #ff714d;
}
.box.colored.sante:before {
    background-color: #25c9ff;
}
.box.white {
    background-color: white;
}
.box.flat {
    border: 1px solid #dfdfdf;
    border-radius: var(--boxes-radius);
}

.advanced-kpi {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.advanced-kpi--top .title {
    font-size: 1.2em;
    margin: 0 auto 6px;
}
.advanced-kpi--top .description {
    margin: 0 auto;
    color: #565656;
    font-size: 1em;
    font-weight: 400;
}

.advanced-kpi--middle {
    display: flex;
    flex-direction: column;
    margin: 20px 0;
}
.advanced-kpi--middle.centered {
    align-items: center;
}
.advanced-kpi--middle &gt; * {
    margin: 5px 0;
}
.advanced-kpi--middle .value {
    color: var(--highlight);
    font-weight: 600;
    font-size: 3rem;
}

.advanced-kpi--bottom {
    font-size: 0.8em;
}
.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {
    display: flex;
    justify-content: space-between;
}
.advanced-kpi--bottom .source {
    text-decoration: underline;
    color: var(--links);
}
.advanced-kpi--bottom .source i {
    margin-left: 6px;
}
.advanced-kpi--bottom .source:hover {
    opacity: 0.65;
}
.advanced-kpi--bottom .source:hover i {
    animation: bounce 0.7s ease infinite;
}

@keyframes bounce {
    from {
        margin-left: 6px;
        margin-right: 0;
    }
    50% {
        margin-left: 2px;
        margin-right: 4px;
    }
    to {
        margin-left: 6px;
        margin-right: 0;
    }
}
/* CHARTS */
.ods-chart {
    min-height: inherit;
}

.medium-chart {
    height: 350px;
}

.small-chart {
    height: 130px;
}

.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {
    font-family: Gotham-book, Arial, sans-serif !important;
}

.ods-highcharts__tooltip {
    align-items: center;
}
                </style>
                </body>
              ">
      </iframe>
      <div class="show-code buttons has-addons">
          <button class="button is-light">
            <span>Show code</span>
          </button>
          <button class="button is-light"
             target="_blank"
             aria-role="link"
             rel="noopener"
             title="Edit on CodePen, open a new tab"
             onclick="document.getElementById('form-css-grid--observatory-model').submit()">
              <span>Edit on Codepen</span>
              <span class="icon is-small">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                  <use xlink:href="#external"></use>
                </svg>
              </span>
          </button>
      </div>
    </div>
    <div class="box-code js-tabs is-hidden">
        <nav class="level is-mobile">
            <div class="level-left">
                <div class="level-item">
                    <div class="buttons has-addons js-tablist">
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-css-grid--observatory-model-html-content"
                        >
                          HTML
                        </a>
                        
                        <a
                          class="button is-primary is-outlined js-tablist__item js-tablist__link"
                          href="#code-css-grid--observatory-model-css-content"
                        >
                          CSS
                        </a>
                        
                    </div>
                </div>
            </div>
            
            <div class="level-right">
                <button class="copy-to-cc button is-primary is-outlined is-rounded has-tooltip-left"
                  data-tooltip="Copy to clipboard"
                  aria-role="button"
                  title="Edit on CodePen, open a new tab"
                >
                  <span class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#copy"></use>
                    </svg>
                  </span>
                </button>
                <button class="copied-to-cc button is-success is-outlined is-rounded has-tooltip-left is-hidden"
                  data-tooltip="Copied"
                  aria-role="button"
                  title="Copied"
                >
                  <figure class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                      <use xlink:href="#check"></use>
                    </svg>
                  </figure>
                </button>
            </div>
        </nav>
        <div class="tab-content">
            <div class="js-tabcontent"
                 id="code-css-grid--observatory-model-html-content"
                 data-clipboard="&lt;section class=&#34;observatory&#34; ng-init=&#34;values.modalswitchstatus = false&#34;&gt;
    &lt;div class=&#34;backdrop&#34;
         ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;
         ng-class=&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}&#34;&gt;
    &lt;/div&gt;

    &lt;ods-dataset-context context=&#34;ctx1,ctx2,ctx3&#34;
                         ctx1-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx1-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true}&#34;
                         ctx1-domain=&#34;public&#34;
                         ctx2-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx2-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}&#34;
                         ctx2-domain=&#34;public&#34;
                         ctx3-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx3-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}&#34;
                         ctx3-domain=&#34;public&#34;&gt;

        {{
        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        &#34;&#34;
        }}

        &lt;!-- Analyses --&gt;
        &lt;span ods-aggregation=&#34;agg&#34;
              ods-aggregation-context=&#34;ctx1&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.nbequip = agg ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;services&#34;
              ods-aggregation-context=&#34;ctx2&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.services = services ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;sante&#34;
              ods-aggregation-context=&#34;ctx3&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.sante = sante ; &#39;&#39; }}
        &lt;/span&gt;


        &lt;!-- THE RIGHT MODAL --&gt;
        &lt;div class=&#34;rightmodal&#34;&gt;
            &lt;div class=&#34;cl-modal&#34;
                 ng-class=&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}&#34;&gt;
                &lt;div class=&#34;cl-modal__header&#34;
                     ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;a href=&#34;#&#34;
                       class=&#34;closebtn&#34;&gt;
                        Fermer &lt;i class=&#34;fa fa-times-circle&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&#34;cl-modal__content&#34;&gt;
                    &lt;ods-facets context=&#34;ctx1&#34;&gt;
                        &lt;h3&gt;
                            Région
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;reg_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Département
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;dep_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Code DROM
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;com_arm_area_code&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            EPCI
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;epci_name&#34;&gt;&lt;/ods-facet&gt;
                    &lt;/ods-facets&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;section class=&#34;head&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;h1 class=&#34;titre&#34;&gt;
                    Un modèle d&#39;observation des équipements en France
                &lt;/h1&gt;
                &lt;div class=&#34;edito&#34;&gt;
                    &lt;p&gt;Bien que .. &lt;q&gt;Il n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.&lt;/q&gt; Paul Éluard
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div id=&#34;resume&#34;&gt;
                    &lt;p&gt;
                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base
                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.
                    &lt;/p&gt;
                    &lt;p&gt;
                        La classification des équipements en gammes a pour objectif de réunir des équipements qui
                        présentent
                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes
                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant
                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
        &lt;section class=&#34;filter-block&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;button ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;24&#34; height=&#34;24&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34;
                         stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;
                         class=&#34;feather feather-filter&#34;&gt;
                        &lt;polygon points=&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3&#34;&gt;&lt;/polygon&gt;
                    &lt;/svg&gt;
                    Filtrer les données
                &lt;/button&gt;
                &lt;ods-filter-summary context=&#34;ctx1&#34;&gt;
                    {{ refinements }}
                &lt;/ods-filter-summary&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;section&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;div class=&#34;grid md:grid-4 gap-6&#34;&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Nombre d&#39;équipements en 2019
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Données INSEE issu de la BPE (Base permanente des équipements)
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ values.nbequip | number }}
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;
                         ng-if=&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Top 5 Région
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Nombre d&#39;équipements des 5 régions les mieux équipées
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                           scientific-display=&#34;true&#34;
                                           display-legend=&#34;false&#34;
                                           labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;reg_name&#34; maxpoints=&#34;5&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                         scientific-display=&#34;true&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                            class=&#34;fa fa-long-arrow-right&#34;
                                            aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;
                         ng-if=&#34;ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Top 5 Département
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Nombre d&#39;équipements des 5 départements les mieux équipées
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                           scientific-display=&#34;true&#34;
                                           display-legend=&#34;false&#34;
                                           labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;dep_name&#34; maxpoints=&#34;5&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                         scientific-display=&#34;true&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                            class=&#34;fa fa-long-arrow-right&#34;
                                            aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-full box white flat&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Répartis en grandes catégories
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    La Base Permanente des Équipements est réparti en 7 grands domaines : services aux
                                    particuliers ; commerces ; enseignement ; santé ; transports et déplacements ;
                                    sports, loisirs et culture ; tourisme.
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;30&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;category&#34; maxpoints=&#34;0&#34; sort=&#34;serie1-1&#34;
                                                     category-colors=&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;treemap&#34; function-y=&#34;COUNT&#34; color=&#34;range-PiYG&#34;
                                                         scientific-display=&#34;false&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

                &lt;h2&gt;
                    Observons ses deux principales catégories
                &lt;/h2&gt;

                &lt;div class=&#34;grid lg:grid-4 gap-6&#34;&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-1 box white flat colored services&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Les Services aux particuliers
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    qui représentent
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ (values.services / values.nbequip * 100) | number : 1 }} %
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-3 box white flat colored services&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Principaux équipement de services aux particuliers
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Description du TOP 20 de cette catégorie
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#ff714d&#34;
                                                         scientific-display=&#34;true&#34; label-y=&#34;Nb. équipements&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-2 box white flat colored sante&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    et la Santé
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    qui représente
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ (values.sante / values.nbequip * 100) | number : 1 }} %
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-4 box white flat colored sante&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Principaux équipements de Santé
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Description du TOP 20 de cette catégorie
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx3&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#25c9ff&#34;
                                                         scientific-display=&#34;true&#34; label-y=&#34;Nb. équipements&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/ods-dataset-context&gt;
&lt;/section&gt;"
                 role="tabpanel">
                <div class="highlight">
                    <pre class="language-html" data-lang="html"><code>&lt;section class=&#34;observatory&#34; ng-init=&#34;values.modalswitchstatus = false&#34;&gt;
    &lt;div class=&#34;backdrop&#34;
         ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;
         ng-class=&#34;{&#39;backdrop-active&#39;:values.modalswitchstatus}&#34;&gt;
    &lt;/div&gt;

    &lt;ods-dataset-context context=&#34;ctx1,ctx2,ctx3&#34;
                         ctx1-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx1-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true}&#34;
                         ctx1-domain=&#34;public&#34;
                         ctx2-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx2-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Services aux particuliers&#39;}&#34;
                         ctx2-domain=&#34;public&#34;
                         ctx3-dataset=&#34;buildingref-france-bpe-all-geolocated&#34;
                         ctx3-parameters=&#34;{&#39;disjunctive.epci_name&#39;:true,&#39;refine.category&#39;:&#39;Santé&#39;}&#34;
                         ctx3-domain=&#34;public&#34;&gt;

        {{
        ctx2.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx3.parameters[&#39;refine.reg_name&#39;] = ctx1.parameters[&#39;refine.reg_name&#39;] ;
        ctx2.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx3.parameters[&#39;refine.dep_name&#39;] = ctx1.parameters[&#39;refine.dep_name&#39;] ;
        ctx2.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx3.parameters[&#39;refine.com_arm_area_code&#39;] = ctx1.parameters[&#39;refine.com_arm_area_code&#39;] ;
        ctx2.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        ctx3.parameters[&#39;refine.epci_name&#39;] = ctx1.parameters[&#39;refine.epci_name&#39;] ;
        &#34;&#34;
        }}

        &lt;!-- Analyses --&gt;
        &lt;span ods-aggregation=&#34;agg&#34;
              ods-aggregation-context=&#34;ctx1&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.nbequip = agg ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;services&#34;
              ods-aggregation-context=&#34;ctx2&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.services = services ; &#39;&#39; }}
        &lt;/span&gt;
        &lt;span ods-aggregation=&#34;sante&#34;
              ods-aggregation-context=&#34;ctx3&#34;
              ods-aggregation-function=&#34;COUNT&#34;&gt;
          {{ values.sante = sante ; &#39;&#39; }}
        &lt;/span&gt;


        &lt;!-- THE RIGHT MODAL --&gt;
        &lt;div class=&#34;rightmodal&#34;&gt;
            &lt;div class=&#34;cl-modal&#34;
                 ng-class=&#34;{&#39;cl-modal-active&#39;:values.modalswitchstatus}&#34;&gt;
                &lt;div class=&#34;cl-modal__header&#34;
                     ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;a href=&#34;#&#34;
                       class=&#34;closebtn&#34;&gt;
                        Fermer &lt;i class=&#34;fa fa-times-circle&#34; aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                    &lt;/a&gt;
                &lt;/div&gt;
                &lt;div class=&#34;cl-modal__content&#34;&gt;
                    &lt;ods-facets context=&#34;ctx1&#34;&gt;
                        &lt;h3&gt;
                            Région
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;reg_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Département
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;dep_name&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            Code DROM
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;com_arm_area_code&#34;&gt;&lt;/ods-facet&gt;
                        &lt;h3&gt;
                            EPCI
                        &lt;/h3&gt;
                        &lt;ods-facet name=&#34;epci_name&#34;&gt;&lt;/ods-facet&gt;
                    &lt;/ods-facets&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;

        &lt;section class=&#34;head&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;h1 class=&#34;titre&#34;&gt;
                    Un modèle d&#39;observation des équipements en France
                &lt;/h1&gt;
                &lt;div class=&#34;edito&#34;&gt;
                    &lt;p&gt;Bien que .. &lt;q&gt;Il n&#39;y a pas de modèle pour qui cherche ce qu&#39;il n&#39;a jamais vu.&lt;/q&gt; Paul Éluard
                    &lt;/p&gt;
                &lt;/div&gt;
                &lt;div id=&#34;resume&#34;&gt;
                    &lt;p&gt;
                        L&#39;objectif de la Base Permanente des Équipements (BPE) est de proposer annuellement une base
                        d&#39;équipements géolocalisés construite à partir de sources administratives diverses.
                    &lt;/p&gt;
                    &lt;p&gt;
                        La classification des équipements en gammes a pour objectif de réunir des équipements qui
                        présentent
                        des logiques d&#39;implantation voisines, en ce sens qu&#39;ils sont fréquemment présents dans les mêmes
                        communes. Ces regroupements permettent d&#39;élaborer des indicateurs synthétiques reflétant
                        l&#39;organisation hiérarchisée des territoires en termes de services à la population.
                    &lt;/p&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
        &lt;section class=&#34;filter-block&#34;&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;button ng-click=&#34;values.modalswitchstatus = !values.modalswitchstatus&#34;&gt;
                    &lt;svg xmlns=&#34;http://www.w3.org/2000/svg&#34; width=&#34;24&#34; height=&#34;24&#34; viewBox=&#34;0 0 24 24&#34; fill=&#34;none&#34;
                         stroke=&#34;currentColor&#34; stroke-width=&#34;2&#34; stroke-linecap=&#34;round&#34; stroke-linejoin=&#34;round&#34;
                         class=&#34;feather feather-filter&#34;&gt;
                        &lt;polygon points=&#34;22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3&#34;&gt;&lt;/polygon&gt;
                    &lt;/svg&gt;
                    Filtrer les données
                &lt;/button&gt;
                &lt;ods-filter-summary context=&#34;ctx1&#34;&gt;
                    {{ refinements }}
                &lt;/ods-filter-summary&gt;
            &lt;/div&gt;
        &lt;/section&gt;

        &lt;section&gt;
            &lt;div class=&#34;container&#34;&gt;
                &lt;div class=&#34;grid md:grid-4 gap-6&#34;&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Nombre d&#39;équipements en 2019
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Données INSEE issu de la BPE (Base permanente des équipements)
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ values.nbequip | number }}
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;
                         ng-if=&#34;!ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Top 5 Région
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Nombre d&#39;équipements des 5 régions les mieux équipées
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                           scientific-display=&#34;true&#34;
                                           display-legend=&#34;false&#34;
                                           labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;reg_name&#34; maxpoints=&#34;5&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                         scientific-display=&#34;true&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                            class=&#34;fa fa-long-arrow-right&#34;
                                            aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-2 box white flat&#34;
                         ng-if=&#34;ctx1.parameters[&#39;refine.reg_name&#39;]&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Top 5 Département
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Nombre d&#39;équipements des 5 départements les mieux équipées
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart style=&#34;height: 170px&#34; class=&#34;small-chart&#34; single-y-axis=&#34;true&#34;
                                           scientific-display=&#34;true&#34;
                                           display-legend=&#34;false&#34;
                                           labels-x-length=&#34;20&#34; align-month=&#34;false&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;dep_name&#34; maxpoints=&#34;5&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#000000&#34;
                                                         scientific-display=&#34;true&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i
                                            class=&#34;fa fa-long-arrow-right&#34;
                                            aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;md:cell-full box white flat&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Répartis en grandes catégories
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    La Base Permanente des Équipements est réparti en 7 grands domaines : services aux
                                    particuliers ; commerces ; enseignement ; santé ; transports et déplacements ;
                                    sports, loisirs et culture ; tourisme.
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;30&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx1&#34; field-x=&#34;category&#34; maxpoints=&#34;0&#34; sort=&#34;serie1-1&#34;
                                                     category-colors=&#34;{&#39;Services aux particuliers&#39;:&#39;#ff714d&#39;,&#39;Santé&#39;:&#39;#25c9ff&#39;,&#39;Commerces&#39;:&#39;#CCEFC2&#39;,&#39;Sports, loisirs et culture&#39;:&#39;#E5E2A7&#39;,&#39;Enseignement&#39;:&#39;#E9D9FF&#39;,&#39;Transports et déplacements&#39;:&#39;#FFFFFF&#39;,&#39;Tourisme&#39;:&#39;#F4C5C8&#39;}&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;treemap&#34; function-y=&#34;COUNT&#34; color=&#34;range-PiYG&#34;
                                                         scientific-display=&#34;false&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;

                &lt;h2&gt;
                    Observons ses deux principales catégories
                &lt;/h2&gt;

                &lt;div class=&#34;grid lg:grid-4 gap-6&#34;&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-1 box white flat colored services&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Les Services aux particuliers
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    qui représentent
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ (values.services / values.nbequip * 100) | number : 1 }} %
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-3 box white flat colored services&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Principaux équipement de services aux particuliers
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Description du TOP 20 de cette catégorie
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx2&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#ff714d&#34;
                                                         scientific-display=&#34;true&#34; label-y=&#34;Nb. équipements&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-2 box white flat colored sante&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    et la Santé
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    qui représente
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle centered&#34;&gt;
                                &lt;p class=&#34;value&#34;&gt;
                                    {{ (values.sante / values.nbequip * 100) | number : 1 }} %
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                    &lt;div class=&#34;lg:cell-2 lg:cell-order-4 box white flat colored sante&#34;&gt;
                        &lt;div class=&#34;advanced-kpi&#34;&gt;
                            &lt;div class=&#34;advanced-kpi--top&#34;&gt;
                                &lt;h3 class=&#34;title&#34;&gt;
                                    Principaux équipements de Santé
                                &lt;/h3&gt;
                                &lt;p class=&#34;description&#34;&gt;
                                    Description du TOP 20 de cette catégorie
                                &lt;/p&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--middle&#34;&gt;
                                &lt;ods-chart class=&#34;medium-chart&#34; labels-x-length=&#34;40&#34; align-month=&#34;true&#34;&gt;
                                    &lt;ods-chart-query context=&#34;ctx3&#34; field-x=&#34;equipment_name&#34; maxpoints=&#34;20&#34;
                                                     sort=&#34;serie1-1&#34;&gt;
                                        &lt;ods-chart-serie chart-type=&#34;bar&#34; function-y=&#34;COUNT&#34; color=&#34;#25c9ff&#34;
                                                         scientific-display=&#34;true&#34; label-y=&#34;Nb. équipements&#34;&gt;
                                        &lt;/ods-chart-serie&gt;
                                    &lt;/ods-chart-query&gt;
                                &lt;/ods-chart&gt;
                            &lt;/div&gt;
                            &lt;div class=&#34;advanced-kpi--bottom&#34;&gt;
                                &lt;div class=&#34;advanced-kpi--bottom-second-stage&#34;&gt;
                                    &lt;span class=&#34;date&#34;&gt;{{ ctx1.dataset.metas.data_processed | date }}&lt;/span&gt;
                                    &lt;a class=&#34;source&#34;
                                       href=&#34;{{ &#39;https://&#39; &#43; ctx1.dataset.metas.domain &#43; &#39;.opendatasoft.com/explore/dataset/&#39; &#43; ctx1.dataset.datasetid }}&#34;
                                       title=&#34;{{ ctx1.dataset.metas.title }}&#34;&gt;Source &lt;i class=&#34;fa fa-long-arrow-right&#34;
                                                                                        aria-hidden=&#34;true&#34;&gt;&lt;/i&gt;
                                    &lt;/a&gt;
                                &lt;/div&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/section&gt;
    &lt;/ods-dataset-context&gt;
&lt;/section&gt;</code></pre>
                </div>
            </div>
            
            <div class="js-tabcontent"
                 id="code-css-grid--observatory-model-css-content"
                 data-clipboard="/***** Observatory *****/
:root {
    --boxes-radius: 6px;
}

main {
    margin: 0;
}

.observatory {
    background-color: var(--page-background);
    /* prerequisite for full height modal bar */
    position: relative;
}

/***** GRID ******/
[class^=grid] {
    display: grid;
    grid-gap: 1rem;
}

@media screen and (min-width: 768px), print {

    .md\:grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}
@media screen and (min-width: 1024px), print {

    .lg\:grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}

[class*=&#34;:cell&#34;] {
    display: flex;
    flex-direction: column;
    /*grid-column: 1 / -1;*/
    justify-content: stretch;
}
@media screen and (min-width: 768px), print {

    .md\:cell-full {
        grid-column: 1/-1;
    }

    .md\:cell-2 {
        grid-column: span 2/span 2;
    }
}
@media screen and (min-width: 1024px), print {

    .lg\:cell-2 {
        grid-column: span 2/span 2;
    }

    .lg\:cell-order-1 {
        order: 1;
    }

    .lg\:cell-order-2 {
        order: 2;
    }

    .lg\:cell-order-3 {
        order: 3;
    }

    .lg\:cell-order-4 {
        order: 4;
    }
}

.gap-6,
.gap-6 [class^=grid] {
    gap: 1.5rem;
}


section.head {
    background-color: white;
    padding: 26px 0;
}

.filter-block {
    position: sticky;
    top: 0;
    z-index: 1;
    box-shadow: 0px 15px 10px -15px #2b2b2b;
    margin-bottom: 35px;
    background-color: black;
}
.filter-block .container {
    display: flex;
    align-items: center;
    padding: 18px 0;
}
.filter-block button {
    padding: 0 13px;
    margin: 0 10px;
    border-radius: 100000px;
    display: flex;
    align-items: center;
    background-color: white;
    color: black;
    border: 1px solid black;
    height: 36px;
    min-width: max-content;
}
.filter-block button:hover {
    filter: invert();
}
.filter-block button svg {
    margin-right: 6px;
}

.titre {
    font-size: 37px;
    margin: 26px 0 6px;
}

.edito {
    margin: 0;
    font-size: 19px;
}

.edito q {
    font-style: italic;
}

#resume {
    font-size: 1.1em;
    line-height: 1.8em;
    margin-top: 26px;
}
@media screen and (min-width: 640px) {
    #resume {
        margin-right: 33%;
    }
}

/* BACKDROP (black screen when modal active) */
.backdrop {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 900;
    background-color: #000;
    cursor: default;
    -webkit-transition: visibility 0.5s, opacity 0.5s;
    transition: visibility 0.5s, opacity 0.5s;
}

.backdrop-active {
    visibility: visible;
    opacity: 0.6;
    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */
}

/* MODAL */
.cl-modal {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -400px;
    bottom: 0;
    width: 400px;
    background-color: white;
    z-index: 1000;
    overflow: hidden;
    /* Disable horizontal scroll */
    transition: ease-in 0.3s;
}

.cl-modal-active {
    right: 0;
}

/* specific because ods-widgets are loaded inside */
.cl-modal__content {
    width: 400px;
}

@media (max-width: 420px) {
    .cl-modal-active {
        width: 100%;
    }

    .cl-modal__content {
        width: 100vw;
    }
}
.cl-modal__header {
    min-height: 35px;
    background-color: white;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: start;
    opacity: 0;
    transition: opacity 0s;
}
.cl-modal__header .closebtn {
    padding: 0 13px;
    color: black;
}

.cl-modal-active .cl-modal__header {
    opacity: 1;
    transition-delay: 0.3s;
}

/* CONTENT OF THE MODAL */
/* HEADER / UPPER PART */
.cl-modal__header {
    border-bottom: 1px solid lightgrey;
}

/* THEN THE MIDDLE / CONTENT */
.cl-modal__content {
    height: 100%;
    overflow-y: auto;
    padding: 25px;
    opacity: 0;
    transition: opacity 0s;
}

/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal
ie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content
this trick is very important to avoid the browser the resize all the content during the modal opening */
.cl-modal-active .cl-modal__content {
    opacity: 1;
    transition-delay: 0.3s;
}

/** FILTER SUMMARY */
ul.odswidget.odswidget-filter-summary {
    font-size: 1em;
    margin-left: 13px;
    position: relative;
}

@media (min-width: 420px) {
    ul.odswidget.odswidget-filter-summary {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
}
li.odswidget-filter-summary__active-filter,
li.odswidget-filter-summary__clear-all {
    border-radius: 3px;
    margin: 2px 4px;
    padding: 0;
}

li.odswidget-filter-summary__active-filter {
    color: white;
}

.odswidget-filter-summary__active-filter-label {
    color: black;
    font-size: 1rem;
}

a.odswidget-filter-summary__active-filter-link,
a.odswidget-clear-all-filters {
    border-left: none;
    margin: 0;
    padding: 2px 4px 2px 2px;
    display: flex;
    align-items: center;
}

a.odswidget-clear-all-filters {
    align-items: center;
    color: white;
    opacity: 0.8;
}
a.odswidget-clear-all-filters:hover {
    color: white;
    opacity: 1;
}

a.odswidget-clear-all-filters i {
    margin-right: 3px;
}

.box {
    position: relative;
    padding: 13px;
}
.box.colored {
    padding-top: calc(13px &#43; 9px);
}
.box.colored:before {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 9px;
    content: &#34;&#34;;
    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;
}
.box.colored.services:before {
    background-color: #ff714d;
}
.box.colored.sante:before {
    background-color: #25c9ff;
}
.box.white {
    background-color: white;
}
.box.flat {
    border: 1px solid #dfdfdf;
    border-radius: var(--boxes-radius);
}

.advanced-kpi {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.advanced-kpi--top .title {
    font-size: 1.2em;
    margin: 0 auto 6px;
}
.advanced-kpi--top .description {
    margin: 0 auto;
    color: #565656;
    font-size: 1em;
    font-weight: 400;
}

.advanced-kpi--middle {
    display: flex;
    flex-direction: column;
    margin: 20px 0;
}
.advanced-kpi--middle.centered {
    align-items: center;
}
.advanced-kpi--middle &gt; * {
    margin: 5px 0;
}
.advanced-kpi--middle .value {
    color: var(--highlight);
    font-weight: 600;
    font-size: 3rem;
}

.advanced-kpi--bottom {
    font-size: 0.8em;
}
.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {
    display: flex;
    justify-content: space-between;
}
.advanced-kpi--bottom .source {
    text-decoration: underline;
    color: var(--links);
}
.advanced-kpi--bottom .source i {
    margin-left: 6px;
}
.advanced-kpi--bottom .source:hover {
    opacity: 0.65;
}
.advanced-kpi--bottom .source:hover i {
    animation: bounce 0.7s ease infinite;
}

@keyframes bounce {
    from {
        margin-left: 6px;
        margin-right: 0;
    }
    50% {
        margin-left: 2px;
        margin-right: 4px;
    }
    to {
        margin-left: 6px;
        margin-right: 0;
    }
}
/* CHARTS */
.ods-chart {
    min-height: inherit;
}

.medium-chart {
    height: 350px;
}

.small-chart {
    height: 130px;
}

.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {
    font-family: Gotham-book, Arial, sans-serif !important;
}

.ods-highcharts__tooltip {
    align-items: center;
}"
            >
                <div class="highlight">
                    <pre class="language-css" data-lang="css"><code>/***** Observatory *****/
:root {
    --boxes-radius: 6px;
}

main {
    margin: 0;
}

.observatory {
    background-color: var(--page-background);
    /* prerequisite for full height modal bar */
    position: relative;
}

/***** GRID ******/
[class^=grid] {
    display: grid;
    grid-gap: 1rem;
}

@media screen and (min-width: 768px), print {

    .md\:grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}
@media screen and (min-width: 1024px), print {

    .lg\:grid-4 {
        grid-template-columns: repeat(4, minmax(0, 1fr));
    }
}

[class*=&#34;:cell&#34;] {
    display: flex;
    flex-direction: column;
    /*grid-column: 1 / -1;*/
    justify-content: stretch;
}
@media screen and (min-width: 768px), print {

    .md\:cell-full {
        grid-column: 1/-1;
    }

    .md\:cell-2 {
        grid-column: span 2/span 2;
    }
}
@media screen and (min-width: 1024px), print {

    .lg\:cell-2 {
        grid-column: span 2/span 2;
    }

    .lg\:cell-order-1 {
        order: 1;
    }

    .lg\:cell-order-2 {
        order: 2;
    }

    .lg\:cell-order-3 {
        order: 3;
    }

    .lg\:cell-order-4 {
        order: 4;
    }
}

.gap-6,
.gap-6 [class^=grid] {
    gap: 1.5rem;
}


section.head {
    background-color: white;
    padding: 26px 0;
}

.filter-block {
    position: sticky;
    top: 0;
    z-index: 1;
    box-shadow: 0px 15px 10px -15px #2b2b2b;
    margin-bottom: 35px;
    background-color: black;
}
.filter-block .container {
    display: flex;
    align-items: center;
    padding: 18px 0;
}
.filter-block button {
    padding: 0 13px;
    margin: 0 10px;
    border-radius: 100000px;
    display: flex;
    align-items: center;
    background-color: white;
    color: black;
    border: 1px solid black;
    height: 36px;
    min-width: max-content;
}
.filter-block button:hover {
    filter: invert();
}
.filter-block button svg {
    margin-right: 6px;
}

.titre {
    font-size: 37px;
    margin: 26px 0 6px;
}

.edito {
    margin: 0;
    font-size: 19px;
}

.edito q {
    font-style: italic;
}

#resume {
    font-size: 1.1em;
    line-height: 1.8em;
    margin-top: 26px;
}
@media screen and (min-width: 640px) {
    #resume {
        margin-right: 33%;
    }
}

/* BACKDROP (black screen when modal active) */
.backdrop {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    height: 100%;
    width: 100%;
    z-index: 900;
    background-color: #000;
    cursor: default;
    -webkit-transition: visibility 0.5s, opacity 0.5s;
    transition: visibility 0.5s, opacity 0.5s;
}

.backdrop-active {
    visibility: visible;
    opacity: 0.6;
    /* make a more or less darker backdrop, 1:totally dark, 0:totally transparent (invisibile) */
}

/* MODAL */
.cl-modal {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    right: -400px;
    bottom: 0;
    width: 400px;
    background-color: white;
    z-index: 1000;
    overflow: hidden;
    /* Disable horizontal scroll */
    transition: ease-in 0.3s;
}

.cl-modal-active {
    right: 0;
}

/* specific because ods-widgets are loaded inside */
.cl-modal__content {
    width: 400px;
}

@media (max-width: 420px) {
    .cl-modal-active {
        width: 100%;
    }

    .cl-modal__content {
        width: 100vw;
    }
}
.cl-modal__header {
    min-height: 35px;
    background-color: white;
    padding: 0 10px;
    display: flex;
    align-items: center;
    justify-content: start;
    opacity: 0;
    transition: opacity 0s;
}
.cl-modal__header .closebtn {
    padding: 0 13px;
    color: black;
}

.cl-modal-active .cl-modal__header {
    opacity: 1;
    transition-delay: 0.3s;
}

/* CONTENT OF THE MODAL */
/* HEADER / UPPER PART */
.cl-modal__header {
    border-bottom: 1px solid lightgrey;
}

/* THEN THE MIDDLE / CONTENT */
.cl-modal__content {
    height: 100%;
    overflow-y: auto;
    padding: 25px;
    opacity: 0;
    transition: opacity 0s;
}

/* WARNING ! This part is very important : it renders the content only after the end of the openning of the modal
ie. when the modal is resized, nothing is visible, after 0.3s of resizing, it&#39;s displays the content
this trick is very important to avoid the browser the resize all the content during the modal opening */
.cl-modal-active .cl-modal__content {
    opacity: 1;
    transition-delay: 0.3s;
}

/** FILTER SUMMARY */
ul.odswidget.odswidget-filter-summary {
    font-size: 1em;
    margin-left: 13px;
    position: relative;
}

@media (min-width: 420px) {
    ul.odswidget.odswidget-filter-summary {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
    }
}
li.odswidget-filter-summary__active-filter,
li.odswidget-filter-summary__clear-all {
    border-radius: 3px;
    margin: 2px 4px;
    padding: 0;
}

li.odswidget-filter-summary__active-filter {
    color: white;
}

.odswidget-filter-summary__active-filter-label {
    color: black;
    font-size: 1rem;
}

a.odswidget-filter-summary__active-filter-link,
a.odswidget-clear-all-filters {
    border-left: none;
    margin: 0;
    padding: 2px 4px 2px 2px;
    display: flex;
    align-items: center;
}

a.odswidget-clear-all-filters {
    align-items: center;
    color: white;
    opacity: 0.8;
}
a.odswidget-clear-all-filters:hover {
    color: white;
    opacity: 1;
}

a.odswidget-clear-all-filters i {
    margin-right: 3px;
}

.box {
    position: relative;
    padding: 13px;
}
.box.colored {
    padding-top: calc(13px &#43; 9px);
}
.box.colored:before {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 9px;
    content: &#34;&#34;;
    border-radius: var(--boxes-radius) var(--boxes-radius) 0 0;
}
.box.colored.services:before {
    background-color: #ff714d;
}
.box.colored.sante:before {
    background-color: #25c9ff;
}
.box.white {
    background-color: white;
}
.box.flat {
    border: 1px solid #dfdfdf;
    border-radius: var(--boxes-radius);
}

.advanced-kpi {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.advanced-kpi--top .title {
    font-size: 1.2em;
    margin: 0 auto 6px;
}
.advanced-kpi--top .description {
    margin: 0 auto;
    color: #565656;
    font-size: 1em;
    font-weight: 400;
}

.advanced-kpi--middle {
    display: flex;
    flex-direction: column;
    margin: 20px 0;
}
.advanced-kpi--middle.centered {
    align-items: center;
}
.advanced-kpi--middle &gt; * {
    margin: 5px 0;
}
.advanced-kpi--middle .value {
    color: var(--highlight);
    font-weight: 600;
    font-size: 3rem;
}

.advanced-kpi--bottom {
    font-size: 0.8em;
}
.advanced-kpi--bottom .advanced-kpi--bottom-second-stage {
    display: flex;
    justify-content: space-between;
}
.advanced-kpi--bottom .source {
    text-decoration: underline;
    color: var(--links);
}
.advanced-kpi--bottom .source i {
    margin-left: 6px;
}
.advanced-kpi--bottom .source:hover {
    opacity: 0.65;
}
.advanced-kpi--bottom .source:hover i {
    animation: bounce 0.7s ease infinite;
}

@keyframes bounce {
    from {
        margin-left: 6px;
        margin-right: 0;
    }
    50% {
        margin-left: 2px;
        margin-right: 4px;
    }
    to {
        margin-left: 6px;
        margin-right: 0;
    }
}
/* CHARTS */
.ods-chart {
    min-height: inherit;
}

.medium-chart {
    height: 350px;
}

.small-chart {
    height: 130px;
}

.highcharts-axis tspan, .highcharts-data-label tspan, .highcharts-label span, .highcharts-xaxis-labels text, .highcharts-yaxis-labels text {
    font-family: Gotham-book, Arial, sans-serif !important;
}

.ods-highcharts__tooltip {
    align-items: center;
}</code></pre>
                </div>
            </div>
            
        </div>
    </div>
</div>

      </div>
    </article>
    
  </div>
</section>

      </div>
    </div>

    <footer class="footer">
    <a href="https://www.opendatasoft.com"
       class="footer-link"
       title="Opendatasoft website">
        <img src="/img/ods-logo.svg"
             class="footer-logo"
             alt="Opendatasoft logo"
        />
    </a>
    <span class="footer-copyright">
        &copy; Copyright 2020
    </span>
</footer>
    
    
    

    <script>
      var process = { env: { NODE_ENV: "production" } };
    </script>
    <script
      type="text/javascript"
      src="/index.min.b7e641211aebe7ccc20773604f87847e072db6e340141e58e6eddd184676ecbd.js"
      defer
    ></script>
  </body>
</html>
